define("ydcommon:widget/ui/js_core/login/login.js",function(require,exports,module){var baidu=require("ydcommon:widget/lib/tangram/base/base.js"),T=baidu,D=require("ydcommon:widget/ui/js_core/dialog/dialog.js"),Data=require("ydcommon:widget/lib/fis/data/data.js"),log=require("ydcommon:widget/ui/js_core/log/log.js"),TPL="yuedu",ULINK=T.string.encodeHTML(location.href).replace(/&amp;/g,"&").replace(/#+$/g,""),STATIC_PAGE=location.origin+"/static/ydcommon/html/v3Jump.html",dialog=function(){var o=null;
return function(){return o||(o=D.dialogCreate()),o}}(),SHOW_FILTEL=["\u60a8\u7684\u8d26\u53f7\u56e0\u4e3a\u4e0a\u4f20\u4e86\u542b\u5e7f\u544a\u6027\u8d28\u7684\u6587\u6863\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c","\u60a8\u7684\u8d26\u53f7\u56e0\u4e3a\u4e0a\u4f20\u4e86\u5927\u91cf\u4f4e\u8d28\u91cf\u7684\u6587\u6863\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c","\u60a8\u7684\u8d26\u53f7\u56e0\u4e3a\u6d89\u5acc\u5237\u5206\u4f5c\u5f0a\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c","\u60a8\u7684\u8d26\u53f7\u56e0\u4e3a\u4e0a\u4f20\u4e86\u5305\u542b\u8272\u60c5\u3001\u53cd\u52a8\u7b49\u4e0d\u5065\u5eb7\u5185\u5bb9\u7684\u6587\u6863\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c","\u60a8\u7684\u8d26\u53f7\u56e0\u4e3a\u4e0a\u4f20\u4e86\u5305\u542b\u8fdd\u89c4\u5185\u5bb9\u7684\u6587\u6863\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c","\u60a8\u7684\u5e10\u53f7\u56e0\u4e3a\u6076\u610f\u4e3e\u62a5\u800c\u88ab\u5c01\u7981\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c"],getLoginInterfaceUrl=function(){return"/user/interface/login?t="+(new Date).getTime()
},login={hide:function(o){parent.pop?(parent.pop.hide(),o&&parent.location.reload(!0)):history.go(-1)},onLoginSuccess:function(){window.location.reload(!0)},onLoginFailed:function(){window.location=location.protocol+"//passport.baidu.com/v2/?login&tpl=yuedu&u="+escape("//yuedu.baidu.com/")},defalutLoginSuccess:function(){window.location.reload(!0)},verlogin:function(hasLogin,notLogin,patchment,extObj,async,needRealName){function onOk(req,hasLogin){var res=eval("("+req.responseText+")");if("1"===res.isLogin){if("1"!==res.isLock)return parseInt(res[REAL_NAME_VAR])?WkInfo.UserInfo&&WkInfo.UserInfo.isLimit?void login.notifyToVerificationMail():(hasLogin&&hasLogin(),!0):void login.doRealName(function(){hasLogin()
},function(){stopNextAction||hasLogin()});var isNA=0===res.lockDay?"":"\uff0c\u5c01\u7981\u5929\u6570"+res.lockDay+"\u5929\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u89e3\u5c01",lockReasonIndex=parseInt(res.lockReason,10)-1,msg=SHOW_FILTEL[lockReasonIndex]||SHOW_FILTEL[4];dialog().alert({title:"\u63d0\u793a",content:"<p style='padding:0 20px;'>"+msg+isNA+"\u3002</p>",width:440,height:200})}else hasLogin&&extObj.actionName?baidu.cookie.set("BAIDU_DOC_NACT",extObj.actionName):hasLogin&&hasLogin.toString().indexOf("location.href")&&baidu.cookie.set("BAIDU_DOC_NACT","upload"),notLogin?notLogin():login.log(hasLogin,patchment,extObj);
return!1}var extObj=extObj||{},WkInfo=Data.get("WkInfo")||{};async=void 0===async?!0:async,needRealName=!0;var stopNextAction=!0,REAL_NAME_VAR="isRealName";baidu.ajax.request(getLoginInterfaceUrl(),{async:async,onsuccess:function(o){onOk(o,hasLogin)}})},check:function(hasLogin,notLogin,patchment,extObj){function onOk(req,hasLogin,notLogin){var res=eval("("+req.responseText+")");return"1"===res.isLogin?WkInfo.UserInfo&&WkInfo.UserInfo.isLimit?void login.notifyToVerificationMail():WkInfo.UserInfo&&WkInfo.UserInfo.isNoUsername?void login.notifyToFillinUsername():(hasLogin&&hasLogin(),!0):(notLogin?notLogin():login.log(hasLogin,patchment),!1)
}var extObj=extObj||{},WkInfo=Data.get("WkInfo")||{};baidu.ajax.get(getLoginInterfaceUrl(),function(o){onOk(o,hasLogin,notLogin)})},checksynch:function(hasLogin,notLogin,patchment){function onOk(req,hasLogin,notLogin){var res=eval("("+req.responseText+")");if("1"===res.isLogin){if("1"===res.isLock){var isNA=0===res.lockDay?"":"\uff0c\u5c01\u7981\u5929\u6570"+res.lockDay+"\u5929\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u89e3\u5c01",lockReasonIndex=parseInt(res.lockReason,10)-1,msg=SHOW_FILTEL[lockReasonIndex]||SHOW_FILTEL[4];
return dialog().pop({title:"\u63d0\u793a",content:"<p>"+msg+isNA+"\u3002</p><br><input type='button' class='pop_btn_short' onclick='pop.hide()' value='\u786e \u5b9a'>",width:440,height:300}),!1}return hasLogin&&hasLogin(),!0}return notLogin?notLogin():login.log(hasLogin,patchment),!1}baidu.ajax.request(getLoginInterfaceUrl(),{onsuccess:function(o){onOk(o,hasLogin,notLogin)},method:"get",async:!1})},log:function(o,n,i){function e(){WkLogin.from=baidu.object.isEmpty(i)?"":i;var o=baidu.dom.query("#passport-login-pop-api form")[0];
if(o)var n=o.u;n&&(i&&i.fromMod?login.addSuccessLog(i.fromMod,n):n.value=encodeURI(location.href).replace(/#+$/g,""))}login.onLoginSuccess=o?login.onSucc:login.defalutLoginSuccess,window.WkLogin?(WkLogin.show(),e()):this.getPassAPI(function(){window.WkLogin=passport.pop.init({tangram:!0,apiOpt:{sms:5,product:"yuedu",staticPage:location.origin+"/static/ydcommon/html/v3Jump.html",u:T.string.encodeHTML(location.href).replace(/&amp;/g,"&").replace(/#+$/g,"")},cache:!0,authsite:["tsina","weixin","qzone"],authsiteCfg:{target:"pass-phoenix-list",tpl:"yuedu",u:T.string.encodeHTML(location.href).replace(/&amp;/g,"&").replace(/#+$/g,""),display:"popup",act:"implicit"},registerLink:"https://passport.baidu.com/v2/?reg&tpl=yuedu&u="+encodeURIComponent(location.href),img:"//wkstatic.bdimg.com/static/ydcommon/widget/ui/js_core/login/images/login_logo_8fdab0a.jpg",onLoginSuccess:function(o){o.returnValue=!1,T.lang.eventCenter.dispatchEvent("Login.Success",{WkLogin:window.WkLogin})&&(location.href=o.rsp.data.u)
},onShow:function(){T.lang.eventCenter.dispatchEvent("Login.Show",{WkLogin:WkLogin}),console.log("passport v3 onshow")},onHide:function(){T.lang.eventCenter.dispatchEvent("Login.Hide",{WkLogin:window.WkLogin}),window.WkLogin.from="",console.log("passport v3 onHide")}}),WkLogin.show(),e()})},regiest:function(){},notifyToVerificationMail:function(o){o=o||"http://"+location.host+location.pathname;var n=['<div class="phv20">\u60a8\u7684email\u5c1a\u672a\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u6210\u529f\u540e\u5237\u65b0\u9875\u9762\u5373\u53ef\u7ee7\u7eed\u64cd\u4f5c\u3002','<a href="https://passport.baidu.com/v2/?accountbindemail&tpl=yuedu&u='+encodeURIComponent(o)+'" target="_blank" onclick="location.reload(true)" style="color:#E87301">\u70b9\u51fb\u7acb\u5373\u9a8c\u8bc1</a></div>'].join("");
dialog().pop({title:"\u63d0\u793a",content:n,width:520,height:160})},notifyToFillinUsername:function(o){var o=o||"default";log.send("general","showFillinUsername",{action:o});var n="?t="+(new Date).getTime()+"&action="+o;dialog().pop({title:"\u4eb2\u7231\u7684\u6587\u53cb\uff0c\u8d77\u4e2a\u54cd\u4eae\u7684\u540d\u5b57\u5427\uff0c\u5b83\u5c06\u4f34\u7740\u4f60\u7684\u8d21\u732e\u5c55\u793a\u7ed9\u5927\u5bb6\uff01",url:"/static/ydcommon/html/user_fillinUsername.html"+n,width:560,height:320})},addSuccessLog:function(o,n){var i=encodeURI(location.href).replace(/#.*$/g,""),e=location.pathname,t={home:/^\/$/i,search:/^\/search/i,view:/^\/view\//i,zone:/^\/(edu|ppt|pro|form)\/index$/i};
for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];if(s.test(e)){var r="from_page="+a;i=login.getConUrl(i,r)}}var c="from_mod="+o;i=login.getConUrl(i,c),n.value=i},getConUrl:function(o,n){var i=-1===o.indexOf("?")?"?":"&";return o+i+n},getPassAPI:function(o){o=o||function(){};var n={"http:":"http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion=","https:":"https://passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="};this._initPassAPI?o():(this._initPassAPI=!0,T.sio.callByBrowser(n[window.location.protocol]+~new Date,o))
},doRealName:function(o,n){o=o||function(){},n=n||function(){};this.getPassAPI(function(){var i=passport.pop.init({type:"accRealName",id:"test",apiOpt:{sms:5,product:TPL,staticPage:STATIC_PAGE,u:ULINK},tangram:!0,authsite:["tsina","weixin","qzone"],color:"green",onSubmitStart:function(){},onShow:function(){},onHide:function(){n("hide"),setTimeout(function(){i.destroy(),$("#passport-accRealName-pop").remove()},0)},onSubmitSuccess:function(){o()},onNotloginAction:function(){n("onNotloginAction")},onVerifyalreadyAction:function(){n("onVerifyalreadyAction")
}});i.show()})}};module.exports.login=login});
;define("ydcommon:widget/ui/js_core/log/log.js",function(e,n,t){var o=e("ydcommon:widget/lib/tangram/base/base.js"),i=e("ydcommon:widget/ui/js_core/util/util.js"),a=e("ydcommon:widget/lib/fis/data/data.js"),d=o.sio.log;t.exports.log=d,t.exports.imageReq=d;var c,r={},m=function(e,n){r[e]=n};t.exports.mark=m;var u=function(e,n,t){var i=(new Date).getTime(),m=[location.origin+"/tongji/"+e+".html?type="+n,"t="+i];t&&o.object.each(t,function(e,n){m.push(n+"="+e)}),r&&o.object.each(r,function(e,n){m.push(n+"="+e)
}),d(m.join("&"));var u=e+"."+n;c=c||a.get("nsTypeMap"),c&&c[u]&&(t=t||{},t.nsact=u,s(1,c[u],t))};t.exports.send=u;var s=function(e,n,t){var i=(new Date).getTime(),a=["http://nsclick.baidu.com/v.gif?pid=112","url="+encodeURIComponent(e),"type="+n,"t="+i];o.object.each(t,function(e,n){a.push(n+"="+e)}),d(a.join("&"))};t.exports.nslog=s;var g=function(){{var e,n=document.location.pathname,t=null,i=encodeURIComponent(document.referrer||""),c=encodeURIComponent(document.location.href.replace(/#.*/g,"")),r=0,m=0,u=null;
arguments.length}switch(arguments[0]>2?(r=/yuedu/i.test(c)?2:1,m=arguments[0],u=arguments[1]):(r=arguments[0],m=arguments[1],u=arguments[2]),+m){case 1e5:e=["//wkctj.baidu.com/pv.gif?pid=1"];break;case 100037:e=["//wkctj.baidu.com/dv.gif?pid=1"];break;default:e=["//wkctj.baidu.com/click.gif?pid=1"]}var s={bid:r,fr:4,act_id:m,url:c,refer:i,t:+new Date},g=a.get("WkInfo").DocInfo,l={midway:{reg:new RegExp("^/subject/","i"),data:{ab_type:g&&g.midway&&g.midway.ab_type,hscore:g&&g.midway&&g.midway.hscore,hrank:g&&g.midway&&g.midway.hrank,hrdtime:g&&g.midway&&g.midway.hrdtime,ebook:g&&g.midway&&g.midway.ebook}}};
g&&g.player&&(l.view.data.player=g.player),o.object.each(l,function(e){e.reg.test(n)&&(t=e.data)}),t&&o.object.merge(s,t),u&&o.object.merge(s,u),o.object.each(s,function(n,t){e.push(t+"="+n)});var f=a.get("smallFlowContent");if(f)for(var p in f)e.push(f[p]);d(e.join("&"))};t.exports.xsend=g,window.FEDEBUG||o.on(window,"load",function(){var e,n,t=!1;"undefined"!=typeof document.hidden?(e="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(e="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),e&&o.on(document,n,function(){var n=document[e];
t=n?!0:!1})});var l=function(){i.delegate(document.body,".logSend","mousedown",function(){var e=this,n="data-logsend",t={send:u,nslog:s},i=o.dom.getAttr(e,n);i&&(i=o.json.parse(i)||{},o.object.each(i,function(e,n){t[n],t[n].apply(null,e)}))})},f=function(){i.delegate(document.body,".log-xsend","mousedown",function(){var e=o.dom.getAttr(this,"data-logxsend");e&&(e=o.json.parse(e)||{},g(e[0],e[1],e[2]))})};o.dom.ready(function(){l(),f();var e=/yuedu/i.test(location.href)?2:1;g(e,1e5)})});
;define("ydcommon:widget/ui/js_core/util/util.js",function(e,t,n){function r(e,t,n,r){var o;return function(){var i=arguments;r=r||this,n&&o&&(o=clearTimeout(o)),o=o||setTimeout(function(){o=null,e.apply(r,i)},t)}}var o=e("ydcommon:widget/lib/tangram/base/base.js");window.FEDEBUG=!1,function(){"wenku.baidu.com"==window.location.hostname&&window.console;for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{},a=window.FEDEBUG=window.FEDEBUG||o.url.getQueryValue(location.href,"fedebug");r--;)e=n[r],a&&i[e]||(i[e]=t)
}();try{document.execCommand("BackgroundImageCache",!1,!0)}catch(i){}var a=function(e,t,n){return r(e,t,!1,n)};n.exports.throttle=a;var u=function(e,t,n){return r(e,t,!0,n)};n.exports.debounce=u;var s=function(e,t){var n={};return o.lang.isFunction(t)&&(t=function(e){return e}),function(){var r=t.apply(this,arguments);return Object.prototype.hasOwnProperty.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}};n.exports.memoize=s;var c=function(e,t,n,r){t=t.replace(/^on/i,""),e=o.dom._g(e);var i,a=function(t){n.call(e,t)
},u=o.event._listeners,s=o.event._eventFilter,c=t;return t=t.toLowerCase(),s&&s[t]&&(i=s[t](e,t,a),c=i.type,a=i.listener),e.addEventListener?e.addEventListener(c,a,r):e.attachEvent&&e.attachEvent("on"+c,a),u[u.length]=[e,t,n,a,c],e},l=function(e,t,n,r){e=o.dom._g(e),t=t.replace(/^on/i,"").toLowerCase();for(var i,a,u,s=o.event._listeners,c=s.length,l=!n;c--;)i=s[c],i[1]!==t||i[0]!==e||!l&&i[2]!==n||(a=i[4],u=i[3],e.removeEventListener?e.removeEventListener(a,u,r):e.detachEvent&&e.detachEvent("on"+a,u),s.splice(c,1));
return e},d={submit:!0,reset:!0,change:!0,select:!0},f=function(){var e=d,t={focus:"focusin",blur:"focusout"},n={focus:!0,blur:!0},r=function(t){return o.browser.ie&&e[t]},i=function(e){return o.browser.ie&&t[e]?t[e]:e};return function(e,t,a,u){var s=o.lang.isString,d=o.lang.isFunction,p=o.dom.query;if(r(a))return f(e,t,"focus",function(){l(this,a),c(this,a,function(e){return u.call(this,e)})}),f(e,t,"blur",function(){l(this,a)}),!1;e=s(e)?p(e)[0]:e;var m=s(t)?function(n){var r=n.target;return 3===r.nodeType&&(r=r.parentNode),o.array.find(p(t,e),function(e){return e===r||o.dom.contains(e,r)&&!e.disabled
})}:d(t)?function(e){return t(e)}:function(){};a=i(a),c(e,a,function(e){var t=o.event.get(e),n=m(t);if(n){u.call(n,t)}},n[a])}}();!function(){var e=!1;o.event._eventFilter.input=window.attachEvent?function(t,n,r){return{type:"propertychange",listener:function(t){return e?!1:void(t.propertyName&&"value"===t.propertyName.toLowerCase()&&(e=!0,r(t),e=!1))}}}:function(e,t,n){return{type:"input",listener:n}},d.input=!0}(),n.exports.delegate=f;var p=function(){var e;return o.un(window,"unload",function(){document.body.onresize=null,window.onresize=null
}),function(t){var n=e;e=function(){try{document.body.onresize=null,window.onresize=null,setTimeout(function(){o.browser.ie<8?document.body.onresize=u(e,200):window.onresize=u(e,200)},1)}catch(r){}o.lang.isFunction(n)&&n(),t()},o.browser.ie<8?document.body.onresize=u(e,200):window.onresize=u(e,200)}}();n.exports.windowResize=p;var m=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n};n.exports.setInnerHtml=m;var v=function(e,t){document.body&&"textContent"in document.body?e.textContent=t:e.innerText=t
};n.exports.setInnerText=v;var h=function(e){return document.body&&"textContent"in document.body?e.textContent:e.innerText||e.textContent||""};n.exports.getInnerText=h;var g=function(){var e=document.createElement("div"),t={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]},n=/<(\w+)/i;
return function(r,o,i){var a=i&&i.createElement("div")||e,u=a,s=(n.exec(r)||["",""])[1],c=t[s]||t._default,l=c[0];for(a.innerHTML=c[1]+r+c[2];l--;)a=a.firstChild;var d=a.firstChild;if(d&&o){i=i||document;for(var f=i.createDocumentFragment();d;)f.appendChild(d),d=a.firstChild;return f}for(;u.firstChild;)u.removeChild(u.firstChild);return d}}();n.exports.createDom=g;var y=function(){var e=1;return function(t){var n=e++;return t?t+n:n}}();n.exports.uniqueId=y;var w=function(){var e=[],t="_da"+(new Date-0);
return{hasData:function(n){var r=n[t];return!!r&&!!e[r]},get:function(n,r){return void 0===r?n[t]||(n[t]=y("dom__")):n[t]&&e[n[t]]?r?e[n[t]][r]:e[n[t]]:void 0},set:function(n,r,o){var i=n[t]||(n[t]=y("dom__"));if(e[i]=e[i]||{},"object"==typeof r)for(var a in r)"string"==typeof a&&(e[i][a]=r[a]);else e[i][r]=o;return this},remove:function(n,r){if(!n)return this;var o=n[t]||(n[t]=y("dom__"));return e[o]&&(void 0!==r?delete e[o][r]:e[o]=null),this}}}();n.exports.domData=w;var x=function(e,t,n){e=o.g(e);
for(var r,i,a,u=e.className,s=u.split(/\s+/),c=t.split(/\s+/),l=n.split(/\s+/),d=c.length,f=l.length,p=0;d>p;++p)for(a=0,r=s.length;r>a;++a)if(s[a]==c[p]){s.splice(a,1);break}for(i=" "+s.join(" ")+" ",p=0;f>p;p++)i.indexOf(" "+l[p]+" ")<0&&(i+=(i?" ":"")+l[p]);return e.className=i,e};n.exports.replaceClass=x;var b=function(e,t,n){e=o.g(e);var r=e.style,i=function(e){return"undefined"!=typeof e},a={display:!0};if("filters"in e&&("string"==typeof t?/opacity/i.test(t):i(t.opacity))&&(r.zoom=1,r.filter=(r.filter||"").replace(/alpha\([^)]*\)/,"")+"alpha(opacity="+100*(i(t.opacity)?t.opacity:n)+")"),i(r.cssText)){var u=r.cssText;
if(o.lang.isObject(t))for(var s in t)o.lang.isString(s)&&(a[s]&&(r[s]=t[s]),u+=";"+s+":"+t[s]);else a[t]&&(r[t]=n),u+=";"+t+":"+n;r.cssText=u}return e};n.exports.setStyle=b;var C=function(){return!document.styleSheets[0].insertRule},E=function(e,t,n){n=n||document;var r=o.dom.g(t);if(r&&"style"===r.nodeName.toLocaleLowerCase())return r;r=n.createElement("style"),r.id=t||y("wk-style-"),window.createPopup||r.appendChild(n.createTextNode(""));var i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;
return i.insertBefore(r,i.firstChild),e&&S(r,e),r},S=function(e,t){e=o.dom.g(e),C()?e.styleSheet.cssText=t:window.createPopup?e.innerHTML=t:e.appendChild(document.createTextNode(t))};n.exports.importCssString=E,n.exports.createCssString=E,n.exports.addCssString=S;var T=function(e){e=e||y("wk-styleManager-");{var t,n=E("",e),r="_style_stack",i="_style_styleKey";o.lang.isArray}w.hasData(n)?(t=w.get(n,r),stylesheets=w.get(n,i)):(t=[],stylesheets={},w.set(n,r,t),w.set(n,i,stylesheets));var a=[],u=document.createStyleSheet?function(e,n,r){o.array.each(r,function(e){n.hasOwnProperty(e[0])?t[n[e[0]]]=e[1]:(t.push(e[1]),n[e[0]]=t.length-1)
}),r.length=0,o.dom.empty(e),e.styleSheet.cssText=t.join("\n")}:function(e,t,n){o.array.each(n,function(n){var r;t.hasOwnProperty(n[0])&&o.dom.remove(t[n[0]]),r=document.createTextNode(n[1]),t[n[0]]=r,e.appendChild(r)}),n.length=0};return{getEl:function(){return n},getId:function(){return n.id},register:function(e,t){return a.push([e,t]),this},render:function(){return u(n,stylesheets,a),this},cleanStyle:function(){return o.dom.empty(n),this},removeManager:function(){w.remove(n,r),w.remove(n,i),o.dom.remove(n),o.browser.ie&&B(n),n=t=stylesheets=a=null
}}};n.exports.cssStringManager=T,n.exports.styleManger=T;var _=function(e){e=e||document;var t=e.body;o.dom.setStyle(t,"zoom",1),o.dom.setStyle(t,"zoom",0)};n.exports.ieReflow=_;var j=function(){var e=9e3,t="data-ZIndexDefaultValue",n=[];return{bringToFront:function(r){var i;null===o.dom.getAttr(r,t)&&(i=o.dom.getStyle(r,"z-index"),o.dom.setAttr(r,t,i||0)),o.dom.setStyle(r,"z-index",e++),r.id||(r.id=y("Zuniqueid__")),o.array.remove(n,r.id),n.push(r.id)},sendToBack:function(e){var r=o.dom.getAttr(e,t)||0;
o.dom.setStyle(e,"z-index",r),o.array.remove(n,e.id)},getActive:function(){return n.length>0?n[n.length-1]:null}}}();n.exports.zIndexManger=j,n.exports.zIndexManager=j;var z=function(){this.q=[],this.paused=!1,this._inProgress=!1};o.object.extend(z.prototype,{add:function(){var e=this;return o.array.each(arguments,function(t){o.lang.isFunction(t)&&e.q.push(t)}),this},dequeue:function(){return this.empty()||this.q.pop(),this},next:function(){return this.empty()||this.paused?void 0:(this._inProgress=!0,this.q.shift().apply(this),this)
},flush:function(){for(;!this.empty()&&!this.paused;)this.next();return this},clear:function(){return this.q.length=0,this},empty:function(){return 0===this.q.length?(this._inProgress=!1,!0):!1},remove:function(e){return o.array.remove(this.q,e),this},promote:function(e){return this.remove(e),this.q.unshfit(e),this},pause:function(){return this.paused=!0,this},run:function(){return this.paused=!1,this.next(),this}}),n.exports.queue=z;var L=function(){var e=o.ajax.request,t=new z,n=["onsuccess","onfailure"];
return function(r,i){return o.array.each(n,function(e){var n=i[e];n&&(i[e]=function(){var e=[].slice.call(arguments,0);n.apply(null,e),t.run()})}),i.noCache=!1,t.add(function(){t.pause(),e(r,i)}),t.flush(),arguments.callee}}();n.exports.ajaxManger=L,n.exports.ajaxManager=L,n.exports.ajaxQueue=L;var q=function(e,t,n){var r;if(o.lang.isArray(t)){for(r=0,len=t.length;len>r;r++)q(e,t[r],n);return e}for(r in t)!n&&r in e||(e[r]=t[r]);return e};n.exports.mix=q;var D=function(e,t){var n=function(e){e&&q(this,e,!0)
};return n.prototype=e,new n(t)};n.exports.objectCreate=D;var N=function(e,t){var n=[].slice.call(arguments,2),r=D(t);return e.apply(r,n),r};n.exports.objectFactory=N;var F=function(e){var t={};return function(n){if(!o.lang.isFunction(e[n]))return console.error("objectPool error! name:"+n+"!"+arguments.callee.caller),!1;var r=[].slice.call(arguments,1);return t.hasOwnProperty(n)||o.lang.isObject(t[n])||(t[n]=N.apply(null,[e[n],e[n].prototype].concat(r))),t[n]}};n.exports.objectPool=F;var M=function(e,t,n,r){var i=e[t];
if(o.lang.isString(r)&&!/^(before|after)$/.test(r))return function(){return console.error("auto arguments error!"),!1};var a={after:function(){return i.apply(e,arguments),n.apply(e,arguments)},before:function(){return n.apply(e,arguments),i.apply(e,arguments)}};e[t]=r&&a.hasOwnProperty(r)?a[r]:function(){var t=[].slice.call(arguments,0);return t.unshift(function(){return i.apply(e,arguments)}),n.apply(e,t)}};n.exports.punch=M;var P=function(){var e="";if(window.getSelection)if(!document.activeElement||"textarea"!=document.activeElement.tagName.toLowerCase()&&"input"!=document.activeElement.tagName.toLowerCase()){var t=window.getSelection();
e=t.toString()}else{var n=document.activeElement.value;e=n.substring(document.activeElement.selectionStart,document.activeElement.selectionEnd)}else if(document.selection.createRange){var r=document.selection.createRange();e=r.text}return""!==e?e:void 0};n.exports.getSelection=P;var I=function(){if(window.getSelection){var e=window.getSelection();e.collapseToStart()}else{var t=document.selection.createRange();t.collapse(!0),t.select()}};n.exports.collapseToStart=I;var O=function(){if(window.getSelection){var e=window.getSelection();
e.collapseToEnd()}else{var t=document.selection.createRange();t.collapse(!1),t.select()}};n.exports.collapseToEnd=O;var k=function(e,t,n){e=e.toString();var r=e.length;return"undefined"==typeof n&&(n=""),r?0>t||t>=r?e:[e.slice(0,t),n].join(""):n};n.exports.cutString=k;var A=o.dom.create("div"),B=function(e){A.appendChild(e),A.innerHTML="",e=null};n.exports.recycleDom=B;var R=function(){var e=["ie","firefox","opera","chrome","maxthon","safari"],t=o.array.filter(e,function(e){return o.browser[e]});
return t=t&&t.length?t[0]:navigator.userAgent}();n.exports.getBrowser=R;var H=function(e){window.onerror=function(t,n,r){Array.prototype.slice(arguments);return e(R,location.href,t,n,r),!1},o.on(window,"unload",function(){window.onerror=null})};n.exports.errorCenter=H;var G=function(e){{var t,n=5;setInterval(function(r){var r=1;t=new Date-t,t>700&&r++,t>650&&r++,t>600&&r++,t>550&&r++,e(n=n>r?--n:r),t=new Date},500)}t=new Date};n.exports.jpu=G});
;define("ydcommon:widget/ui/js_core/widget/widget.js",function(t,s,e){var i=t("ydcommon:widget/lib/tangram/base/base.js"),n=t("ydcommon:widget/ui/js_core/util/util.js"),a=n.mix,o=function(t,s){t=a(t||{},{el:"",_init:i.fn.blank,Options:{}}),s=a(s||{},{type:"",superClass:i.lang.Class,include:[]});var e=s.superClass,n=function(t){var e=this;t=t||{},e.options=e.setOptions(t,t.el||e.el),e.type=s.type,e._created=!1,e._disabledStatus=!1,n.superClass._init&&n.superClass._init.call(e,t),e._init&&e._init.call(e,t),i.array.each(s.include,function(s){s.call(e,t,e)
}),e.on("onload",function(){e._created=!0,e._disabledStatus=!0})};return i.lang.inherits(n,e),n.extend(a(t,o._method)),n};o._method={setOptions:function(t,s){return i.lang.isElement(s)&&(t=a(t,new Function("return "+i.dom.getAttr(s,"data-options"))()||{})),t&&(t=a(i.object.clone(this.Options),t,!0),a(this,t,!0)),t},dispose:function(){this.fire("ondispose")&&i.lang.Class.prototype.dispose.call(this)},_setStatus:function(t){return t?(this._disabledStatus=!0,i.dom.addClass(this.el,this.type+"-disabled ui-state-disabled")):(this._disabledStatus=!1,i.dom.removeClass(this.el,this.type+"-disabled ui-state-disabled")),this
},setDisable:function(){return this._setStatus(!0)},setEnable:function(){return this._setStatus(!1)}},e.exports.widget=o});
;define("ydcommon:widget/ui/js_core/layerControl/layerControl.js",function(e,o,i){var t=e("ydcommon:widget/lib/tangram/base/base.js"),n=e("ydcommon:widget/ui/js_core/widget/widget.js").widget,r=e("ydcommon:widget/ui/js_core/util/util.js"),s=n({Options:{el:""},_init:function(){var e=this;r.mix(this,r.zIndexManager),e.on("onload",function(){e._action()})},_action:t.fn.blank,show:function(){this.fire("onShowBefore"),this.bringToFront(this.el),t.dom.show(this.el),this.fire("onShowAfter")},hide:function(){this.fire("onHideBefore"),this.sendToBack(this.el),t.dom.hide(this.el),this.fire("onHideAfter")
},remove:function(){this.fire("onRemvoeBefore"),t.dom.remove(this.el),this.fire("ondispose"),this.fire("onRemvoeAfter")}},{type:"layerControl"});i.exports.layerControl=s});
;define("ydcommon:widget/ui/js_core/mask/mask.js",function(t,i,o){var e=t("ydcommon:widget/lib/tangram/base/base.js"),s=t("ydcommon:widget/ui/js_core/widget/widget.js").widget,n=t("ydcommon:widget/ui/js_core/util/util.js"),h=t("ydcommon:widget/ui/js_core/layerControl/layerControl.js").layerControl,l=s({Options:{el:"",container:document.body,opacity:.3,top:"",left:"",width:"",height:"",bgColor:"#000000",closeWithEsc:!0,closeWithClick:!0,closeSelector:".ui-mask-close",handCursor:!0,autoShow:!0,onClose:e.fn.blank},_init:function(t){var i=this,o=e.event,s=function(){i.autoresize()
};this.fullPage=t.container===document.body,e.object.extend(this,n.mix(this.Options,t||{},!0)),this.el=this.el||document.createElement("div"),this.domId=this.el.id=["mask-layer",e.lang.guid()].join("-"),document.body.appendChild(this.el),this._action(),this.on("onCloseAfter",function(){i.dispose()}),this.on("onHideAfter",function(){i.showing=!1,o.un(window,"resize",s),o.un(window,"scroll",s)}),this.on("onShowAfter",function(){i.showing=!0,o.on(window,"resize",s),o.on(window,"scroll",s)}),this.autoShow&&this.show()
},_action:function(){var t=e.event,i=this,o=function(t){27===t.keyCode&&i.close()};n.delegate(this.el,this.closeSelector,"click",function(o){i.close(),t.stop(o)}),this.closeWithEsc&&t.on(document,"keydown",o),this.closeWithClick&&t.on(this.el,"click",function(){i.close()}),t.on(this.el,"click",function(t){i.fire("onClick",t)}),this.on("ondispose",function(){t.un(document,"keydown",o)}),this._addHtml(),this._addStyle()},autoresize:function(){this.width&&this.height||this._addStyle()},close:function(){this.hide(),this.onClose.call(this)!==!1&&(this.fire("onCloseBefore"),document.body.removeChild(this.el),this.fire("onCloseAfter"))
},_addHtml:function(){this.el.innerHTML=['<iframe frameborder="0" style="',"filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);","position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;",'" src="about:blank"></iframe>','<div style="position:absolute;top:0;left:0;width:100%;height:100%;">&nbsp;</div>'].join("")},_addStyle:function(){var t=this.container,i=this.el,o=e.dom.getPosition(this.container);return i.style.cssText+=[";top : "+(this.top||o.top)+"px","left : "+(this.left||o.left)+"px","width : "+(this.width||t.offsetWidth)+"px","height : "+(this.height||t.offsetHeight)+"px","background : "+this.bgColor,"opacity : "+this.opacity,"filter : alpha(opacity="+100*this.opacity+")","position : absolute",this.handCursor?"cursor : pointer; _cursor : hand":"","display : "+(this.showing?"block":"none")].join(";"),this
},attr:function(t){return this.Options[t]}},{type:"mask",superClass:h}),c=function(t){var i=new l(t);return i};o.exports.mask=l,o.exports.maskCreate=c});
;define("ydcommon:widget/ui/js_core/lightMask/lightMask.js",function(t,e,i){var s=t("ydcommon:widget/ui/lib/jquery/jquery.js"),o=function(t){this.init(t)};s.extend(o.prototype,{init:function(t){var e=this;e.options=t,e.el=s('<div class="light-mask"></div>').appendTo(document.body),e.createChild(),e.render()},createChild:function(){var t=this,e=0,i=[];for(i.push('<table class="child-mask-table">'),e;9>e;e++){e%3===0&&i.push('<tr class="row-'+Math.floor(e/3)+'">');var o="dark",h="&nbsp;";4===e&&(o="light",h=t.options.content||"&nbsp;"),i.push('<td class="cell-'+e+" "+o+'">'+h+"</td>"),(e+1)%3===0&&i.push("</tr>")
}i.push("</table>"),i=i.join(""),t.table=s(i).appendTo(t.el)},render:function(t){var e=this;t=t||e.options.space;var i=t[0]+t[2],o=t[1]+t[3],h=s(document.body).width(),l=s(document.body).height();i=i>h?i:h,o=o>l?o:l,e.el.css({width:i,height:o}),e.table.css({width:i,height:o}),s(".cell-0",e.table).css({width:t[0]||1,height:t[1]||1}),s(".cell-4",e.table).css({width:t[2],height:t[3]}),s(".cell-6",e.table).css({height:o-t[1]-t[3]})},dispose:function(){var t=this;t.el.remove()}}),i.exports=o});
;define("ydcommon:widget/ui/js_core/dialog/dialog.js",function(i,t,o){var e=i("ydcommon:widget/lib/tangram/base/base.js"),n=i("ydcommon:widget/ui/js_core/widget/widget.js").widget,a=i("ydcommon:widget/ui/js_core/util/util.js"),s=n({Options:{el:""},btnSize:{small:20,middle:26,large:32},_init:function(){var i=this;a.mix(i,a.zIndexManger),i._initClassName="mod ui-dialog ",i.on("onload",function(){i._createDialog()})},_createDialog:function(){var i=null,t=this._dataTpl,o=document.body;(i=e.g("WkDialogWrap"))||(i=document.createElement("div"),i.id="WkDialogWrap",i.style.display="none",i.innerHTML=[t.mask,t.mod].join(""),o.insertBefore(i,o.firstChild)),this.el=i
},pop:function(i){this.option=i,this.option.type="pop",this.option.style="pop",this.option.hdHeight=80,this.show()},confirm:function(i){this.option=i,this.option.btnText=this.option.btnText||["\u786e\u5b9a","\u53d6\u6d88"],this.option.type="confirm",this.option.style="confirm",this.option.hdHeight=140,this.show(),e.dom.addClass(e.g("WkDialogOk"),"mv10")},alert:function(i){this.option=i,this.option.btnText=this.option.btnText||["\u786e\u5b9a"],this.option.type="alert",this.option.style="alert",this.option.hdHeight=140,this.show(),e.dom.removeClass(e.g("WkDialogOk"),"mv10")
},show:function(){e.lang.eventCenter.dispatchEvent("DialogShowBefore"),this.conType=this.option.url?"ifm":"dom",this._bindFire(),this._render(),this._bind(),this.bringToFront(this.el),this.el.style.display="block",e.lang.eventCenter.dispatchEvent("DialogShowAfter"),this.drawSize()},hide:function(){e.lang.eventCenter.dispatchEvent("DialogHideBefore"),this.sendToBack(this.el),this.onClosed(),this.el.style.display="none",e.lang.eventCenter.dispatchEvent("DialogHideAfter")},_bind:function(){var i=this,t={pop:["WkDialogClose"],confirm:["WkDialogClose","WkDialogOk","WkDialogCancel"],alert:["WkDialogClose","WkDialogOk"]},o={pop:["onClosed"],confirm:["onClosed","onOk","onCancel"],alert:["onClosed","onOk"]};
e.array.each(t[i.option.type],function(t,n){e.event.on(t,"click",function(t){e.event.stop(t),i[o[i.option.type][n]]()&&i.hide()})}),e.event.on(window,"resize",function(){i.drawSize()})},_bindFire:function(){var i=function(){return!0};this.onClosed=this.option.onClosed||i,this.onOk=this.option.onOk||i,this.onCancel=this.option.onCancel||i,this.onRendered=this.option.onRendered||i},_render:function(){var i=this,t={pop:[],confirm:["btnOk","btnCancel"],alert:["btnOk"]},o="",n=i.option.btnSize||"middle";
if(i.el.className=i._initClassName+(i.option.className||""),e.array.each(t[i.option.type],function(e,a){o+=i._dataTpl.buttons[t[i.option.type][a]].replace(t[i.option.type][a],i.option.btnText[a]).replace("{btnSize}",i.btnSize[n])}),e.g("WkDialog").className=i.el.className,e.g("WkDialogTit").innerHTML=i.option.title,e.g("WkDialogBtn").innerHTML=o,e.g("WkDialogCon").className="bd ph20 dlg-"+i.option.style,"dom"==this.conType)e.g("WkDialogCon").innerHTML=i.option.content;else{var a='<iframe id="WkDialogIfrm" name="WkDialogIfrm" width="100%" height="100%" src="" frameborder="0" scrolling="no" style="           position:relative;"></iframe>';
e.g("WkDialogCon").innerHTML=a,e.g("WkDialogIfrm").src=i.option.url}this.onRendered()},drawSize:function(){var i=this.option,t=e.page.getViewHeight(),o=e.page.getHeight(),n=e.page.getScrollTop(),a=e.g("WkDialog");this.el.style.height=t>o?t:o+"px",a.style.width=(i.width||380)+"px",a.style.height=i.height?i.height+"px":"auto",e.g("WkDialogCon").style.height=i.height?i.height-("pop"==i.type?80:140)+"px":"auto";var s=i.height?i.height:a.offsetHeight,l=n+(t-s)/2;a.style.top=l+"px"},_dataTpl:{mask:['<div id="mask" class="ui-mask js-mask">','<iframe frameborder="0" class="iframe"></iframe>',"</div>"].join(""),mod:['<div id="WkDialog" class="mod ui-dialog">','<iframe class="iframe" width="100%" height="100%" frameborder="0"></iframe>','<div class="inner">','<div id="WkDialogHd" class="hd mv20 pb10 pt20">','<span class="act">','<a id="WkDialogClose" href="###" hidefocus="true" class="ir close">&Chi;</a>',"</span>",'<h3 id="WkDialogTit"></h3>',"</div>",'<div id="WkDialogCon" class="bd"></div>','<div id="WkDialogBtn" class="ft pv20 pb20"></div>',"</div>","</div>"].join(""),buttons:{btnOk:['<a id="WkDialogOk" href="###" class="bt ui-btn ui-btn-{btnSize}-green mv10">','<b class="btc">','<b class="btText">btnOk</b>',"</b>","</a>"].join(""),btnCancel:['<a id="WkDialogCancel" href="###" class="bt ui-btn ui-btn-{btnSize}-light mv10">','<b class="btc">','<b class="btText">btnCancel</b>',"</b>","</a>"].join("")}}},{type:"dialog"}),l=function(i){var t=null;
return function(){return t||(t=new s(i),t.fire("onload")),t}}();o.exports.dialogCreate=l});
;define("ydcommon:widget/ui/js_core/_dialog/mask.js",function(o,i,e){var n=(o("ydcommon:widget/lib/tangram/base/base.js"),o("ydcommon:widget/ui/js_core/util/util.js")),s=o("ydcommon:widget/ui/js_core/mask/mask.js").maskCreate,t=function(o){var i={bgColor:"#000",closeWithClick:!1,closeWithEsc:!1,autoShow:!1},e=s(n.mix(i,o.mask||{},!0));e.on("onHideBefore",function(){}),this.on("onHideAfter",function(){e.hide()}),this.on("onCloseAfter",function(){e.close()}),this.on("onShowBefore",function(){e.show()
}),this.on("onBodyResize",function(){e.fire("onContainerResize")})};e.exports.mask=t});
;define("ydcommon:widget/ui/js_core/_dialog/_dialog.js",function(t,e,i){var n=t("ydcommon:widget/lib/tangram/base/base.js"),o=t("ydcommon:widget/ui/js_core/widget/widget.js").widget,s=t("ydcommon:widget/ui/js_core/util/util.js"),r=t("ydcommon:widget/ui/js_core/layerControl/layerControl.js").layerControl,a=t("ydcommon:widget/ui/js_core/_dialog/mask.js").mask,d=o({Options:{el:""},_init:function(){s.mix(this,s.zIndexManager);var t=n.event,e=this;this.guid=n.lang.guid(),this._lastDom=null,this.on("onload",function(){var i=e.getElement(),n=function(){e.focus()
},o=function(t){e.closeWithEsc&&e.isShowing()&&27===t.keyCode&&e.hide()};t.on(i,"mousedown",n),t.on(document,"keydown",o),e.on("ondispose",function(){t.un(i,"mousedown",n),t.un(document,"keydown",o)}),e.on("onShowAfter",function(){e._hasShown=!0,e._showing=!0,e.setSize({width:e.width,height:e.height}),""===e.top||""===e.left?e.center():e.setPosition({top:e.top,left:e.left})}),e.setTitle(e.title),e.setContent(e.content,e.contentType),e.setButtons(e.buttons),e.draggable&&e.setDraggable(!0)}),this._createDialog()
},stop:function(t){t.returnValue=!1},getElement:function(t){return n.g(this._getElementId(t||"container"))},_getElementId:function(t){return[this.type,this.guid,t].join("-")},isShowing:function(){return this._showing},_hide:function(){this.getElement().style.display="none",this._showing=!1},hide:function(){this.fire("onHideBefore")&&(this._hide(),this.fire("onHideAfter"))},setDraggable:function(t){if(t){var e=this,i=n.page,o=n.dom.addClass,s=n.dom.removeClass,r=e.getElement("head"),a={range:[0,i.getWidth(),i.getHeight(),0],handler:r,onbeforedragstart:function(t){o(t,"on-drag-move")
},ondragend:function(t){s(t,"on-drag-move")}};e.onDrag&&(a.ondrag=e.onDrag),o(r,"move-handler"),n.dom.draggable&&n.dom.draggable(this.getElement(),a)}this.draggable=t},setSize:function(t){var e,i=(n.dom.getComputedStyle,+t.width),o=+t.height,s=this.getElement(),r=this.getElement("content"),a=s.style;"number"==typeof i&&(a.width=(this.width=i)+"px"),"number"==typeof o&&(a.height=(this.height=o)+"px"),e=o-this.getElement("buttons").offsetHeight-this.getElement("head").offsetHeight-7,r.style.height=e>=0?e+"px":"auto",this.fire("onresize")
},getSize:function(){return{width:this.width,height:this.height}},setContent:function(t,e,i){var o,s,r,a=n.dom,d=this.getElement("content");if("undefined"!=typeof i&&(this.hasContent=i),this._showPart(d,this.hasContent),!d)return this;if(o=this._lastDom){if(r=o.parent,o.content===t)return this;o.target?r.insertBefore(o.content,o.target):r.appendChild(o.content)}switch(e){case"text":d.innerHTML=baidu.string.encodeHTML(t),a.removeClass(d,"contentFrame");break;case"element":(r=(t=a.g(t)).parentNode)&&(r.insertBefore(s=document.createTextNode(""),t),this._lastDom={content:t,parent:t.parentNode,target:s}),d.innerHTML="",d.appendChild(t),a.removeClass(d,"contentFrame");
break;case"iframe":this._hasShown||(d.innerHTML='<iframe frameborder="no" src="'+t+'" width="100%" name="'+this.iframeName+'"></iframe>',a.hasClass(d,"contentFrame")||a.addClass(d,"contentFrame"));break;default:d.innerHTML=t,a.removeClass(d,"contentFrame")}return this},setTitle:function(t,e){var i=this.getElement("title");return this.title=t,"undefined"!=typeof e&&(this.hasTitle=e),i&&(this._showPart(i,this.hasTitle),i.innerHTML=t||"&nbsp;"),this},setPosition:function(t){var e=+t.left,i=+t.top,n=this.getElement(),o=n.style;
return this.fire("onSetPositionBefore"),"number"==typeof e&&(o.left=(this.left=e)+"px"),"number"==typeof i&&(o.top=(this.top=i)+"px"),this.fire("onSetPositionAfter"),this},getPosition:function(){return{left:this.left,top:this.top}},center:function(){var t=n.page,e=t.getScrollTop(),i=t.getScrollLeft(),o=t.getViewWidth(),s=t.getViewHeight(),r=((o-this.width)/2|0)+i,a=((s-this.height)/2|0)+e;return e>a&&(a=e),i>r&&(r=i),this.setPosition({left:r,top:a}),this},setButtons:function(t,e){var i=this.getElement("buttons");
return this.buttons=t,"undefined"!=typeof e&&(this.hasButtons=e),i&&(this._showPart(i,this.hasButtons),i.innerHTML=t),this},setOperate:function(t,e){var i=this.getElement("Operate");return"undefined"!=typeof e&&(this.hasHead=e),this.operate=t,i&&(this._showPart(i,this.hasHead),i.innerHTML=i),this},_showPart:function(t,e){t.style.display=e===!1?"none":"block"},focus:function(){this.fire("onfocus")},close:function(){return this.fire("onCloseBefore")?(this.hide(),this.remove(),void this.fire("onCloseAfter")):!1
},_createDialog:function(){var t=this.template,e={dialogContainerId:this._getElementId("container"),dialogHeadId:this._getElementId("head"),dialogOperateId:this._getElementId("operate"),dialogTitleId:this._getElementId("title"),dialogContentId:this._getElementId("content"),dialogButtonsId:this._getElementId("buttons"),dialogInnerId:this.innerId||this._getElementId("inner")},i=s.createDom(n.string.format(t,e));return document.body.appendChild(i),this}},{type:"dialog",superClass:r}),l=o({Options:{el:"",innerId:"",width:400,height:300,left:"",top:"",autoshow:!0,operate:"",hasOperate:!0,title:"",hasTitle:!0,content:"",contentType:"html",hasContent:"",buttons:"",hasButtons:!0,closeSelector:".dialog-close",minimizeSelector:".minimize",confirmSelector:".confirm",closeWithEsc:!0,draggable:!0,onDrag:null,onConfirm:n.fn.blank,onBeforeClose:n.fn.blank,mask:{bgColor:"#000"}},template:['<div id="#{dialogContainerId}" class="mod ui-custiom-dialog-container">','<div id="#{dialogInnerId}" class="inner dialog-inner">','<div id="#{dialogHeadId}" class="hd dialog-head"></div>','<div id="#{dialogContentId}" class="bd dialog-content"></div>','<div id="#{dialogButtonsId}" class="ft pv20 dialog-footer"></div>',"</div>","</div>"].join(""),_init:function(t){var e=this;
n.object.extend(this,s.mix(n.object.clone(this.Options),t||{},!0)),this._action(),this.el=this.getElement(),this.iframeName=this.iframeName||"iframe-"+this.guid,this.fire("onload"),this._hide(),this.autoshow&&setTimeout(function(){e.show()},10)},_action:function(){var t=n.event.stop,e=this,i=this.getElement();s.delegate(i,this.closeSelector,"click",function(i){e.close(),t(i)}),s.delegate(i,this.minimizeSelector,"click",function(i){e.minimize(),t(i)}),s.delegate(i,this.confirmSelector,"click",function(i){return e.fire("onConfirmBefore")?(e.close(),void t(i)):!1
})},minimize:function(){this.hide()},render:function(){return this.fire("onRenderBefore"),this.fire("onRenderAfter"),this}},{type:"dialog",superClass:d,include:[a]}),h=o({Options:{el:"",innerId:"",width:400,height:300,left:"",top:"",autoshow:!0,operate:"",hasOperate:!0,title:"",hasTitle:!0,content:"",contentType:"html",hasContent:"",buttons:"",hasButtons:!0,closeSelector:".dialog-close",minimizeSelector:".minimize",confirmSelector:".confirm",closeWithEsc:!0,draggable:!0,onDrag:null,onConfirm:n.fn.blank,onBeforeClose:n.fn.blank,mask:{bgColor:"#000"}},template:['<div id="#{dialogContainerId}" class="mod ui-dialog-container">','<div id="#{dialogInnerId}" class="inner dialog-inner">','<div id="#{dialogHeadId}" class="hd dialog-head">','<span class="act" id="#{dialogOperateId}">','<a href="###" hidefocus="true" class="ir close dialog-close">&times;</a>',"</span>",'<h3 id="#{dialogTitleId}" class="dialog-title"></h3>',"</div>",'<div id="#{dialogContentId}" class="bd dialog-content"></div>','<div id="#{dialogButtonsId}" class="ft pv20 dialog-footer"></div>',"</div>","</div>"].join(""),_init:function(t){var e=this;
n.object.extend(this,s.mix(n.object.clone(this.Options),t||{},!0)),this._action(),this.el=this.getElement(),this.iframeName=this.iframeName||"iframe-"+this.guid,this.fire("onload"),this._hide(),this.autoshow&&setTimeout(function(){e.show()},10)},_action:function(){var t=n.event.stop,e=this,i=this.getElement();s.delegate(i,this.closeSelector,"click",function(i){e.close(),t(i)}),s.delegate(i,this.minimizeSelector,"click",function(i){e.minimize(),t(i)}),s.delegate(i,this.confirmSelector,"click",function(i){return e.fire("onConfirmBefore")?(e.close(),void t(i)):!1
})},minimize:function(){this.hide()},render:function(){return this.fire("onRenderBefore"),this.fire("onRenderAfter"),this}},{type:"dialog",superClass:d,include:[a]}),c=function(t){var e=new h(t);return e},g={};g.confirm=function(t){t=t||{};var e=t.btnText||["\u786e\u8ba4","\u53d6\u6d88"],i=['<div class="dialog-btns-confirm">','<a href="###" class="bt ui-btn ui-btn-26-green mv10 confirm">','<b class="btc"><b class="btText">#{0}</b></b>',"</a>",'<a href="###" class="bt ui-btn ui-btn-26-light mv10 dialog-close">','<b class="btc"><b class="btText">#{1}</b></b>',"</a>","</div>"].join(""),o={buttons:n.string.format(i,e)},r=c(s.mix(o,t));
return r},g.tip=function(t){t=t||{};var e={width:300,height:200,hasButtons:!1,onShowAfter:function(){var e=this;"undefined"==typeof t.showTime&&(t.showTime=3e3),0!=t.showTime&&setTimeout(function(){e.hide()},t.showTime)}},i=c(s.mix(e,t));return i},g.alert=function(t){t=t||{};var e=['<div class="dialog-btns-alert">','<a href="###" class="bt ui-btn ui-btn-26-green mv10 confirm">','<b class="btc"><b class="btText">#{text}</b></b>',"</a>","</div>"].join(""),i={text:t.btnText||"\u786e\u8ba4"},o={buttons:n.string.format(e,i)},r=c(s.mix(o,t));
return r};i.exports.dialog=h,i.exports.dialogCreate=c,i.exports.confirm=g.confirm,i.exports.alert=g.alert,i.exports.tip=g.tip,i.exports.customDialog=l});
;define("ydcommon:widget/ui/js_core/tabs/tabs.js",function(e,t,n){var o=e("ydcommon:widget/lib/tangram/base/base.js"),a=e("ydcommon:widget/ui/js_core/widget/widget.js").widget,i=a({Options:{el:"",bindEvent:"mouseover",onClassName:"current",unClassName:"disabled",controlClassName:"tabControl",controlChildTag:"li",contentClassName:"tabContent",contentChildTag:"li",delay:0,selectIndex:0},_init:function(){var e=this;e.actime=null,e.on("onload",function(){o.lang.isString(e.el)&&(e.el=o.g(el)),e.hdElement=o.dom.query("."+e.controlClassName+">"+e.controlChildTag,e.el),e.bdElement=o.dom.query("."+e.contentClassName+">"+e.contentChildTag,e.el),e._action().gotoIndex(e.selectIndex)
})},_change:function(e){var t=this;return t.fire("onBeforeAction"),o.array.each(this.bdElement,function(n,o){var a=t.hdElement[o];e===o?(t.fire("onBeforeCurrent",{hdElement:a,bdElement:n}),t._current(n,a),t.fire("onAfterCurrent",{hdElement:a,bdElement:n})):(t.fire("onBeforeDisabled",{hdElement:a,bdElement:n}),t._disable(n,a),t.fire("onAfterDisabled",{hdElement:a,bdElement:n}))}),t.fire("onAfterAction"),this},_action:function(){var e=this;return o.array.each(this.hdElement,function(t,n){o.event.on(t,e.bindEvent,function(t){clearTimeout(e.actime),e.delay>0?e.actime=setTimeout(o.fn.bind(e._change,e,n),e.delay):e._change(n),o.event.stop(t)
}),o.event.on(t,"mouseout",function(){clearTimeout(e.actime)})}),this},_current:function(e,t){return o.dom.removeClass(e,"disabled current"),o.dom.addClass(e,"current"),o.dom.removeClass(t,"disabled current"),o.dom.addClass(t,"current"),this},_disable:function(e,t){return o.dom.removeClass(e,"disabled current"),o.dom.addClass(e,"disabled"),o.dom.removeClass(t,"disabled current"),o.dom.addClass(t,"disabled"),this},gotoIndex:function(e){return this.hdElement[e]&&this._change(e),this}},{type:"tabs"}),r=function(e){var t=new i(e);
return t.fire("onload"),t};n.exports.tabs=i,n.exports.tabsCreate=r});
;define("ydcommon:widget/ui/js_core/countdown/countdown.js",function(t){var e=t("ydcommon:widget/ui/lib/jquery/jquery.js");!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(e)}(function(t){"use strict";function e(t){if(t instanceof Date)return t;if(String(t).match(a))return String(t).match(/^[0-9]*$/)&&(t=Number(t)),String(t).match(/\-/)&&(t=String(t).replace(/\-/g,"/")),new Date(t);throw new Error("Couldn't cast `"+t+"` to a date object.")}function s(t){return function(e){var s=e.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);
if(s)for(var i=0,o=s.length;o>i;++i){var a=s[i].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),h=new RegExp(a[0]),l=a[1]||"",c=a[3]||"",u=null;a=a[2],r.hasOwnProperty(a)&&(u=r[a],u=Number(t[u])),null!==u&&("!"===l&&(u=n(c,u)),""===l&&10>u&&(u="0"+u.toString()),e=e.replace(h,u.toString()))}return e=e.replace(/%%/,"%")}}function n(t,e){var s="s",n="";return t&&(t=t.replace(/(:|;|\s)/gi,"").split(/\,/),1===t.length?s=t[0]:(n=t[0],s=t[1])),1===Math.abs(e)?n:s}var i=100,o=[],a=[];a.push(/^[0-9]*$/.source),a.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a=new RegExp(a.join("|"));
var r={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},h=function(e,s,n){this.el=e,this.$el=t(e),this.interval=null,this.offset={},this.instanceNumber=o.length,o.push(this),this.$el.data("countdown-instance",this.instanceNumber),n&&(this.$el.on("update.countdown",n),this.$el.on("stoped.countdown",n),this.$el.on("finish.countdown",n)),this.setFinalDate(s),this.start()};t.extend(h.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);
var t=this;this.update(),this.interval=setInterval(function(){t.update.call(t)},i)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},pause:function(){this.stop.call(this)},resume:function(){this.start.call(this)},remove:function(){this.stop(),o[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(t){this.finalDate=e(t)},update:function(){return 0===this.$el.closest("html").length?void this.remove():(this.totalSecsLeft=this.finalDate.getTime()-(new Date).getTime(),this.totalSecsLeft=Math.ceil(this.totalSecsLeft/1e3),this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30),years:Math.floor(this.totalSecsLeft/60/60/24/365)},void(0===this.totalSecsLeft?(this.stop(),this.dispatchEvent("finish")):this.dispatchEvent("update")))
},dispatchEvent:function(e){var n=t.Event(e+".countdown");n.finalDate=this.finalDate,n.offset=t.extend({},this.offset),n.strftime=s(this.offset),this.$el.trigger(n)}}),t.fn.countdown=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){var s=t(this).data("countdown-instance");if(void 0!==s){var n=o[s],i=e[0];h.prototype.hasOwnProperty(i)?n[i].apply(n,e.slice(1)):null===String(i).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(n.setFinalDate.call(n,i),n.start()):t.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,i))
}else new h(this,e[0],e[1])})}})});
;define("ydcommon:widget/ui/js_core/qrcode/qrcode.js",function(t,e,r){var o;!function(){function t(t){this.mode=h.MODE_8BIT_BYTE,this.data=t}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function n(t,e){this.totalCount=t,this.dataCount=e
}function i(){this.buffer=[],this.length=0}function a(){return"undefined"!=typeof CanvasRenderingContext2D}function s(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function u(t,e){for(var r=1,o=0,n=m.length;n>=o;o++){var i=0;switch(e){case l.L:i=m[o][0];break;case l.M:i=m[o][1];break;case l.Q:i=m[o][2];break;case l.H:i=m[o][3]}if(t.length<=i)break;r++}if(r>m.length)throw new Error("Too long data");
return r}t.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);
for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)
},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=f.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var u=s*n,h=this.modules[i][s];
h&&(o.beginFill(0,100),o.moveTo(u,a),o.lineTo(u+n,a),o.lineTo(u+n,a+n),o.lineTo(u,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=f.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1
}},setupTypeNumber:function(t){for(var e=f.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=f.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);
8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var u=!1;i<t.length&&(u=1==(t[i]>>>n&1));var h=f.getMask(e,o,a-s);h&&(u=!u),this.modules[o][a-s]=u,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,o){for(var a=n.getRSBlocks(t,r),s=new i,u=0;u<o.length;u++){var h=o[u];
s.put(h.mode,4),s.put(h.getLength(),f.getLengthInBits(h.mode,t)),h.write(s)}for(var l=0,u=0;u<a.length;u++)l+=a[u].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*l)break;if(s.put(e.PAD0,8),s.getLengthInBits()>=8*l)break;s.put(e.PAD1,8)}return e.createBytes(s,a)},e.createBytes=function(t,e){for(var o=0,n=0,i=0,a=new Array(e.length),s=new Array(e.length),u=0;u<e.length;u++){var h=e[u].dataCount,l=e[u].totalCount-h;
n=Math.max(n,h),i=Math.max(i,l),a[u]=new Array(h);for(var g=0;g<a[u].length;g++)a[u][g]=255&t.buffer[g+o];o+=h;var c=f.getErrorCorrectPolynomial(l),d=new r(a[u],c.getLength()-1),m=d.mod(c);s[u]=new Array(c.getLength()-1);for(var g=0;g<s[u].length;g++){var p=g+m.getLength()-s[u].length;s[u][g]=p>=0?m.get(p):0}}for(var v=0,g=0;g<e.length;g++)v+=e[g].totalCount;for(var A=new Array(v),E=0,g=0;n>g;g++)for(var u=0;u<e.length;u++)g<a[u].length&&(A[E++]=a[u][g]);for(var g=0;i>g;g++)for(var u=0;u<e.length;u++)g<s[u].length&&(A[E++]=s[u][g]);
return A};for(var h={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},g={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;f.getBCHDigit(e)-f.getBCHDigit(f.G15)>=0;)e^=f.G15<<f.getBCHDigit(e)-f.getBCHDigit(f.G15);
return(t<<10|e)^f.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;f.getBCHDigit(e)-f.getBCHDigit(f.G18)>=0;)e^=f.G18<<f.getBCHDigit(e)-f.getBCHDigit(f.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return f.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case g.PATTERN000:return(e+r)%2==0;case g.PATTERN001:return e%2==0;case g.PATTERN010:return r%3==0;case g.PATTERN011:return(e+r)%3==0;case g.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;
case g.PATTERN101:return e*r%2+e*r%3==0;case g.PATTERN110:return(e*r%2+e*r%3)%2==0;case g.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),o=0;t>o;o++)e=e.multiply(new r([1,c.gexp(o)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case h.MODE_NUMBER:return 10;case h.MODE_ALPHA_NUM:return 9;case h.MODE_8BIT_BYTE:return 8;case h.MODE_KANJI:return 8;default:throw new Error("mode:"+t)
}else if(27>e)switch(t){case h.MODE_NUMBER:return 12;case h.MODE_ALPHA_NUM:return 11;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case h.MODE_NUMBER:return 14;case h.MODE_ALPHA_NUM:return 13;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var u=-1;1>=u;u++)0>n+u||n+u>=e||(0!=s||0!=u)&&a==t.isDark(o+s,n+u)&&i++;
i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var h=0;t.isDark(o,n)&&h++,t.isDark(o+1,n)&&h++,t.isDark(o,n+1)&&h++,t.isDark(o+1,n+1)&&h++,(0==h||4==h)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);
for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},c={glog:function(t){if(1>t)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;8>d;d++)c.EXP_TABLE[d]=1<<d;for(var d=8;256>d;d++)c.EXP_TABLE[d]=c.EXP_TABLE[d-4]^c.EXP_TABLE[d-5]^c.EXP_TABLE[d-6]^c.EXP_TABLE[d-8];for(var d=0;255>d;d++)c.LOG_TABLE[c.EXP_TABLE[d]]=d;
r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<t.getLength();n++)e[o+n]^=c.gexp(c.glog(this.get(o))+c.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<t.getLength();n++)o[n]^=c.gexp(c.glog(t.get(n))+e);
return new r(o,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var r=n.getRsBlockTable(t,e);
if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],a=0;o>a;a++)for(var s=r[3*a+0],u=r[3*a+1],h=r[3*a+2],l=0;s>l;l++)i.push(new n(u,h));return i},n.getRsBlockTable=function(t,e){switch(e){case l.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case l.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case l.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case l.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)
},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],p=a()?function(){function t(){n.src=o.toDataURL("image/png"),n.style.display="block",o.style.display="none"
}function e(t,e){if(i=e,a=t,null===h){var r=document.createElement("img"),o=function(){h=!1,i&&i()},n=function(){h=!0,a&&a()};return r.onabort=o,r.onerror=o,r.onload=n,void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}h===!0&&a?a():h===!1&&i&&i()}var r=null,o=null,n=null,i=null,a=null,u=null,h=null,l=null,g=!1,f=s();if(f&&2.1>=f){var c=1/window.devicePixelRatio,d=CanvasRenderingContext2D.prototype.drawImage;
CanvasRenderingContext2D.prototype.drawImage=function(t,e,r,o,n,i,a,s){if("nodeName"in t&&/img/i.test(t.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*c;else"undefined"==typeof s&&(arguments[1]*=c,arguments[2]*=c,arguments[3]*=c,arguments[4]*=c);d.apply(this,arguments)}}var m=function(t,e){u=e,o=document.createElement("canvas"),o.width=e.width,o.height=e.height,t.appendChild(o),r=t,l=o.getContext("2d"),g=!1,n=document.createElement("img"),n.style.display="none",r.appendChild(n),h=null
};return m.prototype.draw=function(t){n.style.display="none";var e=t.getModuleCount(),r=u.width/e,o=u.height/e,i=Math.round(r),a=Math.round(o);this.clear();for(var s=0;e>s;s++)for(var h=0;e>h;h++){var f=t.isDark(s,h),c=h*r,d=s*o;l.strokeStyle=f?u.colorDark:u.colorLight,l.lineWidth=1,l.fillStyle=f?u.colorDark:u.colorLight,l.fillRect(c,d,r,o),l.strokeRect(Math.floor(c)+.5,Math.floor(d)+.5,i,a),l.strokeRect(Math.ceil(c)-.5,Math.ceil(d)-.5,i,a)}g=!0},m.prototype.makeImage=function(){g&&e(t)},m.prototype.isPainted=function(){return g
},m.prototype.clear=function(){l.clearRect(0,0,o.width,o.height),g=!1},m.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},m}():function(){var t=null,e=null,r=function(r,o){t=r,e=o};return r.prototype.draw=function(r){for(var o=r.getModuleCount(),n=Math.floor(e.width/o),i=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var u=0;o>u;u++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(r.isDark(s,u)?e.colorDark:e.colorLight)+';"></td>');
a.push("</tr>")}a.push("</table>"),t.innerHTML=a.join("");var h=t.childNodes[0],l=(e.width-h.offsetWidth)/2,g=(e.height-h.offsetHeight)/2;l>0&&g>0&&(h.style.margin=g+"px "+l+"px")},r.prototype.clear=function(){t.innerHTML=""},r}();o=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=s(),this._el=t,this._oQRCode=null,this._oDrawing=new p(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)
},o.prototype.makeCode=function(t){this._oQRCode=new e(u(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode),this.makeImage()},o.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},o.prototype.clear=function(){this._oDrawing.clear()},o.CorrectLevel=l}(),r.exports=o});
;define("ydcommon:widget/ui/js_core/preload/preload.js",function(e,o,n){var a=e("ydcommon:widget/lib/tangram/base/base.js"),t=void 0!==document.documentElement.style.MozAppearance,d=function(e,o){var n=document.body;a.lang.isString(e)&&(e=[e]),a.array.each(e,function(e){var d;t?(d=document.createElement("object"),d.style.position="absolute",d.data=e):d=new Image,d.width=d.height=0,d.onerror=d.onload=function(){o(e),t&&a.dom.remove(d),d.onerror=d.onload=d=null},t?a.dom.ready(function(){n.appendChild(d)
}):d.src=e})};n.exports.preload=d});
;define("ydcommon:widget/ui/js_core/mvp/event/event.js",function(t,e,n){var i=t("ydcommon:widget/lib/tangram/base/base.js"),s=t("ydcommon:widget/ui/js_core/util/util.js"),r={},h=Array.prototype.slice,o=function(){this.pending=[],this.afterStack=[],this.beforeStack=[],this.status=0,this._lock=!1,this.eventCache=null};s.mix(o.prototype,{_empty:function(){},then:function(t,e){return t=t||this._empty,e=e||this._empty,this.pending.push({resolve:t,reject:e}),1===this.status&&this.resolve(this.eventCache),2===this.status&&this.reject(),this
},_iterator:function(t,e){for(var n=0,s=t.length;s>n;n++)i.lang.isFunction(t[n])&&t[n](e)},_fire:function(t,e){var n;if(this.eventCache=e,!this._lock){if(this.pending[0]){try{this.status=1,this._iterator(this.beforeStack,e),n=i.lang.isFunction(this.pending[0][t])&&this.pending[0][t](e),this._iterator(this.afterStack,e)}catch(s){this.status=2,t="reject",e=s,i.lang.isFunction(this.pending[0][t])&&this.pending[0][t](e)}this.pending.shift()}return this.isDeferred(n)?this._pipe(n,this):this.pending[0]&&this._fire(t,e),this
}},_pipe:function(t,e){return t&&t.then&&t.then(function(){e.resolve(h.call(arguments))},function(){e.reject(h.call(arguments))}),t},resolve:function(t){this.status=1,this._fire("resolve",t)},reject:function(t){this.status=2,this._fire("reject",t)},_getToken:function(){return r},isDeferred:function(t){return i.lang.isObject(t)&&i.lang.isFunction(t._getToken)&&t._getToken()===r},wait:function(t){return this.then(function(){var e=new o,n=new Date;return setTimeout(function(){e.resolve((new Date).getTime()-n.getTime())
},1e3*t),e})},start:function(){this.resolve.apply(this,arguments)},parallel:function(t){function e(t){return function(e){s||(u[t]=e),++a===r._count&&(s=!0,r._count=0,r.resolve.call(r,u))}}t=i.lang.isArray(t)?t:h.call(arguments);var n,s,r=new o,u=[],c=0,a=0,l=t.length,f=this;for(r._count=r._count||t.length;l>c;c++)n=t[c],i.lang.isFunction(n)&&!f.isDeferred(n)&&(n=n()),f.isDeferred(n)?n.then(e(c),e(c)):e(c)(n);return r},lock:function(){return this._lock=!0,this},unlock:function(){return this._lock=!1,this.resolve.apply(this,arguments),this
},error:function(t){return this.then(!1,t)},any:function(){return this._count=1,this},some:function(t){return this._count=t,this},when:function(){return this.parallel.apply(this,h.call(arguments))},clear:function(){return this.pending.length=0,this},after:function(){return this.afterStack=this.afterStack.concat(h.call(arguments)),this},before:function(){return this.beforeStack=this.beforeStack.concat(h.call(arguments)),this}});var u=function(){this.listeners={},o.apply(this,h.call(arguments))};i.lang.inherits(u,o),s.mix(u.prototype,{on:function(t,e,n){return t&&e?(this.listeners[t]||(this.listeners[t]=[]),this._isUnique(t,e,n)&&this.listeners[t].push([e,n]),this):!1
},_findEvent:function(t,e,n){for(var i=this.listeners[t],s=0,r=i.length;r>s;s++)if(i[s][0]===e&&i[s][1]===n)return i[s];return null},_isUnique:function(t,e,n){return null===this._findEvent(t,e,n)?!0:!1},off:function(t,e,n){var i=this.listeners[t],s=0,r=i.length;if(!e)return void(i.length=0);for(;r>s;s++)i[s][0]===e&&i[s][1]===n&&i.splice(s,1);return this},fire:function(t,e){var n,i=this.listeners[t]?this.listeners[t].length:0,s=0,r=new o;for(e=e||{},e.promise=r;i>s;s++)this._iterator(this.beforeStack,e),n=this.listeners[t][s][0].call(this.listeners[t][s][1]||this,e),this._iterator(this.afterStack,e);
return n},when:function(t){var e,n,s=0,r=[];for(t=h.call(arguments),e=t.length;e>s;s++)n=i.lang.isArray(t[s])?t[s]:[t[s]],r.push(this.fire.apply(this,n));return this.parallel(r)},once:function(t,e,n){function i(){e.apply(n,h.call(arguments)),s.off(t,i,n)}var s=this;return this.on(t,i,n),this}},!0),n.exports.deferred=o,n.exports.custEvent=u});
;define("ydcommon:widget/ui/js_core/mvp/model/model.js",function(t,i,e){var n=t("ydcommon:widget/lib/tangram/base/base.js"),s=t("ydcommon:widget/ui/js_core/util/util.js"),r=Array.prototype.slice,o=n.lang.createClass(function(t,i){this.attributes=n.object.clone(t),this.changes={},this.uid=s.uniqueId("model__"),this.modelList=i}).extend({attr:function(t,i){var e=n.object.clone(this.attributes);if(0===arguments.length)return n.object.extend(e,this.changes),e;if(2===arguments.length)return this.attributes[t]===i?delete this.changes[t]:this.changes[t]=i,this;
if("object"==typeof t){for(var s in t)this.attr(s,t[s]);return this}return t in this.changes?this.changes[t]:e[t]},attrs:function(t){var i=this;n.lang.isObject(t)&&n.object.each(t,function(t,e){i.attr(e,t)})},callPersistMethod:function(t,i){var e=this,n=function(){"create"===t?e.modelList.add(e):"destroy"===t&&e.modelList.remove(e)},s=function(s){s&&(e.merge(e.changes).reset(),n(),e.dispatchEvent(t));var r;return i&&(r=i.apply(e,arguments)),r};this.modelList._persistence?this.modelList._persistence[t](this,s):s.call(this,!0)
},destroy:function(t){return this.callPersistMethod("destroy",t),this},id:function(){return this.attributes[this.modelList.unique_key]},merge:function(t){return s.mix(this.attributes,t),this},newRecord:function(){return void 0===this.id()},reset:function(){return this.errors.clear(),this.changes={},this},save:function(t){if(this.valid()){var i=this.newRecord()?"create":"update";this.callPersistMethod(i,t)}else t&&t(!1);return this},valid:function(){return this.errors.clear(),this.validate(),0===this.errors.size()
},validate:function(){return this}}),c=n.lang.createClass(function(t){t=t||{},this.options=t,s.mix(this,this.options,!0),this.collection=[],this.uid=s.uniqueId("modelList__"),this.model=this.model||o,this._wrap()}).extend({unique_key:"id",_wrap:function(){var t=this,i=["each","every","filter","find","hash","indexOf","lastIndexOf","map","reduce","some","contains"];n.array.each(i,function(i){t[i]=function(){var e=r.call(arguments,0);return e.unshift(t.collection),n.array[i].apply(t,e)}}),this.select=this.find
},chain:function(t){return n.object.extend({},{collection:t})},add:function(){for(var t=[],i=0;i<arguments.length;i++){var e=arguments[i];n.lang.isFunction(this.wrapModel)&&(e=this.wrapModel(e,i)),e=new this.model(e,this);var s=e.id();-1!==n.array.indexOf(e,this.collection)||s&&this.findId(s)||(this.collection.push(e),t.push(e))}return t.length>0&&this.fire("add",{data:t}),this},all:function(){return this.collection.slice()},count:function(){return this.all().length},findId:function(t){return this.find(function(i){return i.id()===t
})},findIndexOf:function(t){var i,e,n=this.collection,s=n.length;if("function"==typeof t)for(e=0;s>e;e++)if(i=n[e],!0===t.call(n,i,e))return e;return-1},first:function(){return this.all()[0]},load:function(t){if(this._persistence){var i=this;this._persistence.read.call(this,function(e){t&&t.call(i,e)})}return this},last:function(){var t=this.all();return t[t.length-1]},pluck:function(t){for(var i=this.all(),e=[],n=0,s=i.length;s>n;n++)e.push(i[n].attr(t));return e},persistence:function(t){if(0==arguments.length)return this._persistence;
var i=r.call(arguments,1);return i.unshift(this),this._persistence=t.apply(t,i),this},remove:function(t){for(var i,e=0,n=this.collection.length;n>e;e++)if(this.collection[e]===t){i=e;break}return void 0!==i?(this.collection.splice(i,1),this.dispatchEvent("remove",{data:[t]}),!0):!1},sort:function(t){var i=this.all().sort(t);return i},sortBy:function(t){var i=n.lang.isFunction(t),e=function(i){return t.call(i)};return this.sort(function(n,s){var r=i?e(n):n.attr(t),o=i?e(s):s.attr(t);return o>r?-1:r>o?1:0
})},count:function(){return this.collection.length},lastFind:function(t){var i,e=this.count(),s=this;if(n.lang.isFunction(t))for(;e--;)if(i=this.collection[e],!0===t.call(s,i,e))return i;return null},dispose:function(){this.fire("dispose"),n.lang.Class.prototype.dispose.call(this)}});e.exports.Model=o,e.exports.ModelList=c});
;define("ydcommon:widget/ui/js_core/mvp/presenter/presenter.js",function(e,i,t){var n=e("ydcommon:widget/lib/tangram/base/base.js"),s=e("ydcommon:widget/ui/js_core/util/util.js"),r=Array.prototype.slice,a=n.lang.createClass(function(e){e=e||{},this.options=e,n.object.extend(this,e),this.cid=s.uniqueId("presenter__")}).extend({plugin:[],_init:function(){},_plugin:function(){var e=this,i=this.plugin;!n.lang.isArray(i)&&(i=[i]),n.array.each(i,function(i){n.lang.isObject(i)&&n.array.each(i,function(i,t){s.punch(e,"init",i,t)
})})},mediator:null,after:function(){var e=this.mediator;e&&e.after.apply(e,r.call(arguments))},before:function(){var e=this.mediator;e&&e.before.apply(e,r.call(arguments))},dispose:function(){this.mediator&&this.mediator.fire("p:dispose"),this.fire("dispose"),n.lang.Class.prototype.dispose.call(this)}});t.exports.Presenter=a});
;define("ydcommon:widget/ui/js_core/mvp/route/route.js",function(t,n,e){var a=t("ydcommon:widget/lib/tangram/base/base.js"),o=function(){function t(t){var n=r.contentWindow.document;t=t||"#",n.open(),n.write('<script>window.top.location.hash="'+t+'";</script>'),n.close(),n.location.hash=t}function n(){c&&c(),i=window.location.hash.replace(/^#/,"")||""}function e(){var e=location.hash.replace(/^#/,"");e!=i&&(r?t(e):n())}function o(o){i="",o&&(c=o),a.browser.ie?(r=document.createElement("iframe"),r.style.display="none",document.body.appendChild(r),t(window.location.hash),r.attachEvent("onload",function(){n()
}),setInterval(e,100)):a.browser.firefox<3.6?setInterval(e,100):(i!=location.hash.replace(/^#/,"")&&(i=window.location.hash.replace(/^#/,"")||""),window.onhashchange=n)}var i,r,c;return o}(),i=[],r=/:([\w\d]+)/g,c=/\*([\w\d]+)/g,h=/[-[\]{}()+?.,\\^$|#\s]/g,s=/^#*/,l={add:function(t,n){var e=this;a.lang.isObject(t)?a.object.each(t,function(t,n){_slef.add(n,t)}):i.push(e._warp(t,n))},_warp:function(t,n){var e;return"string"==typeof t?(t=t.replace(h,"\\$&").replace(r,"([^/]*)").replace(c,"(.*?)"),e=new RegExp("^"+t+"$")):e=t,{route:e,callback:n}
},getPath:function(){return window.location.pathname},getHash:function(){return window.location.hash},getHost:function(){return(document.location+"").replace(this.getPath()+this.getHash(),"")},getFragment:function(){return this.getHash().replace(s,"")},navigate:function(){var t=a.lang.toArray(arguments),n=!0;"boolean"==typeof t[t.length-1]&&(n=t.pop());var e=t.join("/");this.path!==e&&(n||(this.path=e),window.location.hash=e)},change:function(){var t=this.getFragment();if(t!==this.path){this.path=t;
for(var n=0;n<i.length;n++)if(this._match(i[n],t))return}},_match:function(t,n){var e=t.route.exec(n);if(!e)return!1;var a=e.slice(1);return t.callback(a),!0},create:function(){var t=this;a.dom.ready(function(){t.change(),o(a.fn.bind(t.change,t))})}};e.exports.Route=l});
;define("ydcommon:widget/ui/js_core/mvp/template/template.js",function(e,n,t){var r=e("ydcommon:widget/lib/tangram/base/base.js"),o={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},a=/(.)^/,c={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},u=/\\|'|\r|\n|\t|\u2028|\u2029/g,i=function(e,n,t){var i;t=r.object.extend(r.object.clone(t||{}),o);var _=new RegExp([(t.escape||a).source,(t.interpolate||a).source,(t.evaluate||a).source].join("|")+"|$","g"),l=0,s="__p+='";
e.replace(_,function(n,t,r,o,a){return s+=e.slice(l,a).replace(u,function(e){return"\\"+c[e]}),t&&(s+="'+\n((__t=("+t+"))==null?'': encodeHTML(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),l=a+n.length,n}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(t.variable||"obj","encodeHTML",s)}catch(p){throw p.source=s,p}if(n)return i(n,r.string.encodeHTML);
var g=function(e){return i.call(this,e,r.string.encodeHTML)};return g.source="function("+(t.variable||"obj")+"){\n"+s+"}",g};t.exports.template=i});
;define("ydcommon:widget/ui/js_core/mvp/view/view.js",function(e,t,n){var i=e("ydcommon:widget/lib/tangram/base/base.js"),s=e("ydcommon:widget/ui/js_core/util/util.js"),r=e("ydcommon:widget/ui/js_core/mvp/template/template.js").template,l=/^(\S+)\s*([\s\S]*)$/,a=i.dom.create("div"),o=i.lang.createClass(function(e){e=e||{},i.lang.isElement(e.el)&&i.dom.getAttr(e.el,"data-options")&&(e=i.object.merge(e,i.json.parse(i.dom.getAttr(e.el,"data-options")))),this.options=e,i.object.extend(this,e),this._eventStack=[],this.cid=s.uniqueId("view__"),this._ensureElement(),i.lang.isElement(this.el)&&i.lang.isObject(this.elements)&&this.refreshElements(),i.lang.isElement(this.el)&&i.lang.isObject(this.events)&&this.delegateEvents()
}).extend({el:null,applyEl:null,tag:"div",elements:null,events:null,_viewPlugin:{format:i.string.format,template:r},_init:function(){},_ensureElement:function(){if(this.el)i.lang.isString(this.el)&&(this.el=i.dom.query(this.el)[0]);else{var e=this.attr||{};this.el=i.dom.create(this.tag,e)}},delegateEvents:function(e){var t=this;return e||(e=this.events)?(i.object.each(e,function(e,n){var r=n.match(l),a=r[1],o=r[2];""===o?i.on(t.el,a,i.fn.bind(t[e],t)):s.delegate(t.el,o,a,i.fn.bind(t[e],t)),t._addEventStack(t.el,a)
}),this):!1},_addEventStack:function(e,t){var n,r=s.domData,l=i.array.indexOf;(n=r.get(e,"__events"))||(n=[]),-1===l(n,t)&&(n.push(t),r.set(e,"__events",n),-1===l(this._eventStack,e)&&this._eventStack.push(e))},render:function(){return this},appendTo:function(){return this},refreshElements:function(e){var t,n,s=e||this.elements,r=[];for(t in s)s.hasOwnProperty(t)&&(n=s[t],r.push(this[n]=i.dom.query(t,this.el)));return r},renderView:function(e,t){return null===e.type?e.view:this._viewPlugin[e.type](e.view,t)
},unAllEvent:function(){var e=s.domData;return i.array.each(this._eventStack,function(t){var n=e.get(t,"__events");i.array.each(n,function(e){try{i.event.un(t,e)}catch(n){}}),e.remove(t)}),this._eventStack=[],this},unElementAllEvent:function(e){e=i.dom._g(e);for(var t,n,s,r=i.event._listeners,l=r.length;l--;)t=r[l],t[0]===e&&(n=t[4],s=t[3],e.removeEventListener?e.removeEventListener(n,s,!1):e.detachEvent&&e.detachEvent("on"+n,s),r.splice(l,1))},removeDom:function(e){if(!i.lang.isElement(e))return!1;
var t=s.domData;this.unElementAllEvent(e),t.remove(e),i.dom.remove(e),i.browser.ie&&i.browser.ie<9&&(a.appendChild(e),a.innerHTML=""),e=null},dispose:function(){this.fire("dispose");var e=s.domData;this.unAllEvent(),e.remove(this.el),i.dom.remove(this.el),i.browser.ie&&i.browser.ie<9&&(a.appendChild(this.el),a.innerHTML=""),i.lang.Class.prototype.dispose.call(this)}});n.exports.View=o});
;define("ydcommon:widget/ui/js_core/template/template.js",function(e,t,a){var r="undefined"==typeof a?window.baidu=window.baidu||{}:a.exports;r.template=r.template||{},r.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},r.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")
}});
;define("ydcommon:widget/ui/payCheck/payCheck.js",function(o,e,t){var i=o("ydcommon:widget/lib/tangram/base/base.js"),a=o("ydcommon:widget/ui/lib/jquery/jquery.js"),n=o("ydcommon:widget/ui/read/yui/dialog/dialog.js"),s=o("ydcommon:widget/ui/js_core/login/login.js"),d=o("ydcommon:widget/ui/pay/cashier/cashier.js"),d=o("ydcommon:widget/ui/pay/cashier/cashier.js"),c=i.lang.createClass(function(o){var e=this;e.goods_id=o.goods_id,e.goods_type=o.goods_type}).extend({start:function(o){var e=this;e.check(o)
},check:function(o){var e=this;s.login.verlogin(function(){a.ajax({url:"/coupon/interface/bookwallet",cache:!1,async:!1,data:{goods_type:e.goods_type,id:e.goods_id},dataType:"json"}).done(function(t){t.status&&0===+t.status.code?(o=o||{},new d(t.data)):e.hasBuyAlert(t.status.msg)})},null,null,{},!1)},hasBuyAlert:function(o){var e=o||"";n.alert({title:"\u63d0\u793a",content:e,width:400,onClose:function(){location.reload(!0)}})}});t.exports=c});
;define("ydcommon:widget/read/header/user_bar/user_bar.js",function(o){var e=(o("ydcommon:widget/ui/js_core/dropDown/dropDown.js").dropDownCreate,o("ydcommon:widget/ui/lib/jquery/jquery.js")),t=(o("ydcommon:widget/lib/tangram/base/base.js"),o("ydcommon:widget/ui/js_core/log/log.js"),o("ydcommon:widget/lib/fis/data/data.js")),a=o("ydcommon:widget/ui/pay/cart/cart.js"),d=location.href;e(document).ready(function(){a.listGoods({success:function(o){o.goodsnum&&e(".read-userbar .ub-li-cart .ub-cart").append("&nbsp;<span>("+o.goodsnum+")</span>")
}}),setTimeout(function(){e(".read-nav-wp").css({zoom:1})},0),t.get("logined_page")&&(d=t.get("logout_url")&&"string"==typeof t.get("logout_url")?t.get("logout_url"):"//yuedu.baidu.com"),e(".ub-li-mybook .exit a").attr("href","http://passport.baidu.com/?logout&aid=7&u="+escape(d))})});
;define("ydcommon:widget/ui/js_core/yueduSuggestion/model.js",function(t,o,e){var i=t("ydcommon:widget/ui/lib/jquery/jquery.js"),n=(t("ydcommon:widget/ui/js_core/mvp/event/event.js").custEvent,t("ydcommon:widget/ui/js_core/mvp/model/model.js").ModelList),s=t("ydcommon:widget/lib/tangram/base/base.js"),r=s.lang.createClass(function(t,o){this._init(t,o)},{superClass:n}).extend({_init:function(t,o){this.mediator=o,this.loading=!1,this.timer=null,this._initEvent()},_initEvent:function(){var t=this,o=t.mediator;
o.on("m:getData",i.proxy(t.getData,t))},getData:function(t){var o=this,e=t.promise,i=t.key,n=o.findId(i);return n?e.resolve(n.attr()):(o.loading&&o.loading.abort(),clearTimeout(o.timer),o.timer=setTimeout(function(){try{o.request(i,e)}catch(t){}},300)),e},request:function(t,o){var e=this,n={"http:":"http://nssug.baidu.com","https:":"https://gsp0.baidu.com/8qUZeT8a2gU2pMbgoY3K"};e.loading=i.ajax({url:n[window.location.protocol]+"/su",dataType:"jsonp",data:{wd:t,prod:"yuedu"},jsonp:"cb",cache:!1}).done(function(i){i.keyword=t,e.add(i),e.loading=!1,o.resolve(e.findId(t).attr())
})},wrapModel:function(t){var o,e=this,n={authors:[],books:[]},s=t.s,r=0,a=s.length;for(n.id=t.keyword,r;a>r;r++){var d=s[r].split("{#S+_}");if(d.length>1&&""!==d[1]){n.authors.push(d[0]);var u=e.splitBook(i.trim(d[1]),d[0]);n.books=n.books.concat(u)}else o=d[0]||"",o=o.split("^^^"),n.books.push(o.length>1&&""!==o[1]?[o[1],o[0]]:d[0])}return n},splitBook:function(t,o){t=t.split("^^^");var e=[],n=0,s=t.length;for(n;s>n;n++)e.push([o,i.trim(t[n].replace(o,""))]);return e}});e.exports=r});
;define("ydcommon:widget/ui/js_core/yueduSuggestion/view.js",function(e,t,i){function o(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t}var s=e("ydcommon:widget/ui/lib/jquery/jquery.js"),n=(e("ydcommon:widget/ui/js_core/mvp/event/event.js").custEvent,e("ydcommon:widget/ui/js_core/mvp/view/view.js").View),u=e("ydcommon:widget/ui/js_core/mvp/template/template.js").template,l=e("ydcommon:widget/lib/tangram/base/base.js"),a=e("ydcommon:widget/ui/lib/url/url.js"),r=e("ydcommon:widget/ui/js_core/log/log.js"),d=["<%var i=0,n=0%>","<%if(authors.length>0){%>",'<div class="authors-mod sug-mod">','<div class="authors-label sug-label">\u4f5c\u8005</div>','<div class="content">',"<%for(i;i<authors.length&&i<2;i++){%>",'<div class="sug-item sug-item-author" data-type="author" data-value="<%=authors[i]%>" data-index="<%=i%>"><%=highlight(authors[i], keyword)%></div>',"<%}%>","</div>","</div>","<%}%>","<%if(books.length>0){%>",'<div class="books-mod sug-mod">','<div class="books-label sug-label">\u56fe\u4e66</div>','<div class="content">',"<%for(n;n<books.length&&n<8;n++){%>",'<%if(typeof(books[n])!=="string"){%>','<div class="sug-item sug-item-book" data-type="book" data-value="<%=books[n][1]%>" data-index="<%=(i+n)%>"><%=highlight(books[n][1], keyword)%> <span class="book-author">- <%=highlight(books[n][0], keyword)%></span></div>',"<%}else{%>",'<div class="sug-item sug-item-book" data-type="book" data-value="<%=books[n]%>" data-index="<%=(i+n)%>"><%=highlight(books[n], keyword)%></div>',"<%}%>","<%}%>","</div>","</div>","<%}%>"].join(""),c=l.lang.createClass(function(e,t){this._init(e,t)
},{superClass:n}).extend({template:u(d),events:{input:"doInput",keydown:"doKeyDown",propertychange:"doPropertychange",blur:"doBlur"},_init:function(e,t){var i=this;i.mediator=t,i.fillItems=[],i.selectIndex=!1,i.timer=null,i._status="hide",i.sugEl=s('<div class="yuedu-sug"></div>').appendTo(s(document.body)),i.resize(),i._initEvent()},_initEvent:function(){var e=this;s(e.sugEl).on("mouseenter",".sug-item",s.proxy(e.doHover,e)),s(e.sugEl).on("click",".sug-item",s.proxy(e.doClick,e)),s(e.sugEl).on("mouseleave",s.proxy(e.doLeave,e)),s(e.sugEl).on("mouseenter",s.proxy(e.doSearchHover,e)),s(e.el).on("mouseenter",s.proxy(e.doSearchHover,e)),s(e.el).on("mouseleave",s.proxy(e.doLeave,e))
},resize:function(){var e=this,t=s(e.el),i=t.offset();width=t.innerWidth(),height=t.innerHeight(),s(e.sugEl).css({top:i.top+height+1,left:i.left,width:width})},doClick:function(e){var t=this;t.submit(s(e.target).data("index"))},doBlur:function(){var e=this;setTimeout(function(){e.hide()},500)},doPropertychange:function(){var e=this;return e._fromSelect?void(e._fromSelect=!1):void e.doInput()},doInput:function(){var e=this,t=s.trim(this.el.value);return t?(e.value=t,void this.mediator.fire("v:inputChange",{key:t}).then(function(t){t.books.length||t.authors.length?(e.fillSug(t),e.show()):e.hide()
})):void e.hide()},doHover:function(e){var t=this;index=s(e.target).data("index"),s.isNumeric(index)&&(t.selectIndex=index,t.select())},doLeave:function(){var e=this;"hide"!==e._status&&(e.timer=setTimeout(function(){e.hide()},500))},doSearchHover:function(){var e=this;"hide"!==e._status&&e.timer&&clearTimeout(e.timer)},doKeyDown:function(e){var t=this,i=e.keyCode;if("hide"!==t._status){if(40===i)return t.next(),!1;if(38===i)return t.prev(),!1;if(27===i)t.hide();else if(13===i)return t.submit(),!1
}},next:function(){var e=this,t=e.fillItems,i=t.length;0!==i&&(e.selectIndex===!1?e.selectIndex=0:e.selectIndex++,e.selectIndex+1>i&&(e.selectIndex=!1),e.select())},prev:function(){var e=this,t=e.fillItems,i=t.length;0!==i&&(e.selectIndex===!1?e.selectIndex=i-1:e.selectIndex--,e.selectIndex<0&&(e.selectIndex=!1),e.select())},select:function(){var e=this,t=e.fillItems,i=t.eq([e.selectIndex]);s(".sug-item-active",e.sugEl).removeClass("sug-item-active"),i.addClass("sug-item-active")},fillSug:function(e){var t=this;
t.selectIndex=!1,t.sugEl.html(this.template(s.extend(e,{keyword:s.trim(s(t.el).val()),highlight:t.highlight}))),t.fillItems=s(".sug-item",t.sugEl)},fillInput:function(){var e=this;e._fromSelect=!0,selectItem=s(".sug-item-active",e.sugEl),selectItem.length&&(e.el.value=selectItem.data("value"))},show:function(){var e=this;e._status="show",e.resize(),e.sugEl.show()},hide:function(){var e=this;e._status="hide",e.selectIndex=!1,e.sugEl.hide()},highlight:function(e,t){return t&&e?e.replace(new RegExp(t,"g"),"<em>$&</em>"):e
},submit:function(e){var t,i,n,u,l,d,c=this,h=s(c.el.form),v=s(c.el);if(e="number"==typeof e?e:"number"==typeof c.selectIndex?c.selectIndex:!1,t=c.fillItems.eq(e),i=t.data("type"),n=t.data("value"),d=v.val(),"hide"!==c._status&&"number"==typeof e&&i){if(r.xsend(2,200227,{sug_type:i}),u=o(h.serializeArray()),l=h.attr("action"),"book"===i)return u.word=n,u.sug="book",u.t=+new Date,u.input_value=d,setTimeout(function(){location.href=l+"?"+a.jsonToQuery(u)},200),!1;if("author"===i)return u.word=n,u.author=n,u.sug="author",u.t=+new Date,u.input_value=d,setTimeout(function(){location.href=l+"?"+a.jsonToQuery(u)
},200),!1}return h.submit()}});i.exports=c});
;define("ydcommon:widget/ui/js_core/yueduSuggestion/presenter.js",function(e,t,i){var n=e("ydcommon:widget/ui/lib/jquery/jquery.js"),o=e("ydcommon:widget/ui/js_core/mvp/presenter/presenter.js").Presenter,s=e("ydcommon:widget/ui/js_core/mvp/event/event.js").custEvent,r=e("ydcommon:widget/ui/js_core/yueduSuggestion/view.js"),u=e("ydcommon:widget/ui/js_core/yueduSuggestion/model.js"),d=e("ydcommon:widget/lib/tangram/base/base.js"),m=d.lang.createClass(function(e){this._init(e)},{superClass:o}).extend({_init:function(e){this.mediator=new s,this.model=new u(e,this.mediator),this.view=new r(e,this.mediator),this._initEvent()
},_initEvent:function(){var e=this,t=e.mediator;t.on("v:inputChange",n.proxy(e.getData,e))},getData:function(e){var t=e.promise;return this.mediator.fire("m:getData",{key:e.key}).then(function(e){t.resolve(e)}),t}});i.exports=m});
;define("ydcommon:widget/ui/js_core/yueduSuggestion/yueduSuggestion.js",function(e,u,n){var o=(e("ydcommon:widget/ui/lib/jquery/jquery.js"),e("ydcommon:widget/ui/js_core/yueduSuggestion/presenter.js")),i=function(e){return new o(e)};n.exports=i});
;define("ydcommon:widget/ui/js_core/dropDown/dropDown.js",function(o,n,e){var i=o("ydcommon:widget/lib/tangram/base/base.js"),t=o("ydcommon:widget/ui/js_core/widget/widget.js").widget,s=o("ydcommon:widget/ui/js_core/layerControl/layerControl.js").layerControl,r=t({Options:{el:"",bindEl:"",showEvent:"mouseover",hideEvent:"mouseout",closeClassName:""},_init:function(){var o=this;this._atime=null,this._delay=50,this.on("onload",function(){i.lang.isString(o.el)&&(o.el=i.g(el)),i.lang.isString(o.bindEl)&&(o.bindEl=i.g(bindEl))
}),this.on("onShowBefore",function(){clearTimeout(o._atime)}),this.on("onShowAfter",function(){o.el.style.display="block"})},_action:function(){var o=this;i.array.each([o.el,o.bindEl],function(n){i.on(n,o.showEvent,i.fn.bind(o.show,o)),i.on(n,o.hideEvent,function(n){o._hide(),i.event.stop(n)})})},_hide:function(){var o=this;clearTimeout(o._atime),o._atime=setTimeout(function(){o.hide()},o._delay)}},{type:"dropDown",superClass:s}),l=function(o){var n=new r(o);return n.fire("onload"),n};e.exports.dropDown=r,e.exports.dropDownCreate=l
});
;define("ydcommon:widget/ui/read/trigger_ps_tips/trigger_ps_tips.js",function(e,r,i){var n=e("ydcommon:widget/ui/lib/jquery/jquery.js"),t=n.Callbacks("unique once memory"),o=n.Deferred(),d=n.Deferred(),c=n.Deferred();n(document).ready(function(){o.resolve()}),triggerCondition={replaceCallBack:t,getConditionsDef:function(e){switch(e){case"weekend":return c;case"catalog":return d}},getDefferedArr:function(){return[o,d,c]}},i.exports=triggerCondition});
;define("ydcommon:widget/read/side_bar/side_bar.js",function(e,i,n){var t=e("ydcommon:widget/ui/lib/jquery/jquery.js"),d=e("ydcommon:widget/ui/lib/browser/browser.js"),o=e("ydcommon:widget/ui/lib/cookie/cookie.js"),s=function(e,i){var n=t("#side-bar"),s=t(".side-bar-qr-wp"),c=e||1090,i=i||"\u6ca1\u6709\u627e\u5230\u4f60\u60f3\u770b\u7684\u4e66\uff1f<br>\u6765\u53cd\u9988\u5427\uff0c\u6211\u4eec\u4f1a\u505a\u7684\u66f4\u597d\uff01";t(window).resize(function(){var e=document.documentElement.clientWidth-((document.documentElement.clientWidth-c)/2+c+65);
25>=e&&(e=25),n.css({right:e})}),n.find('[href="###"]').click(function(e){e.preventDefault()}),t(".gotop").click(function(){t("body,html").animate({scrollTop:0},500)}),t(".weixin").hover(function(){s.show()},function(){s.hide()}),t("#side-bar").hover(function(){t(this).addClass("side-bar-hover")},function(){t(this).removeClass("side-bar-hover")}),t(document).ready(function(){t(window).trigger("scroll").trigger("resize"),n.fadeIn(200)}),t(function(){function e(){var e=t(".feedback-remind"),c=t("#side-bar .fankui");
parseInt(o.get(n))||(d.ie||s)&&(o.set(n,1,{expires:31536e6,path:"/"}),c.addClass("hover"),e.find(".feedback-remind-close, .feedback-remind-link").on("click",function(){e.fadeOut("fast"),c.removeClass("hover")}),e.find(".feedback-remind-content").html(i),e.fadeIn("fast"))}var n="fbRemind",s=(t(window),!0);if(6!=d.ie){var c,r,a;"undefined"!=typeof document.hidden?(c="hidden",a="visibilitychange",r="visibilityState"):"undefined"!=typeof document.mozHidden?(c="mozHidden",a="mozvisibilitychange",r="mozVisibilityState"):"undefined"!=typeof document.msHidden?(c="msHidden",a="msvisibilitychange",r="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",a="webkitvisibilitychange",r="webkitVisibilityState"),document.addEventListener&&document.addEventListener(a,function(){s=!document[c]
},!1),parseInt(o.get(n))||setTimeout(e,6e4)}})};n.exports.init=s});
;define("ydcommon:widget/ui/pay/cashier/cashier.js",function(require,exports,module){require("ydcommon:widget/ui/js_core/template/template.js");var $=require("ydcommon:widget/ui/lib/jquery/jquery.js"),Lang=require("ydcommon:widget/ui/lib/lang/lang.js"),Dialog=require("ydcommon:widget/ui/js_core/_dialog/_dialog.js").customDialog,Browser=require("ydcommon:widget/ui/lib/browser/browser.js"),Log=require("ydcommon:widget/ui/js_core/log/log.js"),template=require("ydcommon:widget/ui/js_core/mvp/template/template.js").template,titleTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";
for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="cashier-header" class="cashier-header">    <div class="fl title-wrap"><span class="split mr10"></span><span class="text">\u8d2d\u4e70\u56fe\u4e66</span></div>    <div class="fr fr-wrap">        <div class="user-name"><span class="prefix">\u5e10\u53f7\uff1a</span><span class="text"><%=uname%></span></div>        <a href="###" class="ic close dialog-close"></a>    </div></div>'),_template_varName=null
}(_template_object);return fn=null,_template_fun_array.join("")}][0](),booksTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="content-scroll">    <div class="content-wrap">        <%var book_list = book_list || []%>        <div class="box book-wrap">            <div class="media">\u8d2d\u4e70\u56fe\u4e66\uff1a</div>            <div class="content box book-name-cnt">                <div class="media cover-media <%if (book_list.length > 3) {%>multi-cover<%}%>">                    <%if (book_list.length > 3) {%><div class="back-cover"></div><%}%>                    <img class="cover-img" src="<%=__http2https(book_list[0].small_pic_url)%>">                </div>                <div class="content cover-cnt">                    <div class="book-names-wrap">                        <%for (var i= 0; i < book_list.length; i++) {%>                            <p class="book-name"><%=book_list[i].goods_name%></p>                        <%}%>                    </div>                    <div class="book-counts <%if (book_list.length > 1) {%>multi-books<%}%>">\u5171<%=book_list.length%>\u672c</div>                    <%if (book_list.length > 3) {%>                        <a href="###" class="show-more-books"><span class="txt">\u5c55\u5f00\u5168\u90e8</span><span class="ic ml5 arrow"></span></a>                    <%}%>                </div>            </div>        </div>        <div class="box price-wrap">            <div class="media">\u56fe\u4e66\u603b\u989d\uff1a</div>            <div class="content price-cnt"><span class="price-num"><%=confirm_price%></span><span class="price-suffix">\u5143</span></div>        </div>        <%var voucher_list = voucher || []%>        <%if (voucher_list.length) {%>            <div class="box mb10 coupon-wrap">                <div class="media">\u53ef\u7528\u4f18\u60e0\uff1a</div>                <div class="content coupon-cnt">                    <div class="drop-down-wrap">                        <a href="###" class="show-item">                            <span class="coupon-name"><%=voucher_list[0].price%>&nbsp;\u5143\u4ee3\u91d1\u5238</span>                            <span class="split"></span>                            <span class="coupon-date mr10"><%=voucher_list[0].end_time%>&nbsp;&nbsp;\u8fc7\u671f</span>                            <span class="ic arrow"></span>                        </a>                        <ul class="coupon-list">                            <%for (var i = 0; i < voucher_list.length; i++) {%>                                <li><a href="###" class="select-item voucher-item" data-voucher_id="<%=voucher_list[i].voucher_id%>">                                    <span class="coupon-name"><%=voucher_list[i].price%>&nbsp;\u5143\u4ee3\u91d1\u5238</span>                                    <span class="split"></span>                                    <span class="coupon-date"><%=voucher_list[i].end_time%>&nbsp;&nbsp;\u8fc7\u671f</span>                                </a></li>                            <%}%>                            <li><a href="###" class="select-item no-select-item">                                <span class="coupon-name">\u4e0d\u4f7f\u7528\u4ee3\u91d1\u5238</span>                            </a></li>                        </ul>                    </div>                </div>            </div>        <%}%>        <a href="###" id="use-voucher-btn">\u786e\u8ba4\u62b5\u6263</a>        <div id="iframe-wrap" frameborder="0"></div>    </div></div>'),_template_varName=null
}(_template_object);return fn=null,_template_fun_array.join("")}][0](),popTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="inner-pop-wrap hide">    <div class="inner-pop-bg"></div>    <div class="inner-pop-hack">        <div class="inner-pop-cnt">            <div class="success-tips"></div>            <div class="voucher-failed-tips">                <a href="###" class="ic close js-reload-page"></a>                <div class="cnt-wrap">                    <p class="tips-txt">\u62b5\u6263\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u652f\u4ed8\uff01</p>                    <a href="###" class="yui-btn repay-btn js-reload-page">\u91cd\u65b0\u652f\u4ed8</a>                </div>            </div>            <div class="waiting-tips">                <a href="###" class="ic close js-reload-page"></a>                <div class="cnt-wrap">                    <p class="tips-txt mb15">\u8bf7\u5728\u65b0\u6253\u5f00\u7684\u9875\u9762\u5b8c\u6210\u652f\u4ed8\uff0c\u652f\u4ed8\u6210\u529f\u524d\u8bf7\u4e0d\u8981\u5173\u95ed\u6216\u5237\u65b0\u6b64\u7a97\u53e3</p>                    <div class="btn-wrap">                        <a href="###" class="yui-btn yui-btn-white3 repay-btn js-reload-page">\u5931\u8d25\uff0c\u91cd\u65b0\u652f\u4ed8</a>                        <a href="###" class="yui-btn yui-btn-green success-btn js-paycheck">\u652f\u4ed8\u6210\u529f</a>                    </div>                </div>            </div>        </div>    </div></div>'),_template_varName=null
}(_template_object);return fn=null,_template_fun_array.join("")}][0](),Cashier=Lang.createClass(function(e){var a=this;a.init(e)}).extend({init:function(e){var a=this;a.options=e,a._initVoucher(e)._initDialog(e),Log.xsend(2,200320)},_initVoucher:function(e){var a=this;return $.isArray(e.voucher)&&e.voucher.length?(a.isUseVoucher=!0,a.curVoucherId=e.voucher[0].voucher_id):(a.isUseVoucher=!1,a.curVoucher={}),a},_initDialog:function(e){var a=this,s=new Dialog({innerId:"iframe-cashier",width:715,height:616,autoshow:!1,content:a._getContent(e)});
return s.on("onShowBefore",function(){Browser.ie&&$("#iframe-cashier .book-name-cnt").addClass("ie")}),s.on("onShowAfter",function(){a.$cashierIframe=$("#iframe-wrap"),a.$voucherBtn=$("#use-voucher-btn"),a.cashier=null,a.isUseVoucher?a.$voucherBtn.css("display","block"):(a.$voucherBtn.css("display","none"),a.$cashierIframe.show(),a.cashier=new lbscashier({onmessage:$.proxy(a._cashierMsg,a),containerId:"iframe-wrap",data:e.url})),a._bindEvent()}),s.on("onCloseBefore",function(){a._unBindEvent(),a.$cashierIframe=null,a.$voucherBtn=null,a.cashier=null
}),s.show(),a},_bindEvent:function(){var e=this;$("body").on("mouseover","#iframe-cashier .drop-down-wrap",function(e){e.preventDefault();var a=$(this);a.find(".coupon-list").show()}).on("mouseout","#iframe-cashier .drop-down-wrap",function(e){e.preventDefault();var a=$(this);a.find(".coupon-list").hide()}),$("body").on("click","#iframe-cashier .show-more-books",function(e){e.preventDefault();var a=$(this);a.hasClass("show-all")?(a.removeClass("show-all").find(".txt").html("\u5c55\u5f00\u5168\u90e8"),a.parent().find(".book-names-wrap").removeClass("show-all")):(a.addClass("show-all").find(".txt").html("\u6536\u8d77"),a.parent().find(".book-names-wrap").addClass("show-all"))
}),$("body").on("click","#iframe-cashier .select-item",$.proxy(e._voucherItemClick,e)),$("body").on("click","#use-voucher-btn",function(a){a.preventDefault(),e._useVoucher()}),$("body").on("click","#iframe-cashier .js-paycheck",function(a){a.preventDefault(),e._tradeCheck()}),$("body").on("click","#iframe-cashier .js-reload-page",function(e){e.preventDefault(),window.location.reload(!0)})},_unBindEvent:function(){$("body").off("mouseover","#iframe-cashier .drop-down-wrap").off("mouseout","#iframe-cashier .drop-down-wrap").off("click","#iframe-cashier .show-more-books").off("click","#iframe-cashier .select-item").off("click","#use-voucher-btn").off("click","#iframe-cashier .js-paycheck").off("click","#iframe-cashier .js-reload-page")
},_voucherItemClick:function(e){e.preventDefault();var a=this,s=$(e.currentTarget),i=s.data("voucher_id"),o=s.parents(".drop-down-wrap").find(".show-item");i?(a.isUseVoucher=!0,a.curVoucherId=i,o.find(".coupon-name").html(s.find(".coupon-name").html()).removeClass("no-coupon"),o.find(".coupon-date").html(s.find(".coupon-date").html()).show(),o.find(".split").show(),a.$cashierIframe.hide(),a.$voucherBtn.show()):(a.isUseVoucher=!1,a.curVoucherId="",o.find(".coupon-name").html(s.find(".coupon-name").html()).addClass("no-coupon"),o.find(".coupon-date,.split").hide(),a.$cashierIframe.show(),a.cashier||(a.cashier=new lbscashier({onmessage:$.proxy(a._cashierMsg,a),containerId:"iframe-wrap",data:a.options.url||""})),a.$voucherBtn.hide()),s.parents(".coupon-list").hide()
},_useVoucher:function(){var e=this;$.ajax({url:"/coupon/interface/usevoucheronly",method:"POST",cache:!1,dataType:"json",data:{trade_id:e.options.trade_id,voucher_id:e.curVoucherId}}).done(function(e){var a=$("#iframe-cashier");e.status&&0===e.status.code?(a.find(".inner-pop-wrap").removeClass("hide").end().find(".success-tips").show(),setTimeout(function(){location.reload()},500)):a.find(".inner-pop-wrap").removeClass("hide").end().find(".voucher-failed-tips").show()})},_tradeCheck:function(){var e=this;
$.ajax({url:"/coupon/interface/checktrade",method:"POST",cache:!1,dataType:"json",data:{trade_id:e.options.trade_id}}).done(function(e){e.status&&0===e.status.code&&e.data.trade_info&&1===e.data.trade_info.status?window.location.href=e.data.url:window.location.reload(!0)})},_cashierMsg:function(e){var a=this;if("pay"===e.type)if("submit"===e.data){var s=$("#iframe-cashier");s.find(".inner-pop-wrap").removeClass("hide").end().find(".waiting-tips").show()}else"success"===e.data&&a._tradeCheck()},_getContent:function(e){var a="";
return a+=template(titleTmpl,e),a+=template(booksTmpl,e),a+=template(popTmpl,e)}});module.exports=Cashier});
;define("ydcommon:widget/ui/pay/cart/cart.js",function(t,e,s){var a=t("ydcommon:widget/ui/lib/jquery/jquery.js"),o=t("ydcommon:widget/ui/js_core/mvp/event/event.js").custEvent,r=t("ydcommon:widget/lib/fis/data/data.js"),d=function(){var t=this;a.extend(t,new o),this.goodsNum=null};d.prototype={api:{add:"/cart/interface/additem",del:"/cart/interface/deleteitem",check:"/cart/interface/checkitem",list:"/cart/interface/getcartgoods",select:"/cart/interface/updatecartselect"},defaultsSetting:{type:"POST",dataType:"json",success:function(){},error:function(){},defaultImage:!0},_msg:{UNKNOW_ERROR:"\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",ADD_GOODS_SUCESS:"\u6dfb\u52a0\u8d2d\u7269\u8f66\u6210\u529f",DELETE_GOODS_SUCESS:"\u5220\u9664\u6210\u529f",DELETE_GOODS_ERROR:"\u5220\u9664\u5931\u8d25",100:"\u6dfb\u52a0\u8d2d\u7269\u8f66\u5931\u8d25",101:"\u56fe\u4e66\u5df2\u8d2d\u4e70",104:'\u8d2d\u7269\u8f66\u5df2\u6ee1\uff0c\u8bf7\u5148<a href="/cart/mycart">\u53bb\u652f\u4ed8</a>'},_getMsg:function(t){return this._msg[t]?this._msg[t]:this._msg[100]
},addGoods:function(t,e){var s=this;a.isArray(t)&&(t=t.join("|")),e=e||{};var o=e.success;e.success=function(t,a,i){var r;try{r=t.data.cart,s._setGoodsNum(r.goodsnum),+r.status>=200||102==+r.status?(o&&o(r,s._getMsg("ADD_GOODS_SUCESS")),s.fire("onAddGoods",r)):e.error(i,s._getMsg(+r.status),r)}catch(d){e.error(i,s._getMsg("UNKNOW_ERROR"),t)}},e=a.extend({},this.defaultsSetting,e),e.url=this.api.add,e.data={doc_ids:t},a.ajax(e)},deleteGoods:function(t,e){var s=this;a.isArray(t)&&(t=t.join("|")),e=e||{};
var o=e.success;e.success=function(t,a,i){var r;try{r=t.data.cart,s._setGoodsNum(r.goodsnum),+r.status>=200?(o&&o(r,s._getMsg("DELETE_GOODS_SUCESS")),s.fire("onDeleteGoods",r)):e.error(i,s._getMsg("DELETE_GOODS_ERROR"),r)}catch(d){e.error(i,s._getMsg("UNKNOW_ERROR"),t)}},e=a.extend({},this.defaultsSetting,e),e.url=this.api.del,e.data={doc_ids:t},a.ajax(e)},checkGoods:function(t,e){var s=this;a.isArray(t)&&(t=t.join("|")),e=e||{};var o=e.success;e.success=function(t,a,i){var r;try{r=t.data.cart,s._setGoodsNum(r.goodsnum),102==+r.status?o&&o(r,!0):300==+r.status?o&&o(r,!1):e.error(i,s._getMsg("DELETE_GOODS_ERROR"),r)
}catch(d){e.error(i,s._getMsg("UNKNOW_ERROR"),t)}},e=a.extend({},this.defaultsSetting,e),e.url=this.api.check,e.data={doc_ids:t},a.ajax(e)},listGoods:function(t,e){var s=this;"object"==typeof t&&(e=t,t=""),e=e||{};var o=e.success;e.success=function(t,a,i){var r;try{r=t.data.cart,s._setGoodsNum(r.goodsnum),e.defaultImage&&s._defaultImage(r),o&&o(r)}catch(d){e.error(i,s._getMsg("UNKNOW_ERROR"),t)}},e=a.extend({},this.defaultsSetting,e),e.url=this.api.list,e.data={gn:t},a.ajax(e)},getGoodsNum:function(){return this.goodsNum
},readGoodsList:function(t){var e=r.get("cartInfo"),s=e.goodsList,o=e.totalPrice;if(s){t=a.extend({},this.defaultsSetting,t);var d=a.parseJSON(s),c=[];if(!a.isArray(d))if("object"==typeof d){for(i in d)c.push(d[i]);d=c}else d=[];var n={list:d,totalPrice:o};t.defaultImage&&this._defaultImage(n),t.success(n)}else this.listGoods(t)},_setGoodsNum:function(t){a.isNumeric(t)&&this.goodsNum!==+t&&(this.goodsNum=t,this.fire("onGoodsNumChange",{goodsNum:t}))},_defaultImage:function(t){var e,s=t.list;if(s&&s.length)for(var a=s.length-1;a>=0;a--)e=s[a],e.img_url||(e.img_url="/static/pay/book_index/book_default_photo/b"+(e.doc_id.charCodeAt(1)%10+1)+".png",e.defaultImage=!0)
},updateCartSelect:function(t){return t=a.extend({},this.defaultsSetting,t),t.url=this.api.select,t.data={doc_ids:t.doc_ids},a.ajax(t)}},s.exports=new d});