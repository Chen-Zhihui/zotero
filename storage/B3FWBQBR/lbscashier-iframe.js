function lbsmessenger(t){function e(t,e){var n="";if(arguments.length<2?n="target error - target and name are both requied":"object"!=typeof t?n="target error - target itself must be window object":"string"!=typeof e&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=t,this.name=e}function n(t,e){this.targets={},this.name=t,this.listenFunc=[],"undefined"!=typeof e&&(r=e),"string"!=typeof r&&(r=r.toString()),this.initListen()}t=t||window.JSON;var r="[LBSCASHIER]",i="postMessage"in window;return e.prototype.send=i?function(e,n){"object"==typeof n&&(n=t.stringify(n)),n=t.stringify({type:e,data:n});try{this.target.postMessage(r+n,"*")}catch(i){try{window.parent.postMessage(r+n,"*")}catch(i){}}}:function(e,n){"object"==typeof n&&(n=t.stringify(n)),n=t.stringify({type:e,data:n});var i=window.navigator[r+this.name];if("function"!=typeof i)throw new Error("target callback function is not defined");i(r+n,window)},n.prototype.addTarget=function(t,n){var r=new e(t,n);this.targets[n]=r},n.prototype.initListen=function(){var e=this,n=function(n){"object"==typeof n&&n.data&&(n=n.data);try{n=t.parse(n)}catch(i){try{r&&n&&"string"==typeof n?(n=n.slice(r.length),n=t.parse(n)):n={}}catch(i){n={}}}for(var o=0;o<e.listenFunc.length;o++)e.listenFunc[o](n)};i?"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n):window.navigator[r+this.name]=n},n.prototype.listen=function(t){this.listenFunc.push(t)},n.prototype.clear=function(){this.listenFunc=[]},n.prototype.send=function(t,e){var n,r=this.targets;for(n in r)r.hasOwnProperty(n)&&r[n].send(t,e)},window.LBSCashierMessenger=n,n}"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,a,s=gap,f=e[t];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(t)),"function"==typeof rep&&(f=rep.call(e,t,f)),typeof f){case"string":return quote(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(f)){for(o=f.length,n=0;o>n;n+=1)a[n]=str(n,f)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,f),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in f)Object.prototype.hasOwnProperty.call(f,r)&&(i=str(r,f),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),lbsmessenger(),window.lbscashier=function(){function t(t){this.option=this.extend({frameId:"cashier-iframe",width:"100%",data:"",containerId:"",height:"",tabNum:4,disabledChannel:[],asycSubmit:0,samePage:0,recommendChannel:"bfb",payCheckUrl:"",onmessage:function(){}},t),this.iframe=document.createElement("iframe");var e=this;this.height=parseInt(this.option.height,10),this.fixHeight=function(){return e.height>0}(),this.messenger=new LBSCashierMessenger("lbscashierMsgParent"),this.messenger.listen(function(t){if("resize"===t.type){if(!e.fixHeight){var n=t.data;"string"==typeof n&&(n=JSON.parse(n)),e.iframe.style.height=n.height+"px"}}else{var n=t.data,r={};if("string"==typeof n)try{r=JSON.parse(n),t.data=r.result}catch(i){r.result=t.data}t.option=r,e.option.onmessage.call(e,t)}}),this.option.data&&this.init(this.option.data),this.fixHeight&&(this.iframe.style.height=this.height+"px")}return t.prototype.init=function(t){function e(){var t=1e3;n.messenger.addTarget(n.iframe.contentWindow,"lbscashierMsgIframe"),"postMessage"in window||(t=1e3),setTimeout(function(){n.messenger.send("init",n.option)},t)}var n=this;this.iframe.id=this.option.frameId,this.iframe.frameBorder=0;"http:"===window.location.protocol?"http:":"https:";this.iframe.src="https://zhifu.baidu.com/proxy/req/newcashier?"+t,/^[0-9]$/.test(this.option.width)&&(this.option.width=this.option.width+"px"),this.iframe.width=this.option.width,this.iframe.style.borderBottom="1px solid #d6d6d6",this.option.containerId?document.getElementById(this.option.containerId).appendChild(this.iframe):document.body.appendChild(this.iframe),"addEventListener"in document?this.iframe.addEventListener("load",e,!1):"attachEvent"in document&&this.iframe.attachEvent("onload",e)},t.prototype.updateOrder=function(t){this.messenger.send("updateOrder",t)},t.prototype.submit=function(t){this.messenger.send("submit",t)},t.prototype.extend=function(){var t,e,n,r,i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Object]":"object"},s=function(t){return null==t?String(t):a[i.call(t)]||"object"},f=function(t){return t&&"object"==typeof t&&"setInterval"in t},u=Array.isArray||function(t){return"array"===s(t)},c=function(t){if(!t||"object"!==s(t)||t.nodeType||f(t))return!1;if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1;var e;for(e in t);return void 0===e||o.call(t,e)},p=function(i,o,a){"object"==s(i)&&(a=o,o=i,i=!1);for(name in a)e=o[name],n=a[name],o!==n&&(i&&n&&(c(n)||(t=u(n)))?(t?(t=!1,r=e&&u(e)?e:[]):r=e&&c(e)?e:{},o[name]=p(i,r,n)):void 0!==n&&(o[name]=n));return o};return p}(),t}();