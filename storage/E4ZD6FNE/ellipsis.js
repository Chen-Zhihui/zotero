/*! 2018 Baidu Inc. All Rights Reserved */
define("ellipsis",["require"],function(require){function e(e,i){var t=i.maxLine,s=i.ellipsisChar,n=i.ellipsisContainer.text(),a=$(e).clone();a.insertAfter(e);var r=a.find("[data-ellipsis-container=true]"),l=t*parseInt(r.css("line-height"),10);r.length<=0&&(r=a),r.css("white-space","normal"),e.remove();var o=a.height();if(o>l){var h=Math.floor(n.length*l/o),f=n.substring(0,h)+s;if(r.text(f),(o=a.height())>l)for(;o>l&&h>1;)h--,f=n.substring(0,h)+s,r.text(f),o=a.height();else if(o<=l){for(;o<=l&&h<n.length;)h++,f=n.substring(0,h)+s,r.text(f),o=a.height();if(o>l)f=n.substring(0,h-1)+s}i.ellipsisContainer.text(f.replace("　"," "))}e.insertBefore(a),a.remove()}function i(i,t){if(!(t.maxLine<=1))e(i,t)}function t(e){!e&&(e=$("body")),n.autoParse.parse(e)}var s={maxLine:1,ellipsisChar:"…"},n=$.fn.ellipsis=function(e){return this.each(function(){i($(this),$.extend({},s,e))})};return $.fn.ellipsis.options=s,n.autoParse={parseElement:function(e){var i=$(e),t=i.data("ellipsis-max-line"),s=i.find("[data-ellipsis-container=true]"),n=i.data("[data-ellipsis-char]");s.length<=0&&(s=i),i.ellipsis({maxLine:t,ellipsisChar:n,ellipsisContainer:s})},parse:function(e){$(e).find("[data-ellipsis=true]").each(function(){n.autoParse.parseElement(this),$(this).data("ellipsis",!1)})}},{autoParse:t}});