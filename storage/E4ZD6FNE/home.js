/*! 2018 Baidu Inc. All Rights Reserved */
define("user",["require","exports"],function(require,exports){function e(){if(o)if(r)n.style.display="none",r=!1,clearInterval(t),t=-1}$("#userbar-login").click(function(e){e.preventDefault(e)});var i=document.getElementById("username-title"),n=document.getElementById("userbar-username-menu"),t=-1,o=!1,r=!1;if(i)i.onmouseover=function(){if(!r){if(n.style.display="block",r=!0,o=!1,t<0)t=setInterval(e,500)}else e();return!1},i.onmouseout=function(){o=!0};if(n)n.onmouseover=function(){o=!1},n.onmouseout=function(){o=!0}}),define("logger",["require","exports"],function(require,exports){var e={};exports.logUrl="/m.gif",exports.logTags=["A","IMG","BUTTON","H2","H3","H1","B","LABEL","INPUT"],exports.send=function(i){for(var n in e)i[n]=e[n];$.get(exports.logUrl,i)},exports.init=function(){e.word=window.basicInfo&&basicInfo.name||$("#kw").val(),e.un=(window.userInfo||{un:""}).un,e.device=$(".pc").length?"pc":"wise",e.refer=document.referrer,exports.bind()},exports.bind=function(){exports.logVisit(),$(document.body).click(exports.logClick)},exports.logVisit=function(){exports.send({type:"visit"})},exports.getXPath=function(e){e=$(e);var i=[];if(document.body.id)i.push("#"+document.body.id);for(;e&&e.length;){var n=e[0],t=n.id?"#"+n.id:n.tagName;if(i.push(t),e=e.parent(),n.id)break}return i},exports.logClick=function(e){var i=e.target||e.srcElement,module=!1;if(i.id||$.inArray(i.tagName,exports.logTags)>-1)module=$(i).closest(".module");else module=$(i).closest("module");if(module.length){var n=exports.getXPath(i).join("/"),t=$(i).text()||$(i).val()||"",o={type:"click",mod:module[0].id,text:$.trim(t.substr(0,10)),path:n};exports.send(o)}}}),define("tool",[],function(){return{versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i),weibo:"weibo"==e.match(/weibo/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()}}),define("ellipsis",["require"],function(require){function e(e,i){var n=i.maxLine,t=i.ellipsisChar,o=i.ellipsisContainer.text(),r=$(e).clone();r.insertAfter(e);var a=r.find("[data-ellipsis-container=true]"),s=n*parseInt(a.css("line-height"),10);a.length<=0&&(a=r),a.css("white-space","normal"),e.remove();var l=r.height();if(l>s){var c=Math.floor(o.length*s/l),f=o.substring(0,c)+t;if(a.text(f),(l=r.height())>s)for(;l>s&&c>1;)c--,f=o.substring(0,c)+t,a.text(f),l=r.height();else if(l<=s){for(;l<=s&&c<o.length;)c++,f=o.substring(0,c)+t,a.text(f),l=r.height();if(l>s)f=o.substring(0,c-1)+t}i.ellipsisContainer.text(f.replace("　"," "))}e.insertBefore(r),r.remove()}function i(i,n){if(!(n.maxLine<=1))e(i,n)}function n(e){!e&&(e=$("body")),o.autoParse.parse(e)}var t={maxLine:1,ellipsisChar:"…"},o=$.fn.ellipsis=function(e){return this.each(function(){i($(this),$.extend({},t,e))})};return $.fn.ellipsis.options=t,o.autoParse={parseElement:function(e){var i=$(e),n=i.data("ellipsis-max-line"),t=i.find("[data-ellipsis-container=true]"),o=i.data("[data-ellipsis-char]");t.length<=0&&(t=i),i.ellipsis({maxLine:n,ellipsisChar:o,ellipsisContainer:t})},parse:function(e){$(e).find("[data-ellipsis=true]").each(function(){o.autoParse.parseElement(this),$(this).data("ellipsis",!1)})}},{autoParse:n}}),define("home",["require","exports","./user","./logger","./tool","./ellipsis"],function(require,exports){function e(){if($(".banner").hide(),window.sessionStorage)sessionStorage.setItem("closeBannerDate",o)}require("./user"),require("./logger").init();var i=require("./tool");$("#kw").keyup(function(){$("form #q").val($("#kw").val())}),setTimeout(function(){$("img").each(function(){var e=$(this).data("src");if(e)this.src=e})},100);var n=!0,t=new Date,o=t.getFullYear().toString()+t.getMonth().toString()+t.getDate().toString();if(window.sessionStorage){var r=sessionStorage.getItem("closeBannerDate");if(r&&r==o)n=!1}if(n){if("dictapp"!=window.navigator.userAgent.toLowerCase().match(/dictapp/i))$(".banner").toggle();$(".appbanner").click(function(n){if("close-appbanner"==n.target.id)return void e();if(i.versions.weixin||i.versions.weibo)$(".weixin-tips").show();else if(i.versions.ios){var t=new Date;window.setTimeout(function(){var e=new Date;if(!t||e-t<1100){if(confirm("在App Store中打开百度汉语？"))window.location="http://click.hm.baidu.com/app.gif?ap=324561&ch=36651"}else window.close()},1e3),window.location="baidudict://"}else if(confirm("下载百度汉语？"))window.location="http://click.hm.baidu.com/app.gif?ap=324561&ch=36651"}),$(".weixin-tips").click(function(){$(".weixin-tips").hide()})}var a=require("./ellipsis");return exports.init=function(){if(a.autoParse(),i.versions.weixin)$(".download-item").attr("href","http://app.dict.baidu.com/dictapp/user_download2?from=page")},exports});