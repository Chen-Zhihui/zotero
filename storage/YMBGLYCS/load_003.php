mw.loader.implement("ext.navigationTiming.rumSpeedIndex@0dfprm3",function($,jQuery,require,module){var RUMSpeedIndex=function(win){win=win||window;var doc=win.document;var GetElementViewportRect=function(el){var intersect=!1;if(el.getBoundingClientRect){var elRect=el.getBoundingClientRect();intersect={'top':Math.max(elRect.top,0),'left':Math.max(elRect.left,0),'bottom':Math.min(elRect.bottom,(win.innerHeight||doc.documentElement.clientHeight)),'right':Math.min(elRect.right,(win.innerWidth||doc.documentElement.clientWidth))};if(intersect.bottom<=intersect.top||intersect.right<=intersect.left){intersect=!1;}else{intersect.area=(intersect.bottom-intersect.top)*(intersect.right-intersect.left);}}return intersect;};var CheckElement=function(el,url){if(url){var rect=GetElementViewportRect(el);if(rect){rects.push({'url':url,'area':rect.area,'rect':rect});}}};var GetRects=function(){var elements=doc.getElementsByTagName('*');var re=/url\(.*(http.*)\)/ig;for(var i=0;i<elements.length;i++)
{var el=elements[i];var style=win.getComputedStyle(el);if(el.tagName=='IMG'){CheckElement(el,el.src);}if(style['background-image']){re.lastIndex=0;var matches=re.exec(style['background-image']);if(matches&&matches.length>1)CheckElement(el,matches[1].replace('"',''));}if(el.tagName=='IFRAME'){try{var rect=GetElementViewportRect(el);if(rect){var tm=RUMSpeedIndex(el.contentWindow);if(tm){rects.push({'tm':tm,'area':rect.area,'rect':rect});}}}catch(e){}}}};var GetRectTimings=function(){var timings={};var requests=win.performance.getEntriesByType("resource");for(var i=0;i<requests.length;i++)timings[requests[i].name]=requests[i].responseEnd;for(var j=0;j<rects.length;j++){if(!('tm'in rects[j]))rects[j].tm=timings[rects[j].url]!==undefined?timings[rects[j].url]:0;}};var GetFirstPaint=function(){try{var entries=performance.getEntriesByType('paint');for(var i=0;i<entries.length;i++){if(entries[i]['name']=='first-paint'){navStart=performance.getEntriesByType("navigation")[0].startTime;firstPaint
=entries[i].startTime-navStart;break;}}}catch(e){}if(firstPaint===undefined&&'msFirstPaint'in win.performance.timing)firstPaint=win.performance.timing.msFirstPaint-navStart;if(firstPaint===undefined&&'chrome'in win&&'loadTimes'in win.chrome){var chromeTimes=win.chrome.loadTimes();if('firstPaintTime'in chromeTimes&&chromeTimes.firstPaintTime>0){var startTime=chromeTimes.startLoadTime;if('requestTime'in chromeTimes)startTime=chromeTimes.requestTime;if(chromeTimes.firstPaintTime>=startTime)firstPaint=(chromeTimes.firstPaintTime-startTime)*1000.0;}}if(firstPaint===undefined||firstPaint<0||firstPaint>120000){firstPaint=win.performance.timing.responseStart-navStart;var headURLs={};var headElements=doc.getElementsByTagName('head')[0].children;for(var i=0;i<headElements.length;i++){var el=headElements[i];if(el.tagName=='SCRIPT'&&el.src&&!el.async)headURLs[el.src]=!0;if(el.tagName=='LINK'&&el.rel=='stylesheet'&&el.href)headURLs[el.href]=!0;}var requests=win.performance.getEntriesByType(
"resource");var doneCritical=!1;for(var j=0;j<requests.length;j++){if(!doneCritical&&headURLs[requests[j].name]&&(requests[j].initiatorType=='script'||requests[j].initiatorType=='link')){var requestEnd=requests[j].responseEnd;if(firstPaint===undefined||requestEnd>firstPaint)firstPaint=requestEnd;}else{doneCritical=!0;}}}firstPaint=Math.max(firstPaint,0);};var CalculateVisualProgress=function(){var paints={'0':0};var total=0;for(var i=0;i<rects.length;i++){var tm=firstPaint;if('tm'in rects[i]&&rects[i].tm>firstPaint)tm=rects[i].tm;if(paints[tm]===undefined)paints[tm]=0;paints[tm]+=rects[i].area;total+=rects[i].area;}var pixels=Math.max(doc.documentElement.clientWidth,win.innerWidth||0)*Math.max(doc.documentElement.clientHeight,win.innerHeight||0);if(pixels>0){pixels=Math.max(pixels-total,0)*pageBackgroundWeight;if(paints[firstPaint]===undefined)paints[firstPaint]=0;paints[firstPaint]+=pixels;total+=pixels;}if(total){for(var time in paints){if(paints.hasOwnProperty(time)){progress.
push({'tm':time,'area':paints[time]});}}progress.sort(function(a,b){return a.tm-b.tm;});var accumulated=0;for(var j=0;j<progress.length;j++){accumulated+=progress[j].area;progress[j].progress=accumulated/total;}}};var CalculateSpeedIndex=function(){if(progress.length){SpeedIndex=0;var lastTime=0;var lastProgress=0;for(var i=0;i<progress.length;i++){var elapsed=progress[i].tm-lastTime;if(elapsed>0&&lastProgress<1)SpeedIndex+=(1-lastProgress)*elapsed;lastTime=progress[i].tm;lastProgress=progress[i].progress;}}else{SpeedIndex=firstPaint;}};var rects=[];var progress=[];var firstPaint;var SpeedIndex;var pageBackgroundWeight=0.1;try{var navStart=win.performance.timing.navigationStart;GetRects();GetRectTimings();GetFirstPaint();CalculateVisualProgress();CalculateSpeedIndex();}catch(e){}return SpeedIndex;};if(typeof module!=='undefined'&&module.exports){module.exports=RUMSpeedIndex;}});mw.loader.implement("schema.NavigationTiming@02ba1tn",function($,jQuery,require,module){mediaWiki.eventLog.declareSchema("NavigationTiming",{"schema":{"title":"NavigationTiming","properties":{"action":{"type":"string"},"connectEnd":{"type":"integer"},"connectStart":{"type":"integer"},"dnsLookup":{"type":"integer"},"domComplete":{"type":"integer"},"domInteractive":{"type":"integer"},"domainLookupStart":{"type":"integer"},"domainLookupEnd":{"type":"integer"},"netinfoEffectiveConnectionType":{"type":"string"},"fetchStart":{"type":"integer"},"gaps":{"type":"integer"},"isAnon":{"required":!0,"type":"boolean"},"isOversample":{"type":"boolean"},"loadEventEnd":{"type":"integer"},"loadEventStart":{"type":"integer"},"mobileMode":{"enum":["alpha","beta","stable"],"type":"string"},"mediaWikiVersion":{"type":"string"},"originCountry":{"type":"string"},"oversampleReason":{"type":"string"},"namespaceId":{"type":"integer"},"redirectCount":{"type":"integer"},"redirecting":{"type":"integer"},
"redirectStart":{"type":"integer"},"redirectEnd":{"type":"integer"},"requestStart":{"type":"integer"},"responseEnd":{"type":"integer"},"responseStart":{"type":"integer"},"secureConnectionStart":{"type":"integer"},"unload":{"type":"integer"},"unloadEventStart":{"type":"integer"},"unloadEventEnd":{"type":"integer"},"mediaWikiLoadEnd":{"type":"integer"},"revId":{"type":"integer"},"firstPaint":{"type":"integer"},"RSI":{"type":"integer"},"mwSpecialPageName":{"type":"string"},"stickyRandomSessionId":{"type":"string"},"transferSize":{"type":"integer"}}},"revision":18156125});});mw.loader.implement("schema.SaveTiming@10h98u7",function($,jQuery,require,module){mediaWiki.eventLog.declareSchema("SaveTiming",{"schema":{"title":"SaveTiming","properties":{"saveTiming":{"type":"integer","required":!0},"mediaWikiVersion":{"type":"string"}}},"revision":15396492});});