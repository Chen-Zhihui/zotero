define("kg/detail-item-recommend/0.0.10/lib/c/heart-election/index",["node","base","io","json","cookie","kg/detail-item-recommend/0.0.10/lib/c/heart-election/index.css","kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/draw.xtpl","kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/swaps.xtpl","kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/photo.xtpl","kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/recommend.xtpl","kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/recom.xtpl"],function(e,t,a){var i=(KISSY,e("node")),r=e("base"),n=e("io"),d=e("json"),l=e("cookie");e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/index.css");var o,c=i.all;o={},o.draw=e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/draw.xtpl"),o.swaps=e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/swaps.xtpl"),o.photo=e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/photo.xtpl"),o.recommend=e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/recommend.xtpl"),o.recom=e("kg/detail-item-recommend/0.0.10/lib/c/heart-election/tpl/recom.xtpl");var s=!!~location.href.indexOf("daily"),g=!1,m=!1,f=s?"//tad.daily.taobao.net":"//tad.taobao.com",u=s?"//tui.taobao.com/recommend?sellerid=737329&itemid=18813881279&buyerid=392063273&catid=50005818&cna=HbuVDIAPMg4CASp4Ss%20W2ffQ&areaid=tad_first_area&_ksTS=1414137448224_804&callback=jsonp805&appid=152":"//tui.taobao.com/recommend?appid=152",_=r.extend({init:function(){var e=this,t=e.get("data");t?e.render():e.load(),e.bindEvent()},render:function(){var e,t,a,i,r,n,l,s,f,u,_=this,h=_.get("data"),p=[],v=_.get("container"),b=_.get("errorFn"),k=_.get("successFn");if(h.guide)return g_config&&g_config.sellerDetail&&g_config.sellerDetail.buyerDetail?void c("#tad_first_area").hide():(location.host&&location.host.indexOf("daily")>-1?c(v).html('<div class="tad_guide_area" data-spm="1998223148"><div class="tad_guide_info"></div><div class="tad_guide_ope"><a href="//tte.daily.taobao.net/activity/default" target="_blank" class="tad_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/16029511-270773839.htm?scm=1212.30.1.31" target="_blank" class="tad_help_link">\u5e2e\u52a9</a></div></div>'):c(v).html('<div class="tad_guide_area" data-spm="1998223148"><div class="tad_guide_info"></div><div class="tad_guide_ope"><a href="//xin.mai.taobao.com/activity/default" target="_blank" class="tad_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/16029511-270773839.htm?scm=1212.30.1.31" target="_blank" class="tad_help_link">\u5e2e\u52a9</a></div></div>'),void(k&&k()));for(t in h)if("guide"!==t&&"tad_12"!==t&&"xin1212"!==t){var w=h[t],y=c("#"+t);if(w[0])if(w[0].redirect)p.push(t),m=!0;else if(w[0].success&&""!=w[0].content){for(g=!0,i="",n=0,s=w.length;n<s;n++)if(e="string"==typeof w[n].content?d.parse(w[n].content):w[n].content){for(r=o[e.name],e.style=_.getStyle(e.style),u=e.data,l=0,f=u.length;l<f;l++)a=u[l],a.style&&(a.style=_.getStyle(a.style));i+=r(e)}i.length>0&&e.data.length>0&&("tad_first_area"==t&&(y=c(v)||y),y.html(i),y.attr({taskid:e.taskID,templatetype:e.name,whichplan:"custom"}),y.show(),k&&k())}else"tad_first_area"==t&&b&&b()}m&&_.renderRedirect(p)},bindEvent:function(){var e=this;e.resize(),c(window).on("resize",function(){e.resize()})},resize:function(){c("#tad_first_area").parent().width()>990?c("#J_TadHeartElection").length&&c("#J_TadHeartElection").removeClass("tad_small_width"):c("#J_TadHeartElection").length&&c("#J_TadHeartElection").addClass("tad_small_width")},load:function(){var e=this,t=e.get("args"),a={},i=e.get("errorFn");e.get("successFn");a.sellerid=t.sellerId,a.buyerid=t.userId,a.appid=1,a.itemid=t.objectId,a.catid=t.catid,a.cna=t.cna,a.areaid="tad_first_area",g_config&&g_config.sellerDetail&&g_config.sellerDetail.show&&(a.self=1);var r=f+"/api/list";return new n({url:r,type:"get",dataType:"jsonp",data:a,timeout:3e3,error:function(){i&&i()},jsonp:"callback",success:function(t){return t?(e.set("data",t),void e.render()):void(i&&i())}})},renderRedirect:function(e){var t,a=this,i=a.get("args"),r={},d=a.get("container"),l=a.get("errorFn"),g=a.get("successFn");return r.sellerid=i.sellerId,r.itemid=i.objectId,r.buyerid=i.userId,r.catid=i.catid,r.cna=i.cna,r.areaid=i.targetId.toString(),s&&(r={}),new n({url:u,type:"get",data:r,dataType:"jsonp",timeout:3e3,jsonp:"callback",error:function(){l&&l()},success:function(a){if(!a)return void(l&&l());if(a&&!a.result)return void(l&&l());if(a&&a.result&&0==a.result.length)return void(l&&l());for(var i=0;i<e.length;i++){var r=e[i],n=c("#"+r);if(!a)return void(l&&l());var s="",m=a.result[0][r];if(m.success&&0!=m.data.length){var f={caption:m.caption,data:m.data};if(t=o.recommend,s+=t(f),"tad_first_area"==r&&(n=c(d)||n),n.html(s),n.attr({whichplan:"default"}),n.show(),g&&g(),"tad_second_area"===r){var u="//log.mmstat.com/shopflow.4?&t="+(new Date).getTime(),_=new Image;_.src=u}}else"tad_first_area"==r&&l&&l()}}})},getStyle:function(e){var t,a,i,r,n;if(!e)return"";r="";for(a in e)n=e[a],i=a.match(/[A-Z]/),i&&i.length>0&&(t=i[0],a=a.replace(t,"-"+t.toLowerCase())),r+=a+":"+n+";";return r}},{ATTRS:{args:{valueFn:function(){var e={};return e.targetId=["tad_first_area"],g_config.vdata&&g_config.vdata.viewer&&g_config.vdata.viewer.id?e.userId=g_config.vdata.viewer.id:e.userId=l.get("cna"),e.cna=l.get("cna"),e.objectId=g_config.itemId,e.sellerId=g_config.sellerId,e.shopId=g_config.shopId,e.catid=g_config.idata.item.cid,e}},data:{value:""},container:{value:""},successFn:{valueFn:function(){}},errorFn:{valueFn:function(){}}}});a.exports=_});define("kg/detail-item-recommend/0.0.10/lib/c/matching-combo/index",["kg/detail-item-recommend/0.0.10/lib/c/matching-combo/index.css","node","base","dom","kg/detail-item-recommend/0.0.10/lib/c/matching-combo/page","io","event-custom","kg/detail-item-recommend/0.0.10/lib/c/matching-combo/tpl/combo.xtpl","kg/detail-item-recommend/0.0.10/lib/c/matching-combo/tpl/comboItem.xtpl"],function(e,t,n){e("kg/detail-item-recommend/0.0.10/lib/c/matching-combo/index.css");var a=e("node"),o=e("base"),i=e("dom"),m=e("kg/detail-item-recommend/0.0.10/lib/c/matching-combo/page"),l=e("io"),c=KISSY,d=a.all,r=a.all("body"),g="loadDefaultData",s="tb-hidden",u=e("event-custom"),p=c.merge({},u.Target),f=o.extend({init:function(){this.render()},show:function(){i.removeClass(this.get("el"),s)},hide:function(){i.addClass(this.get("el"),s)},render:function(){var e=this,t=e.get("api"),n=e.get("data");p.on(g,function(e){new m({api:t,dataBox:"#J_BundleData",pageBox:"#J_BundlePage",meals:e.meals})}),r.on("load",function(t){var n=t.api,a=g_config.tadComponetCdn,o={url:n,type:"get",dataType:"jsonp",success:function(t){e.renderDefault(t)},error:function(){r.fire("track",{msg:{url:location.href,category:"recommend:request:false:matchingcombo"}});var t=e.get("errorFn");t&&t()}};a&&c.mix(o,{jsonpCallback:"fromCdn",cache:!0}),new l(o)}),e.renderDefault(n)},renderDefault:function(e){if(c.isPlainObject(e)&&e.data&&e.data.mealComponentBO){var t=this,n=t.get("container"),o=t.get("el"),i=[],m=[],l=t.get("renderDefault");l||(i=t.get("tpl"),m=e.data.mealComponentBO.meals,a.one(n).append(i({mealComponentBO:e.data.mealComponentBO})),n&&a.one(n).append(a.one(o)),t.set("renderDefault",!0)),i=t.get("tplCombo"),a.one("#J_BundleData").html(i({mealComponentBO:e.data.mealComponentBO})),t.show(),m.length&&p.fire(g,{meals:m}),window.DT&&DT.Messenger.fire("ui:tabbar:checkStick");var d=this.get("successFn");d&&d(),r.fire("loadsuccess")}else{var s=this.get("errorFn");s&&s(),r.fire("loaderror")}}},{ATTRS:{renderDefault:{value:!1},container:{value:""},errorFn:{valueFn:function(){}},successFn:{valueFn:function(){}},data:{value:""},el:{valueFn:function(){return d("#matching-combo")}},tpl:{value:e("kg/detail-item-recommend/0.0.10/lib/c/matching-combo/tpl/combo.xtpl")},tplCombo:{value:e("kg/detail-item-recommend/0.0.10/lib/c/matching-combo/tpl/comboItem.xtpl")},api:{valueFn:function(){var e=this,t=(e.get("daily"),e.get("userId")),n=e.get("itemId"),a=e.get("tadComponetCdn");return a?"//otds.alicdn.com/json/MMComponent.htm?meal=1&userId="+t+"&itemId="+n:"//detailskip.taobao.com/json/MMComponent.htm?meal=1&userId="+t+"&itemId="+n}},daily:{valueFn:function(){var e=!!~location.href.indexOf("daily");return e?"daily.taobao.net":"taobao.com"}},userId:{value:g_config.idata&&g_config.idata.seller&&g_config.idata.seller.id},itemId:{value:g_config.itemId},tadComponetCdn:{value:g_config.tadComponetCdn}}});n.exports=f});define("kg/detail-item-recommend/0.0.10/lib/c/1212/index",["kg/detail-item-recommend/0.0.10/lib/c/1212/index.css","node","base","json","kg/detail-item-recommend/0.0.10/lib/c/1212/mods/feast"],function(a,e,t){a("kg/detail-item-recommend/0.0.10/lib/c/1212/index.css");var i=(KISSY,a("node").all),s=a("base"),d=a("json"),n=a("kg/detail-item-recommend/0.0.10/lib/c/1212/mods/feast"),c=!!~location.href.indexOf("daily"),l=c?"//tte.daily.taobao.net/activity/xin12?src=3":"//xin.mai.taobao.com/activity/xin12?src=3";t.exports=s.extend({init:function(){var a=this;a.render()},render:function(){var a=this,e=a.get("data"),t=a.get("successFn"),s=a.get("errorFn"),c=a.get("container");if("undefined"==typeof e.tad_12)s&&s();else if(e.tad_12.length>0){var o=e.tad_12[0],_=o.content;if(!o.success||!_)return void(s&&s());if(_="string"==typeof _?d.parse(_):_,void 0==_.xin1212){var r=_;n.init(r,i(c))}else _.xin1212?i(c).html('<div class="tad12_guide_area" data-spm="1998223148"><div class="tad12_guide_info"></div><div class="tad12_guide_ope"><a href="'+l+'" target="_blank" class="tad12_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/17180510-277372963.htm?scm=1212.30.2.1" target="_blank" class="tad12_help_link">\u5e2e\u52a9</a></div></div>'):i(c).html('<p class="tad12_guide_success_tip">\u5927\u4fc3\u671f\u95f4(\u9884\u552e\u3001\u9884\u70ed\u53ca12.12\u5f53\u5929)\uff0c\u5982\u60a8\u6709\u5546\u54c1\u62a5\u540d\u5ba1\u6838\u6210\u529f\uff0c\u5219\u663e\u793a1212\u4e07\u80fd\u76db\u5178\uff0c\u6837\u5f0f\u5982\u4e0b:</p><div class="tad12_guide_success"><img src="//img.alicdn.com/tps/i2/TB1WN6wGFXXXXaiXXXXk00J9FXX-1124-309.png" class="tad_guide_success_sample" alt=""/></div>');t&&t()}else 0==e.tad_12.length&&(void 0!=e.xin1212?(e.xin1212?i(c).html('<div class="tad12_guide_area" data-spm="1998223148"><div class="tad12_guide_info"></div><div class="tad12_guide_ope"><a href="'+l+'" target="_blank" class="tad12_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/17180510-277372963.htm?scm=1212.30.2.1" target="_blank" class="tad12_help_link">\u5e2e\u52a9</a></div></div>'):i(c).html('<p class="tad12_guide_success_tip">\u5927\u4fc3\u671f\u95f4(\u9884\u552e\u3001\u9884\u70ed\u53ca12.12\u5f53\u5929)\uff0c\u5982\u60a8\u6709\u5546\u54c1\u62a5\u540d\u5ba1\u6838\u6210\u529f\uff0c\u5219\u663e\u793a1212\u4e07\u80fd\u76db\u5178\uff0c\u6837\u5f0f\u5982\u4e0b:</p><div class="tad12_guide_success"><img src="//img.alicdn.com/tps/i2/TB1WN6wGFXXXXaiXXXXk00J9FXX-1124-309.png" class="tad_guide_success_sample" alt=""/></div>'),t&&t()):s&&s())},resize:function(){i("#tad_first_area").parent().width()>990?i("#J_TadHeartElection").length&&i("#J_TadHeartElection").removeClass("tad_small_width"):i("#J_TadHeartElection").length&&i("#J_TadHeartElection").addClass("tad_small_width")}},{ATTRS:{data:{value:""},container:{value:""},successFn:{valueFn:function(){}},errorFn:{valueFn:function(){}}}})});