define("kg/detail-pinus-enterprise-module/6.0.6/index",["node","node","dom","io","util","event","kg/xtemplate/4.3.0/index"],function(i,t,e){var a,n,o,l=i("node"),c=i("node"),p=(i("dom"),i("io")),s=i("util"),d=(i("event"),i("kg/xtemplate/4.3.0/index"));a=function(i){"use strict";var t=l;return i=t("<style>#J_Pinus_Enterprise_Module{width:140px;color:#9b9b9b;font-weight:200;height:534px;overflow:hidden}.tuijian-module-detail-pine .yen{font-family:Arial;font-weight:400;padding-right:3px;color:#424242}.tuijian-module-detail-pine{font-size:12px;font-family:\"microsoft yahei\";font-weight:400;background-color:#fff}.tuijian-module-detail-pine .tuijian-hd{height:29px;padding-top:2px}.tuijian-module-detail-pine .tuijian-label{width:140px;height:22px;font-weight:200;font-family:tahoma,arial,\"microsoft yahei\"}.tuijian-module-detail-pine .tuijian-label .tuijian-label-line{display:inline-block;zoom:1;*display:inline;border-top:1px solid #d8d8d8;width:86px;height:0;vertical-align:middle}.tuijian-module-detail-pine .tuijian-bd{height:460px;position:relative;overflow:hidden}.tuijian-module-detail-pine .tuijian-bd .tuijian-bd-window{position:absolute;top:0;-webkit-transition:all .5s;-moz-transition:all .5s;-ms-transition:all .5s;-o-transition:all .5s;transition:all .5s}.tuijian-module-detail-pine .tuijian-item{position:relative;width:140px;float:left;background:#ffefd5;margin-bottom:20px;overflow:hidden}.tuijian-module-detail-pine .tuijian-item .off99{position:absolute;width:51px;height:16px;left:-5px;top:0;z-index:10;background:url(//img.alicdn.com/tps/i3/TB1l3tRGXXXXXaxXXXXWmLvHXXX-51-16.png) no-repeat 0 0}.tuijian-module-detail-pine .tuijian-item .icon-1111{position:absolute;right:0;bottom:23px;width:36px;height:16px;background:url(//img.alicdn.com/tps/i1/TB1AOjWGpXXXXblXFXXf81VIFXX-74-32.png) no-repeat 0 0}.tuijian-module-detail-pine .tuijian-img{overflow:hidden;width:140px;height:140px}.tuijian-module-detail-pine .pic-con{width:140px;height:140px;display:table-cell;text-align:center;vertical-align:middle}.tuijian-module-detail-pine .pic-con img{width:100%;height:100%}.tuijian-module-detail-pine .tuijian-extra{line-height:24px;position:absolute;bottom:0;background-color:#fff;filter:alpha(opacity=70);opacity:.7;height:24px;width:100%;text-align:center;color:#424242}.tuijian-module-detail-pine .tuijian-price{font-weight:200;line-height:24px;color:#424242;padding-bottom:5px}.tuijian-module-detail-pine .tuijian-bd .tuijian-item .icon-1212{position:absolute;right:0;bottom:23px;width:32px;height:16px}.tuijian-module-detail-pine .tuijian-bd .tuijian-item .icon-1212-long{position:absolute;right:0;bottom:23px;width:60px;height:16px}.tuijian-module-detail-pine .icon-1212-redpack{position:absolute;right:0;top:0;width:32px;height:80px;pointer-events:none}.tuijian-module-detail-pine .icon-1212-redpack b{position:absolute;z-index:2;right:0;bottom:0;width:32px;height:16px;background:url(//img.alicdn.com/tps/i1/TB1cXvAGpXXXXaaapXXLU3sIVXX-78-48.png) no-repeat 0 0}.tuijian-module-detail-pine .icon-1212-redpack i{position:absolute;z-index:2;left:0;top:0;bottom:16px;width:32px;background:#cd210a;opacity:.74;filter:alpha(opacity=74)}.tuijian-module-detail-pine .icon-1212-redpack s{display:block;position:relative;z-index:3;padding-top:5px;padding-left:2px;letter-spacing:2px;text-align:center;color:#fff;text-decoration:none;font-style:normal;font-family:simsun,STSong,'\u5b8b\u4f53';opacity:.7;filter:alpha(opacity=70)}.tuijian-module-detail-pine .icon-1212-redpack em{display:block;position:relative;z-index:3;text-align:center;font-family:simsun,STSong,'\u5b8b\u4f53';color:#fff}.tuijian-module-detail-pine .pic-con a{display:block}.tuijian-module-detail-pine .re-hover .icon-1212-redpack em,.tuijian-module-detail-pine .re-hover .icon-1212-redpack i,.tuijian-module-detail-pine .re-hover .icon-1212-redpack s{display:none}.tuijian-module-detail-pine .tuijian-switch{display:none}</style>").appendTo("head")}(),n=function(i){function t(){function i(){return this.containerSelector="#J_Pinus_Enterprise_Module",this.container=p.one(this.containerSelector),this.container?(this.appid=2144,this.appid_daily=19670,this.count=3,void this.render()):void p.log("\u672a\u627e\u5230J_Pinus_Enterprise_Module\u6a21\u5757\uff01")}function t(i){return"string"==typeof i&&(i=i.replace(/</g,"&lt;"),i=i.replace(/>/g,"&gt;"),i=i.replace(/'/g,"&apos;"),i=i.replace(/"/g,"&quot;")),i}function l(i){return i>99999999?parseFloat(i/1e8).toFixed(1)+"\u4ebf":i>9999?parseFloat(i/1e4).toFixed(1)+"\u4e07":parseFloat(i).toFixed(2)}function c(i,t){var e,a=!0;for(e=0;e<t.length;e++)i.hasOwnProperty(t[e])||(a=!1);return a}var p=e;p.log=function(i){window.console&&window.console.log&&console.log(i)},n.augment(i,{render:function(){var i=this,t='<div class="tb-clearfix tuijian-module tuijian-module-detail-pine"><div class="tuijian-hd clearfix"><h2 class="tuijian-label">\u770b\u4e86\u53c8\u770b <span class="tuijian-label-line"></span></h2></div><div class="tuijian-bd clearfix"><ul class="tuijian-bd-window">{{#each(list)}}<li class="tuijian-item"><div class="tuijian-img"><div class="pic-con"><a href="{{this.url}}" target="_blank" class="img-con"><img src="{{this.pic}}" title="{{this.name}}" alt="{{this.name}}" />{{{icon1212}}}</a></div></div><div class="tuijian-extra"><p class="tuijian-price"><span class="now-price"><b class="yen">&yen;</b><b class="price">{{this.price}}</b></span></p></div></li>{{/each}}</ul></div><div  class="tuijian-switch"><span class="tuijian-switchable-prev-btn">\u5411\u4e0a</span><span class="tuijian-switchable-next-btn">\u5411\u4e0b</span></div></div>',e=i.container.attr("data-sellerid"),n=i.container.attr("data-catid"),l=i.container.attr("data-shopid"),c=i.container.attr("data-itemid");if(e&&n&&c){var s="tui.taobao.com",d=i.appid;location.href.indexOf("daily")>-1&&(s="tui.daily.taobao.net",d=i.appid_daily),new a({type:"get",url:"//"+s+"/recommend?appid="+d+"&pSize=4&pNum=0",data:{shop_id:l,item_ids:c,floorId:42296},success:function(e){return e&&e.result&&e.result.length>0?(i.container.html(new o(t).render(i._formatData(e))),void i.bindSlide()):void p.log("no detail_pine data")},error:function(i,t){p.log("detail_pine module ajax error: "+i)},dataType:"jsonp",jsonp:"callback",jsonpCallback:"detail_pine",cache:!0})}},bindSlide:function(){var i=this,t=i.container.one(".tuijian-bd .tuijian-bd-window"),e=0,a=0,n=i.container.all(".tuijian-bd .tuijian-bd-window li.tuijian-item").length;i.container.one(".tuijian-switchable-prev-btn").on("click",function(i){i.preventDefault(),0!=a&&(a--,e=160*a,t.css({top:"-"+e+"px"}))}),i.container.one(".tuijian-switchable-next-btn").on("click",function(i){i.preventDefault(),n!=a+3&&(a++,e=160*a,t.css({top:"-"+e+"px"}))})},_formatData:function(i){var e,a=this,n={list:[]};if(!i.result)return n;for(;e=i.result.shift();)if(c(e,["itemName","url","pic","price","promotionPrice"])){if(e.promotionPrice&&(e.price=e.promotionPrice),e.extMap&&e.extMap.price20141212&&(e.price=e.extMap.price20141212),e.icon1212="",e.extMap&&e.extMap.dacuIcon)switch(e.extMap.dacuIcon){case"taobao":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tps/TB170BXOXXXXXbmXVXXXXXXXXXX-32-16.png" alt="">';break;case"jingxuan":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tps/TB1gYRtLpXXXXb5XXXXXXXXXXXX-72-16.png" alt="">';break;case"tmall":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tps/TB1F3p4OpXXXXXPaFXXXXXXXXXX-32-16.png" alt="">';break;case"yushou":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tps/TB1syPJKpXXXXXHapXXXXXXXXXX-118-32.png" alt="">';break;case"hanglv":e.icon1212='<img class="icon-1212" src="//gw.alicdn.com/tps/TB1_qvxNXXXXXXMaXXXXXXXXXXX-32-16.png" alt="">';break;case"xinshili":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tps/TB1lwJ5MFXXXXb8XXXXXXXXXXXX-46-16.png" alt="">';break;default:e.icon1212=""}if(e.extMap&&e.extMap.redpack20141212&&(e.icon1212='<i class="icon-1212-redpack"><s>\u8d2d\u7269\u52b5\u62b5</s><b></b><i></i><em>'+e.extMap.redpack20141212+"\u5143</em></i>"),e.auctionTags){var o=(new Date).getTime();if(15120576e5<=o&&o<15130944e5)switch(e.auctionTags){case"2882":e.icon1212='<img class="icon-1212" src="//img.alicdn.com/tfs/TB1DcsIblTH8KJjy0FiXXcRsXXa-32-16.png" alt="">';break;case"18132":e.icon1212='<img class="icon-1212" src="//gw.alicdn.com/tfs/TB1nYVya6ihSKJjy0FeXXbJtpXa-72-36.png?getAvatar=avatar" alt="">'}}if(n.list.push({name:t(e.itemName),url:t(e.url),extMap:t(e.extMap),pic:t(e.pic+"_300x300.jpg"),price:t(l(e.price)),icon1212:e.icon1212}),n.list.length>=a.count)break}return n}}),new i}var e=c,a=p,n=s,o=d;return i=t}(),o=function(i){return i=n}(),e.exports=o});