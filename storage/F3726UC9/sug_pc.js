/*! 2018 Baidu Inc. All Rights Reserved */
define("sug_pc",["require","exports","etpl","./ellipsis","etpl/tpl!./tpl/sug_item_list_pc.etpl.html"],function(require,exports){var t=require("etpl"),n=require("./ellipsis"),e=$("#kw"),i=$(".suggest-div"),l=$(".suggest-content"),r="",a="",u=!1;return exports.init=function(){function o(){$("#kw").on("click",function(t){i.show();var n=$("#kw").val();if(r=n,n=n.trim(),a=n,n.length>0)$(".input-clear").show(),s(n)}),$("body").on("click",function(){i.hide()})}function c(){$("#kw").on("input",function(t){var n=$("#kw").val();if(n=n.trim(),a=n,0==n.length)i.hide();else s(n)})}function s(t){var n={};n.mainkey=t,$.get("/hanyu/ajax/sugs",n,function(t){if(a==n.mainkey&&a.length>0)i.show(),h(t,n)})}function h(e,r){if(r.mainkey==a){if(null==e||null==e.data)return l.html(""),void i.hide();if(null==e.data.ret_array||e.data.ret_array.length<=0)return l.html(""),void i.hide();if(e.data.ret_array.length>0){var u=require("etpl/tpl!./tpl/sug_item_list_pc.etpl.html"),o=new t.Engine;o.compile(u);var c=o.render("sug_list",e.data);l.html(c),g(a),n.autoParse(),i.show(),f()}else l.html(""),i.hide()}}function f(){$(".suggest-content a").on("click",function(){u=!0,window._hmt.push(["_trackEvent","搜索","搜索sug","搜索sug点击-PC"])})}function g(t){$(".check-red").each(function(n,e){var i=new RegExp("("+t+")","g");e.innerHTML=e.textContent.replace(i,"<em>$1</em>"),$(e).removeClass("check-red")})}o(),c(),window.form.onsubmit=function(){var t=e.val();if(null==(t=t.trim())||""==t)return!1}},exports});