webpackJsonp([0],{1193:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(1),d=a(p),m=n(0),f=a(m),h=n(6),b=a(h),y=n(22),v=n(14),E=a(v),C=n(1194),g=a(C),O=n(827),_=n(828),w=n(42),k="请选择举报理由",P="举报",N=function(e){return e&&e.isBlocking},T=function(e){function t(){i(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleSubmit=function(t){var n=t.reason,a=t.customReason,r=e.props,o=r.onClose,i=r.urlToken,l=r.type;e.props.doReport(i,l,n,a),o()},e.handleContentChange=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;e.setState({title:t,subtitle:n})},e.handleBlockUser=function(t){e.props.updateUserBlocking&&e.props.updateUserBlocking(t,!0)},e.handleClose=function(){e.props.zaEnabled&&b.default.trackEvent(e.container,{action:"Ok"},{button:{text:"知道了"}}),e.props.onClose()},e.state={title:P,subtitle:k},e}return s(t,e),u(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.talker,n=e.talkerId;n&&(N(t)?t.isBlocking||this.setState({blockVisabled:!0}):this.props.loadProfile(n))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.talker,n=e.talker;N(t)||!N(n)||n.isBlocking||this.setState({blockVisabled:!0})}},{key:"componentDidUpdate",value:function(e){if(!e.shown&&this.props.shown){var t=this.props,n=t.type,a=t.id;b.default.setModule(this.container,{module:"ReportDialog"},{card:{card_type:"Content",content:o({type:(0,_.convertType)(n)},"comment"===n?"id":"token",String(a))}})}}},{key:"render",value:function(){var e=this,t=(0,y.omit)(this.props,"onClose"),n=t.shown,a=r(t,["shown"]),o=this.state,i=o.title,l=o.subtitle,s=o.blockVisabled,u=(0,O.selectPairs)(a,Object.keys(E.default.propTypes)),p=u.selectedProps,d=u.dropedProps;return f.default.createElement(E.default,c({title:i,subtitle:l,onClose:this.handleClose,className:"ReportModal"},p),n&&f.default.createElement(g.default,c({ref:function(t){e.container=t},onSubmit:this.handleSubmit,blockVisabled:s,onClose:this.handleClose,onContentChange:this.handleContentChange},d)))}}]),t}(m.Component);T.propTypes={onClose:d.default.func.isRequired,type:d.default.oneOf(w.ENTITY_TYPES).isRequired,urlToken:d.default.oneOfType([d.default.string,d.default.number]).isRequired,shown:d.default.bool.isRequired,talkerId:d.default.string,isColumnArticle:d.default.bool,isTipjarEnabled:d.default.bool,loadProfile:d.default.func,updateUserBlocking:d.default.func,doReport:d.default.func.isRequired,zaEnabled:d.default.bool},T.defaultTypes={zaEnabled:!1},t.default=T},1194:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(1),d=a(p),m=n(0),f=a(m),h=n(1195),b=n(1196),y=a(b),v=function(e){function t(){var e,n,a,r;i(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.filterNodes=function(e,t,n){var a=e.filter(function(e){return-1!=["infringement","repost","oneself","enterprise","fake"].indexOf(e.reason)||0===e.id||("question"!==t||-1==["closed","suggested","evaluated","locked"].indexOf(n)||0===e.id)&&("member"!==t||-1==["ban","hang"].indexOf(n)||"profile"===e.reason)});return 1===a.length&&0===a[0].id&&(a=[]),a},r=n,l(a,r)}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.status,a=o(e,["type","status"]),i=void 0;return i="message"===t?h.NODES_FOR_MESSAGE:"member"===t?h.NODES_FOR_MEMBER:h.NODES.filter(function(e){return!e.types||e.types.includes(t)}),i=this.filterNodes(i,t,n),f.default.createElement(y.default,c({nodes:i.reduce(function(e,t){return c({},e,r({},t.id,t))},{})},a,{type:t}))}}]),t}(m.Component);v.propTypes={type:d.default.string.isRequired},t.default=v},1195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NODES=[{id:0,text:"举报",childIds:[1,2,3,4,5,21,7]},{id:1,text:"低质问题",types:["question"],childIds:[23,33,34,15,35,27,22,28]},{id:2,text:"垃圾广告信息",reason:"spam",copywriter:{title:"举报说明",placeholder:"举报详细说明（选填）",isRequired:!1},disabled:!0},{id:3,text:"不友善行为",types:["answer","comment","article","pin","book_review"],childIds:[40,41]},{id:4,text:"有害信息",childIds:[19,30,39,26,18]},{id:5,text:"涉嫌侵权",childIds:[20,29,12],reason:"infringement",disabled:!0},{id:6,types:[]},{id:7,text:"其他",reason:"old",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0},{id:8,reason:"direction"},{id:9,reason:"tipjar"},{id:10,reason:"mention"},{id:11,reason:"privacy",disabled:!0},{id:12,reason:"enterprise",disabled:!0},{id:13,reason:"copy",copywriter:{title:"原文链接或出处",placeholder:"填写原文链接或描述内容出处（必填）"},disabled:!0},{id:14,reason:"defamation",disabled:!0},{id:15,reason:"abuse"},{id:16,reason:"intention"},{id:17,reason:"spam"},{id:18,reason:"illegality",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0},{id:19,reason:"politics"},{id:20,reason:"repost",copywriter:{title:"举报说明",placeholder:"原文链接或补充说明（必填）"},types:["answer","article","pin","book_review"],disabled:!0},{id:21,reason:"temptation",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0,types:["answer","comment","article"]},{id:22,reason:"personal"},{id:23,reason:"ambiguity"},{id:24,reason:"worthless"},{id:25,reason:"rumour"},{id:26,reason:"suicide",types:["question","answer","article","pin","book_review","comment"]},{id:27,reason:"medicine"},{id:28,reason:"superstition"},{id:29,reason:"oneself",disabled:!0},{id:30,reason:"porn"},{id:31,reason:"pirate"},{id:32,reason:"invalid"},{id:33,reason:"subjective"},{id:34,reason:"rumour"},{id:35,reason:"provoke"},{id:36,reason:"edit"},{id:37,reason:"harassment"},{id:38,reason:"hatred"},{id:39,reason:"untruth",types:["answer","comment","article","pin","book_review"],copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0},{id:40,reason:"abuse",text:"骚扰、辱骂、歧视等"},{id:41,reason:"unfriendly",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0}],t.NODES_FOR_MESSAGE=[{id:0,text:"举报",childIds:[1,2,3]},{id:1,reason:"abuse"},{id:2,reason:"harassment"},{id:3,reason:"spam"}],t.NODES_FOR_MEMBER=[{id:0,text:"举报",childIds:[1,4,6,7]},{id:1,text:"冒充我或他人",childIds:[8,9],reason:"fake",disabled:!0},{id:2,reason:"abuse",text:"发过辱骂我或他人的内容"},{id:3,reason:"illegality",text:"发过违反法律法规的内容"},{id:4,reason:"spam",text:"垃圾广告帐号"},{id:5,reason:"politics",text:"发过政治敏感内容"},{id:6,reason:"profile",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0},{id:7,reason:"old",text:"其他",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},disabled:!0},{id:8,text:"冒充我",reason:"oneself",disabled:!0},{id:9,reason:"impersonate",copywriter:{title:"举报说明",placeholder:"举报详细说明（必填）"},text:"冒充他人",disabled:!0}]},1196:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),p=a(u),d=n(0),m=a(d),f=n(2),h=a(f),b=n(3),y=a(b),v=n(39),E=n(6),C=a(E),g=n(25),O=a(g),_=n(267),w=n(1197),k=a(w),P=n(1198),N=a(P),T=n(1199),R=a(T),S=n(1200);n(1201);var I=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkCustomReasonContent=function(){var e=n.state,t=e.activeId,a=e.customReason,r=n.props.nodes,o=r[t].copywriter;if((14===t||24===t||Boolean(o))&&a){var i=(0,S.isCustomReasonLegal)(a),l=i.isLegal,s=i.errorReason;if(!l)return n.setState({errorText:s}),!1}return!0},n.state={isBlock:!1,blockChecked:!1,activeId:0,parentId:null,selectedId:null,hasError:!1,errorText:"",isMobile:!1},n.menuItems={},n.handleItemSelect=n.handleItemSelect.bind(n),n.handleSubMenuEnter=n.handleSubMenuEnter.bind(n),n.handleDetailInput=n.handleDetailInput.bind(n),n.handleBackClick=n.handleBackClick.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleSubmitAppeal=n.handleSubmitAppeal.bind(n),n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=(0,O.default)(navigator.userAgent);this.setState({isMobile:e.Mobile})}},{key:"componentWillUpdate",value:function(e,t){var n=this.state.activeId,a=t.activeId,r=this.props,o=r.nodes,i=r.onContentChange;if(a!==n){var l=o[a],s=l.reason,c=l.text,u=l.childIds,p=l.copywriter;i(c||_.ReportReasons[s],p&&p.title||(u?void 0:""))}}},{key:"handleItemSelect",value:function(e){var t=this.selectedId===e?null:e;this.setState({selectedId:t}),t&&this.props.zaEnabled&&C.default.trackEvent(this.menuItems[t],{action:"Select",element:"Menu"},{report:{id:e}})}},{key:"handleSubMenuEnter",value:function(e){this.setState(function(t){var n=t.activeId;return{activeId:e,parentId:n,selectedId:null}}),this.props.zaEnabled&&C.default.trackEvent(this.menuItems[e],{action:"Expand",element:"Menu"},{report:{id:e}})}},{key:"isSubmitEnabled",value:function(){var e=this.state,t=e.selectedId,n=e.activeId,a=e.customReason,r=this.props.nodes;return t||(Boolean(r[n].copywriter)||14===n||24===n)&&(!1===r[n].copywriter.isRequired||a)}},{key:"handleDetailInput",value:function(e){this.setState({customReason:e,errorText:""})}},{key:"handleBackClick",value:function(){var e=this.props.nodes,t=this.state.parentId,n=Object.keys(e).find(function(n){var a=e[n].childIds;return a&&a.includes(t)});this.setState({activeId:t,parentId:n&&Number(n),selectedId:null,hasWarning:!1,customReason:"",errorText:""}),this.props.zaEnabled&&C.default.trackEvent(this,{action:"Back",element:"Button"},{report:{id:this.state.activeId}})}},{key:"handleSubmitAppeal",value:function(){var e="",t=this.state.activeId,n=this.props,a=n.type,r=n.urlToken,o=n.nodes;"enterprise"===o[t].reason||13===t?e="org":"oneself"!==o[t].reason&&37!==t||(e="people"),window.open("//www.zhihu.com/account/complaints/"+e+"/"+a+"/"+r)}},{key:"handleSubmit",value:function(){var e=this.state,t=e.selectedId,n=e.customReason,a=e.activeId,r=e.blockChecked;if(this.isSubmitEnabled()&&this.checkCustomReasonContent()){var o=this.props,i=o.nodes,l=o.onBlockUser,s=o.talkerToken,c=o.onSubmit,u=i[t||a],p=u.reason,d=u.id;c({reason:p,customReason:n}),r&&l(s),this.props.zaEnabled&&C.default.trackEvent(this,{action:"Report",element:"Button"},{report:{id:d}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.nodes,a=r(t,["nodes"]),o=this.state,i=o.activeId,l=o.parentId,c=o.selectedId,u=o.blockVisibled,p=o.blockChecked,d=o.errorText,f=o.isMobile,b=n[i],E=b.reason,C=b.childIds,g=b.copywriter,O=Boolean(C),_=14===i||24===i||Boolean(g),w=O&&m.default.createElement("div",{className:"ReportMenu-inner ReportMenu-options"}," ",C.map(function(e){return n[e]}).filter(function(e){return e&&(!e.shouldShow||e.shouldShow(a))}).map(function(t){return m.default.createElement(k.default,s({ref:function(n){e.menuItems[t.id]=n},key:t.id},t,{isSelected:c===t.id,onSubMenuEnter:e.handleSubMenuEnter,onItemSelect:e.handleItemSelect}))})," ")||_&&m.default.createElement(R.default,{onDetailInput:this.handleDetailInput,copywriter:g,errorText:d,checkCustomReasonContent:this.checkCustomReasonContent})||m.default.createElement(N.default,{isMobile:f,reason:E}),P=O&&u&&m.default.createElement("label",{className:"ReportMenu-check",htmlFor:"block"},m.default.createElement("input",{type:"checkbox",name:"block",checked:p,onChange:function(t){return e.setState({blockChecked:t.target.checked})}}),"同时将此人屏蔽"," ");return m.default.createElement("div",{className:(0,h.default)("ReportMenu",{"ReportMenu-mobile":f})}," ",w," ",m.default.createElement(v.ModalButtonGroup,{direction:"horizontal"}," ",P," ","number"==typeof l&&m.default.createElement(y.default,{onClick:this.handleBackClick}," 返回 ")," ",O||_?m.default.createElement(y.default,{className:"ReportMenu-button",disabled:!this.isSubmitEnabled(),onClick:this.handleSubmit,color:"blue",preset:"primary"},"举报"," "):!f&&m.default.createElement(y.default,{onClick:this.handleSubmitAppeal,preset:"primary",color:"blue"},"进入诉求提交页面"," ")," ")," ")}}]),t}(d.Component);I.propTypes={nodes:p.default.object.isRequired,onContentChange:p.default.func.isRequired,onSubmit:p.default.func.isRequired,talkerToken:p.default.string,isColumnArticle:p.default.bool,isTipjarEnabled:p.default.bool,errorText:p.default.string},t.default=I},1197:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=a(s),u=n(0),p=a(u),d=n(9),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(267),h=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleClick=e.handleClick.bind(e),e}return i(t,e),l(t,[{key:"handleClick",value:function(){var e=this.props,t=e.id,n=e.reason,a=e.disabled,r=e.onSubMenuEnter,o=e.onItemSelect;n&&!a?o(t):r(t)}},{key:"render",value:function(){var e=this.props,t=e.reason,n=e.text,a=e.disabled,r=e.isSelected,o=e.id,i=n||f.ReportReasons[t];return Boolean(t&&!a)?p.default.createElement("label",{className:"ReportMenu-item",htmlFor:t},p.default.createElement("div",{className:"ReportMenu-itemValue needsclick"},i),p.default.createElement("input",{className:"ReportMenu-itemCheck",type:"radio",name:"report",value:o,id:t,checked:r,onChange:this.handleClick}),p.default.createElement(m.CheckCircle,{size:18,className:"ReportMenu-itemCheckIcon",name:"checkRound"})):p.default.createElement("button",{className:"ReportMenu-item",onClick:this.handleClick},p.default.createElement("span",{className:"ReportMenu-itemValue"},i),p.default.createElement(m.ArrowRight,{size:18}))}}]),t}(u.Component);h.propTypes={id:c.default.number.isRequired,reason:c.default.string,text:c.default.string,disabled:c.default.bool,isSelected:c.default.bool,onSubMenuEnter:c.default.func.isRequired,onItemSelect:c.default.func.isRequired},t.default=h},1198:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=a(s),u=n(0),p=a(u),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.reason,n=e.isMobile;switch(t){case"oneself":return p.default.createElement("div",{className:"ReportMenu-inner"},p.default.createElement("div",{className:"ReportMenu-paragraph"},"当您发现知乎上有关于您个人的侵权内容时，您可通过此渠道向知乎提交举报诉求。"),p.default.createElement("div",{className:"ReportMenu-paragraph"},"根据",p.default.createElement("a",{className:"ReportMenu-link",href:"https://www.zhihu.com/terms#sec-report",target:"_blank",rel:"noopener noreferrer"},"知乎侵权举报规范"),"，您需要向我们提交您的个人信息，其中包括身份证明。如您确认已准备齐全，",n?p.default.createElement("span",null,p.default.createElement("strong",null,"请到桌面版网页进行诉求提交。")):p.default.createElement("span",null,"可点击下方按钮进入诉求提交页。")));case"privacy":return p.default.createElement("div",{className:"ReportMenu-inner"},p.default.createElement("div",{className:"ReportMenu-paragraph"},"您好，当您发现知乎上有泄漏您隐私的内容时，您可向知乎进行举报。 请您把以下内容通过邮件发送到 ",p.default.createElement("a",{className:"ReportMenu-link",href:"mailto:i@zhihu.com"},"i@zhihu.com")," 邮箱，我们会尽快处理。"),p.default.createElement("ul",{className:"ReportMenu-paragraph"},p.default.createElement("li",null,"1. 您认为哪些内容泄露了您的隐私？（请在邮件中列出您举报的内容、链接地址，并给出简短的说明）"),p.default.createElement("li",null,"2. 您是谁？（身份证明材料，可以是身份证或护照等证件）")),p.default.createElement("div",{className:"ReportMenu-paragraph ReportMenu-paragraph--light"},"邮件格式请参考",p.default.createElement("a",{className:"ReportMenu-link--light",href:"https://www.zhihu.com/terms#sec-report",target:"_blank",rel:"noopener noreferrer"},"这里"),"；"));case"enterprise":return p.default.createElement("div",{className:"ReportMenu-inner"},p.default.createElement("div",{className:"ReportMenu-paragraph"},"当您发现知乎上有关于您企业的侵权等内容时，知乎建议您先尝试与作者沟通解决问题。 如果您无法联系到作者，您也可通过此渠道向知乎提出诉求。"),p.default.createElement("div",{className:"ReportMenu-paragraph"},"根据",p.default.createElement("a",{className:"ReportMenu-link",href:"https://www.zhihu.com/terms#sec-report",target:"_blank",rel:"noopener noreferrer"},"知乎侵权举报规范"),"，您需要向我们提交您的个人信息，其中包括身份证明。如您确认已准备齐全，",n?p.default.createElement("span",null,p.default.createElement("strong",null,"请到桌面版网页进行诉求提交。")):p.default.createElement("span",null,"可点击下方按钮进入诉求提交页。")));case"defamation":return p.default.createElement("div",{className:"ReportMenu-inner"},p.default.createElement("div",{className:"ReportMenu-paragraph"},"您好，当您发现知乎上有诽谤您的内容时，您可以向知乎进行举报。 请您把以下内容通过邮件发送到",p.default.createElement("a",{className:"ReportMenu-link",href:"mailto:i@zhihu.com"}," ","i@zhihu.com"," "),"邮箱，我们会尽快处理。"),p.default.createElement("ul",{className:"ReportMenu-paragraph"},p.default.createElement("li",null,"1. 您举报的内容以及侵犯了您什么权益？（请在邮件中列出您举报的内容、链接地址，并给出简短的说明）"),p.default.createElement("li",null,"2. 您是谁？（身份证明材料，可以是身份证或护照等证件）")),p.default.createElement("div",{className:"ReportMenu-paragraph ReportMenu-paragraph--light"},"邮件格式请参考 ",p.default.createElement("a",{className:"ReportMenu-link--light",href:"https://www.zhihu.com/terms#sec-report",target:"_blank",rel:"noopener noreferrer"},"这里")," ；"));default:return null}}}]),t}(u.Component);d.propTypes={reason:c.default.string.isRequired},t.default=d},1199:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=a(s),u=n(0),p=a(u),d=n(48),m=a(d),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.copywriter.placeholder,n=e.onDetailInput,a=e.errorText,r=e.checkCustomReasonContent;return p.default.createElement("div",{className:"ReportMenu-inner"},p.default.createElement(m.default,{multiline:!0,grey:!0,rows:5,className:"ReportMenu-textarea",placeholder:t,onChange:function(e){return n(e.target.value)},onBlur:r}),p.default.createElement("div",{className:"ReportMenu-errorText"},a))}}]),t}(u.Component);f.propTypes={onDetailInput:c.default.func.isRequired,copywriter:c.default.object,errorText:c.default.string},t.default=f},1200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomReasonLegal=void 0;var a=n(267);t.isCustomReasonLegal=function(e){var t=/[\u4e00-\u9fa5a-zA-Z0-9]/;return e.length>150?{isLegal:!1,errorReason:a.ReportMessage.contentTooLong}:t.test(e)?{isLegal:!0,errorReason:""}:{isLegal:!1,errorReason:a.ReportMessage.contentIllegal}}},1201:function(e,t){},1215:function(e,t){},1216:function(e,t){},1218:function(e,t){},1219:function(e,t){},1220:function(e,t){},1221:function(e,t){},1222:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return void 0===t&&e&&(t=e,e=0),Array(Math.floor((t-e)/n)+1).fill().map(function(t,a){return a*n+e})}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){switch(e){case"answer":return Object(ne.c)(t);case"article":return Object(ae.b)(t);default:return null}}function y(e,t){var n=t.parent,a=t.parent,r=a.type,o=a.id,i=t.status,l=t.order,s=t.byComment,c=t.commentPattern,u=e.entities,p=e.comments,d=r+"_"+o,m=p.parent,f=p.pagination;"reviewing"===i&&(f=p.reviewing),"reverse"===l&&"open"===i&&(f=p.reverse);var h=[],b=p.collapsed[d]||{};b&&b.ids&&b.ids.length>0&&(h=b.ids.map(function(e){return u.comments[e]}));var y=f[d]||{isPrevDrained:!1,isFetching:!1,isDrained:!1,ids:[]},v=y.isFetching,E=y.isPrevDrained,C=y.isDrained,g=y.ids,O=y.newIds,_=void 0===O?[]:O;return{isFetching:v,isPrevDrained:E,isDrained:C,totals:y.totals,comments:("bottom"!==c?g:_).map(function(e){return u.comments[e]}),collapsedInfo:b,collapsedComments:h,targetComment:u.comments[s],parent:de({},n,m[d])}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){var n=t.commentId,a=e.entities.comments,r=e.comments.conversation,o=r[n]||{isFetching:!1,isDrained:!1,ids:[]};return{isFetching:o.isFetching,isDrained:o.isDrained,comments:o.ids.map(function(e){return a[e]}),openComment:a[n]}}function O(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var P,N,T,R,S,I,M,j,L,B=n(1),A=n.n(B),x=n(0),F=n.n(x),D=n(4),q=n(2),U=n.n(q),W=n(49),z=n(876),K=n(50),V=n(70),Y=n.n(V),H=n(11),Q=n(55),G=n(3),J=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Z=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.handleClick=function(){var e=a.props;(0,e.clickCallback)(e.page)},i=n,o(a,i)}return i(t,e),J(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,a=e.className;return F.a.createElement(G.default,{preset:"plain",className:U()("PaginationButton",{"PaginationButton--current":n},a),onClick:this.handleClick,disabled:n},t)}}]),t}(x.Component),X=(n(877),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),$=(N=P=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),X(t,[{key:"render",value:function(){var e=this.props,t=e.current,n=e.total,a=e.clickCallback,r=e.className,o=this.constructor.getPagerList(t,n);return F.a.createElement("div",{className:U()("Pagination",r)},1!==t&&1!==n&&F.a.createElement(Z,{className:"PaginationButton-prev",clickCallback:a,text:"上一页",page:t-1}),o.map(function(e,n){return Number(e)?F.a.createElement(Z,{clickCallback:a,text:e,page:e,key:n,isCurrent:t===e}):F.a.createElement("span",{key:n,className:"PaginationButton PaginationButton--fake"},e)}),t!==n&&F.a.createElement(Z,{className:"PaginationButton-next",clickCallback:a,text:"下一页",page:t+1}))}}],[{key:"getPagerList",value:function(e,t){return t<6?a(1,t):e>=t-2?[1,"..."].concat(a(t-3,t)):e<=3?a(1,4).concat(["...",t]):[1,"..."].concat(a(e-1,e+1)).concat(["...",t])}}]),t}(x.Component),P.propTypes={current:A.a.number,total:A.a.number,clickCallback:A.a.func},P.defaultProps={current:1,total:1,clickCallback:function(){}},N),ee=n(20),te=n(12),ne=n(59),ae=n(60),re=n(166),oe=n(269),ie=n(271),le=n(160),se=(n(1215),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),ce=function(e){function t(){return u(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),se(t,[{key:"render",value:function(){var e=this.props.onRef;return F.a.createElement("div",{className:"Comments-pattern-loading",ref:e},F.a.createElement(le.a,null))}}]),t}(x.PureComponent),ue=n(273),pe=(n(1216),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},me=(R=T=function(e){function t(e,n){m(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={collapsed:!0,current:1,packupButtonStatus:!1,packupButtonLeft:0},a.handleOpenCollapsed=function(){a.setState({collapsed:!1}),a.load(a.props,!1,!0)},a.createOnRef=Y()(function(e){return function(t){var n=a.props.byComment;e===Number(n)&&(a.targetCommentEl=t)}}),a.handlePaginationClick=function(e){var t=a.props.onPaginationClick,n=a.state.current;t&&t(n,e),a.commentsElement.scrollIntoView(),a.setState({current:e}),a.loadByPagination(e)},a.renderComment=function(e){var t=a.props,n=t.parent,r=n.type,o=n.author;o=void 0===o?{isOrg:!1}:o;var i=o.isOrg,l=t.isMobile,s=t.parent,c=t.commentNeedsReview,u=t.onShowConversation,p=t.status,d=t.onItemLike,m=t.onItemDelete,f=t.onItemCollapse,h=t.onItemDislike,b=t.onItemApprove,y=t.canOperateItem,v=t.commentPattern;return F.a.createElement(ie.a,{key:e.id,isMobile:l,comment:e,onRef:a.createOnRef(e.id),status:p,type:r,parent:s,canOperate:y,commentNeedsReview:c,onShowConversation:u,ownerAuthorIsOrg:i,onLike:d,onReply:a.addComment,onFeature:a.featureItem,onDelete:m,onCollapse:f,onDislike:h,onApprove:b,commentPattern:v})},a.renderNormalComments=function(e){var t=a.state.collapsed,n=a.props.byComment,r=[];if(a.lastFeaturedIndex=0,e.length>0){var o=e[0].featured,i=!1;e.forEach(function(l,s){if(n||!l.collapsed){var c=e[s-1];if(!l.collapsed||(c&&c.collapsed||r.push(a.renderCollapsedDivider()),!t)){r.push(a.renderComment(l));var u=e[s+1];o&&!i&&l.featured&&(!u||!u.featured)&&(i=!0,a.lastFeaturedIndex=s,r.push(F.a.createElement("div",{className:"CommentList-divider",key:"divider-featured"},F.a.createElement("div",{className:"CommentList-dividerLine"}),F.a.createElement("div",{className:"CommentList-dividerText"},"以上为精选评论",F.a.createElement(H.a,{className:"CommentList-questionMark",name:"questionMark","data-tooltip":"精选评论包含回答作者推荐的评论和部分高赞评论"})))))}}})}return r},a.renderCollapsedComments=function(){var e=[],t=a.props.collapsedComments;return a.state.collapsed||!t||t.length<=0?[]:(e.push(t.map(function(e){return a.renderComment(e)})),e)},a.renderComments=function(e){return e.map(a.renderComment)},a.load=a.load.bind(a),a.loadByPagination=a.loadByPagination.bind(a),a.addComment=a.addComment.bind(a),a.featureItem=a.featureItem.bind(a),a.handleScroll=a.handleScroll.bind(a),a}return h(t,e),pe(t,[{key:"componentDidMount",value:function(){this.subscription=Object(K.subscribe)("scroll",this.handleScroll);var e=this.props,t=e.byComment,n=e.commentPattern,a=e.parent.adminClosedComment,r=this.state.current;t&&this.scrollToTarget(),"bottom"!==n||a||(this.loadByPagination(r),this.commentsWithPaginationEl&&this.setState({packupButtonLeft:this.commentsWithPaginationEl.getBoundingClientRect().right-16}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.order,a=t.status,r=t.targetComment,o=t.commentPattern;n===e.order&&a===e.status||("bottom"===o?(this.setState({current:1}),this.loadByPagination(1,e)):this.load(e),this.setState({collapsed:!0}));var i=e.targetComment;!r&&i&&this.setState({collapsed:!i.collapsed})}},{key:"componentDidUpdate",value:function(e){!e.comments.length&&this.props.comments.length&&this.props.byComment&&this.scrollToTarget()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(te.e)(te.c)),this.subscription&&this.subscription.unsubscribe()}},{key:"load",value:function(e,t,n){if(!this.props.isFetching&&!this.props.parent.adminClosedComment){var a=e||this.props,r=a.order,o=a.byComment,i=a.status,l=a.parent,s=l.id,c=l.type,u=a.dispatch,p=a.commentPattern;if(a.needLoadCommentPermission&&u(b(c,s)),n){u(Object(W.e)(c,s,{order:r,isPrevious:t,byComment:o,status:"collapsed",commentPattern:p},!0))}else u(Object(W.e)(c,s,{order:r,isPrevious:t,byComment:o,status:i,commentPattern:p}))}}},{key:"addComment",value:function(e,t){var n=this.props,a=n.parent,r=a.id,o=a.type,i=n.dispatch,l=[o,r,e];t&&(l[3]=t.id),i(W.a.apply(void 0,l))}},{key:"featureItem",value:function(e){this.props.onItemFeature(e,this.lastFeaturedIndex)}},{key:"handleScroll",value:function(){if(this.commentsElement&&this.commentsWithPaginationEl){var e=window.innerHeight,t=this.state.packupButtonStatus,n=this.commentsWithPaginationEl.getBoundingClientRect(),a=n.top,r=n.bottom,o=n.height;!t&&o>500&&r>e&&a<0?this.setState({packupButtonStatus:!0}):t&&(o<=500||r<=e||a>=0)&&this.setState({packupButtonStatus:!1})}}},{key:"scrollToTarget",value:function(){var e=this.targetCommentEl,t=this.listEl;if(t&&e){var n=e.getBoundingClientRect(),a=n.top,r=n.height,o=t.getBoundingClientRect(),i=o.top,l=o.height;this.listEl.scrollTop+=a-i-(l-r)/2,e.classList.add("CommentItem--highlighted"),setTimeout(function(){return e.classList.remove("CommentItem--highlighted")},2e3)}}},{key:"loadByPagination",value:function(e,t){var n=t||this.props,a=n.order,r=n.byComment,o=n.status,i=n.parent,l=i.id,s=i.type,c=n.dispatch,u=n.commentPattern;n.needLoadCommentPermission&&c(b(s,l)),c(Object(W.e)(s,l,{order:a,isPrevious:!1,byComment:r,status:o,commentPattern:u,current:e}))}},{key:"renderCollapsedDivider",value:function(){var e=this.props,t=e.isDrained,n=e.parent.collapsedCounts;return!t||n<=0?[]:this.state.collapsed?F.a.createElement("div",{className:"CommentList-action",key:"collapsed"},F.a.createElement("div",{className:"CommentList-expendCollapseButton"},F.a.createElement("span",{onClick:this.handleOpenCollapsed},Object(ee.b)(n)," 条评论被折叠"),"（",F.a.createElement("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer"},"为什么？"),"）")):F.a.createElement("div",{className:"CommentList-divider",key:"divider-collapsed"},F.a.createElement("div",{className:"CommentList-dividerLine"}),F.a.createElement("div",{className:"CommentList-dividerText"},Object(ee.b)(n)," 条评论被折叠（",F.a.createElement("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer"},"为什么？"),"）"))}},{key:"renderCollapsedInfiLoader",value:function(){var e=this,t=this.state.collapsed;if(t)return[];var n=this.props.collapsedInfo;n=void 0===n?{}:n;var a=n.isFetching,r=n.isPrevDrained,o=n.isDrained;return F.a.createElement(Q.default,{className:"CommentList",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:a,isPrevDrained:r,isDrained:o,onLoad:function(n){return e.load(e.props,n,!t)},placeholder:F.a.createElement(Q.PlaceHolder,{className:"CommentItem",small:!0})},this.renderCollapsedComments())}},{key:"renderPatternContent",value:function(e){var t=this,n=this.props,a=n.isFetching,r=n.parent.adminClosedComment,o=n.byComment,i=n.status,l=n.order,s=n.totals,c=n.handlePackupButton,u=n.apps,p=Math.ceil(s/20),d=this.state,m=d.current,f=d.packupButtonStatus,h=d.packupButtonLeft;return r?null:a?F.a.createElement(ce,{onRef:function(e){t.commentsWithPaginationEl=e}}):F.a.createElement("div",{ref:function(e){t.commentsWithPaginationEl=e}},F.a.createElement("div",{className:"CommentList"},"normal"===l&&"open"===i?this.renderNormalComments(e):this.renderComments(e)),p>1&&F.a.createElement($,{current:m,className:"comments-pagination",total:p,clickCallback:this.handlePaginationClick}),!o&&this.renderCollapsedDivider(),!o&&this.renderCollapsedInfiLoader(),F.a.createElement(z.CSSTransitionGroup,{transitionName:"Comments-Packup-Button",transitionEnterTimeout:300,transitionLeaveTimeout:300},f&&"column"!==u&&F.a.createElement("button",{onClick:c,className:"Comments-Packup-Button",style:{left:h}},"收起评论",F.a.createElement(H.a,{name:"arrow"}))))}},{key:"renderModalContent",value:function(e){var t=this,n=this.props,a=n.collapsedInfo,r=n.parent.adminClosedComment,o=n.status,i=n.order,l=n.byComment,s=this.state.collapsed,c=s?this.props:a,u=c.isFetching,p=c.isDrained,d=c.isPrevDrained;if(p&&e.length<=0||r)return F.a.createElement("div",{className:"Comments-empty"},F.a.createElement(re.a,{entityType:"comments"}));var m={getContainer:function(e){return e}};return F.a.createElement(Q.default,de({className:"CommentList",onRef:function(e){t.listEl=e},isLocal:!0,isLoading:u,isPrevDrained:d,isDrained:p,onLoad:function(e){return t.load(t.props,e,!s)},placeholder:F.a.createElement(Q.PlaceHolder,{className:"CommentItem",small:!0})},m),"normal"===i&&"open"===o?this.renderNormalComments(e):this.renderComments(e),!l&&this.renderCollapsedDivider(),!l&&this.renderCollapsedComments())}},{key:"renderCommentEdit",value:function(){var e=this.props,t=e.parent,n=t.canComment;n=void 0===n?{status:!0}:n;var a=n.status,r=n.reason,o=t.author;o=void 0===o?{isOrg:!1}:o;var i=o.isOrg,l=t.type,s=t.id,c=t.adminClosedComment,u=t.questionType,p=e.byComment,d=e.isAutoblur,m=e.commentNeedsReview,f=c?"当前内容暂时无法评论":r,h=d?!d:!p;return a&&!c?F.a.createElement(oe.a,{className:"Comments-footer",type:l,id:s,commentNeedsReview:m,onSubmit:this.addComment,autoFocus:h,ownerAuthorIsOrg:i,ownerAuthorIsBrand:"commercial"===u}):F.a.createElement("div",{className:U()("Comments-disabledText",{"Comments-disabledText--fixed":void 0})},F.a.createElement("div",{className:"Comments-disabledReason"},f))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.isAuthor,r=t.comments,o=t.commentPattern,i=t.parent,l=i.author;l=void 0===l?{isOrg:!1}:l;var s=l.isOrg,c=i.commentPermission,u=i.reviewingCounts,p=i.commentCount,d=i.adminClosedComment,m=t.totals,f=t.status,h=t.order,b=t.onStatusChange,y=t.apps,v=t.onOrderChange,E=t.targetLink,C=r.filter(function(e){return!e.isDelete}),g="censor"===c&&a,O=g?{isCommentReviewer:g,onStatusChange:b,status:f,reviewingCounts:u}:{status:f},_=U()({Comments:!0,"Comments--withEditor":!0,"Comments-withPagination":"bottom"===o},n);return F.a.createElement("div",{className:_,ref:function(t){e.commentsElement=t}},F.a.createElement(ue.a,de({commentCount:void 0!==p?p:m,commentClosed:d,targetLink:E,order:h,onOrderChange:v,commentPattern:o,isOrg:s},O)),"column"===y&&this.renderCommentEdit(),"bottom"===o?this.renderPatternContent(C):this.renderModalContent(C),"column"!==y&&this.renderCommentEdit())}}]),t}(x.Component),T.propTypes={type:A.a.string,parent:A.a.object.isRequired,targetLink:A.a.node,commentNeedsReview:A.a.bool,byComment:A.a.oneOfType([A.a.number,A.a.string]),commentPattern:A.a.string,handlePackupButton:A.a.func,onPaginationClick:A.a.func,isAutoblur:A.a.bool},T.contextTypes={authRequired:A.a.func.isRequired},T.defaultProps={isAutoblur:!1},R),fe=Object(D.connect)(y)(me),he=n(14),be=n.n(he),ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ve=(I=S=function(e){function t(e,n){v(this,t);var a=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.load=a.load.bind(a),a.addComment=n.authRequired(a.addComment.bind(a),void 0,te.c),a}return C(t,e),ye(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){this.props.dispatch(Object(W.f)(this.props.commentId))}},{key:"addComment",value:function(e,t){var n=this.props,a=n.type,r=n.parent,o=n.commentId,i=n.dispatch,l=[a,r.id,e,t.id,o];i(W.a.apply(void 0,l))}},{key:"render",value:function(){var e=this.props,t=e.onItemLike,n=e.onItemDelete,a=e.onItemFeature,r=e.onItemApprove,o=e.onItemCollapse,i=e.onItemDislike,l=e.onNavBack,s=e.canOperateItem,c=e.isFetching,u=e.comments,p=e.commentNeedsReview,d=e.openComment.collapsed,m=e.parent,f=e.parent.canComment;f=void 0===f?{status:!0}:f;var h=f.status,b=f.reason,y=e.commentPattern,v=this.context.currentUser,E=Boolean(v&&u.find(function(e){return e.author&&e.author.member.urlToken===v.urlToken})),C=void 0,g=void 0;E&&(C=u.filter(function(e){return e.author&&e.author.member.urlToken!==v.urlToken}),g=C[C.length-1]);var O=void 0;return c&&!u.length?O=F.a.createElement(Q.PlaceHolder,{className:"CommentItem",small:!0}):u.length&&(O=u.map(function(e,l){return F.a.createElement(ie.a,{key:l,isConversation:!0,commentNeedsReview:p,canOperate:s,parent:m,comment:e,onLike:t,onDelete:n,onFeature:a,onApprove:r,onCollapse:o,onDislike:i,collapsedShown:d})})),"bottom"===y?F.a.createElement(be.a,{size:"fullPage",onClose:l},F.a.createElement("div",{className:"Comments"},F.a.createElement(ue.a,{isConversation:!0,commentPattern:y}),F.a.createElement("div",{className:"CommentList"},O))):F.a.createElement("div",{className:"Comments"},F.a.createElement(ue.a,{isConversation:!0,onNavBack:l}),F.a.createElement("div",{className:"CommentList"},O),g&&(h?F.a.createElement(oe.a,{className:"Comments-footer",replyTo:g,commentNeedsReview:p,onSubmit:this.addComment}):F.a.createElement("div",{className:"Comments-disabledText"},b)))}}]),t}(x.Component),S.propTypes={commentId:A.a.number.isRequired,type:A.a.string,parent:A.a.object.isRequired,commentNeedsReview:A.a.bool},S.contextTypes={currentUser:A.a.object,authRequired:A.a.func.isRequired},I),Ee=Object(D.connect)(g)(ve),Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Oe=(j=M=function(e){function t(e){_(this,t);var n=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));L.call(n);var a=e.parent,r=e.dispatch;return n.feature=function(e,t){return r(Object(W.i)(e,a.id,a.type,t))},n.delete=function(e){return r(Object(W.d)(e,a.type,a.id))},n.showConversation=function(e){return n.setState({openedCommentId:e})},n.showComments=function(){return n.setState({openedCommentId:null})},n}return k(t,e),ge(t,[{key:"render",value:function(){var e=this.props,t=e.parent,n=e.commentPattern,a=e.type,r=e.parent,o=r.commentPermission,i=r.relationship,l=void 0===i?{}:i,s=r.author,c=void 0===s?{}:s,u=e.needLoadCommentPermission,p=O(e,["parent","commentPattern","type","parent","needLoadCommentPermission"]),d=this.context.currentUser,m=void 0===l.isAuthor?d&&c.urlToken&&d.urlToken===c.urlToken:l.isAuthor,f="censor"===o&&!m,h="answer"===a||"article"===a,b=this.state,y=b.openedCommentId,v=b.status,E=b.order,C={commentNeedsReview:f,parent:t,type:a,canOperateItem:h,onShowConversation:this.showConversation,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve};return F.a.createElement("div",{className:"Comments-container"},F.a.createElement(fe,Ce({},p,C,{commentPattern:n,className:U()({"Comments--hidden":y&&"bottom"!==n}),order:E,status:v,onStatusChange:this.handleStatusChange,onOrderChange:this.handleOrderChange,needLoadCommentPermission:u,isAuthor:m})),y&&F.a.createElement(Ee,Ce({},p,C,{commentPattern:n,commentId:y,onNavBack:this.showComments})))}}]),t}(x.Component),M.propTypes={type:A.a.string.isRequired,parent:A.a.object.isRequired,onOrderChange:A.a.func,onItemLike:A.a.func,isAuthor:A.a.bool},M.defaultProps={type:"answer"},M.contextTypes={currentUser:A.a.object,authRequired:A.a.func.isRequired},L=function(){var e=this;this.state={openedCommentId:null,status:"open",order:"normal"},this.like=function(t,n){var a=e.props,r=a.onItemLike,o=a.dispatch;r&&r(t,n),o(Object(W.j)(t))},this.collapse=function(t){var n=e.props,a=n.dispatch,r=n.parent;a(Object(W.g)(t,r.type,r.id))},this.dislike=function(t){return e.props.dispatch(Object(W.h)(t))},this.approve=function(t){var n=e.props,a=n.dispatch,r=n.parent,o=n.type;a(Object(W.b)(t,r.type||o,r.id))},this.handleStatusChange=function(t){e.setState({status:t})},this.handleOrderChange=function(t,n){e.props.onOrderChange&&e.props.onOrderChange(t,n),e.setState({order:t})}},j);t.default=Object(D.connect)()(Oe)},1223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavlistsModal=void 0;var a=n(878),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.FavlistsModal=r.default},1224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportModal=void 0;var a=n(1193),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.ReportModal=r.default},1226:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.length;return e.map(function(e,n){return s.a.createElement("span",{key:n},s.a.createElement(m.a,{user:e,noHoverCard:!0,noBadge:!0}),n!==t-1&&s.a.createElement("span",{style:{color:"rgb(62,122,194)"}},"、"))})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=n.n(l),c=n(2),u=n.n(c),p=n(20),d=n(8),m=n(26),f=n(287),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),b="//www.zhihu.com",y=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"renderCommentButton",value:function(e,t){var n=this,a=t.href,r=t.byComment;return s.a.createElement("a",{href:a+(r?"#comment-"+r:""),onClick:function(e){e.preventDefault(),n.props.onCommentsModalOpen(t)}},e)}},{key:"render",value:function(){var e=this.props,t=e.item,n=t.id,a=t.actionCount,r=t.actionName,o=t.groupName,l=t.operators,c=t.target,m=t.column,f=t.answer,h=t.isRead,y=t.voteCount,v=t.thankCount,E=t.question,C=t.comment,g=e.onClickLink,O=C&&C.id,_=r.includes("REPLY_IN"),w=void 0,k=void 0,P=void 0,N=void 0;switch(o){case"QUESTION":w=i(l),k=s.a.createElement("span",null," 修改了问题 ");var T=c.title,R=c.id;P=s.a.createElement("a",{href:b+"/question/"+R+"/log/self?group_id="+n},T);break;case"ANSWER_SUMMARY":w=i(l),k=s.a.createElement("span",null," 编辑了 ");var S=c.id,I=c.question,M=I.title,j=I.id;P=s.a.createElement("a",{href:b+"/question/"+j+"/answer/"+S},M),N=s.a.createElement("span",null," 的回答总结");break;case"INVITE":w=i(l),k=s.a.createElement("span",null," 邀请你回答 ");var L=c.title,B=c.id;P=s.a.createElement("a",{href:b+"/question/"+B},L);break;case"QUESTION_CREATE":w=i(l),k=s.a.createElement("span",null," 提出了问题 ");var A=c.title,x=c.id;P=s.a.createElement("a",{href:b+"/question/"+x},A);break;case"QUESTION_ZHIHU_INVITE":case"QUESTION_AUTO_INVITE":w=i(l),k=s.a.createElement("span",null," 的提问等你来答 ");var F=c.title,D=c.id;P=s.a.createElement("a",{href:b+"/question/"+D},F);break;case"QUESTION_NEWS_INVITE":k=s.a.createElement("span",null,"邀请你回答：");var q=c.title,U=c.id;P=s.a.createElement("a",{href:b+"/question/"+U},q);break;case"ANSWER":w=i(l),k=s.a.createElement("span",null," 回答了 ");var W=c.title,z=c.id;P=s.a.createElement("a",{href:b+"/question/"+z+(f?"/answer/"+f.id:"?group_id="+n)},W);break;case"QUESTION_COMMENT":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var K=c.title,V=c.id;P=this.renderCommentButton(K,{type:"question",href:b+"/question/"+V,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"ANSWER_COMMENT":case"ANSWER_COMMENT_REPLY":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var Y=c.question,H=Y.title,Q=Y.id,G=c.id;P=this.renderCommentButton(H,{type:"answer",href:b+"/question/"+Q+"/answer/"+G,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"FAVLIST_COMMENT":case"FAVLIST_COMMENT_REPLY":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var J=c.title,Z=c.id;P=this.renderCommentButton(J,{type:"collection",href:b+"/collection/"+Z+"?group_id="+n,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"ANSWER_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var X=c.id,$=c.question,ee=$.id,te=$.title;P=s.a.createElement("a",{href:b+"/question/"+ee+"/answer/"+X},te),N=s.a.createElement("span",null," 中提到了你");break;case"QCOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var ne=c.title,ae=c.id;P=this.renderCommentButton(ne,{type:"question",href:b+"/question/"+ae,byComment:O,target:c}),N=s.a.createElement("span",null," 中提到了你");break;case"ACOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var re=c.question,oe=re.title,ie=re.id,le=c.id;P=this.renderCommentButton(oe,{type:"answer",href:b+"/question/"+ie+"/answer/"+le,byComment:O,target:c}),N=s.a.createElement("span",null," 中提到了你");break;case"FCOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var se=c.title,ce=c.id;P=this.renderCommentButton(se,{type:"answer",href:b+"/collection/"+ce+"?group_id="+n,byComment:O,target:c}),N=s.a.createElement("span",null," 中提到了你");break;case"ANSWER_COLLAPSE":k=s.a.createElement("span",null," 你在 ");var ue=c.id,pe=c.question,de=pe.id,me=pe.title;P=s.a.createElement("a",{href:b+"/question/"+de+"/answer/"+ue},me),N=s.a.createElement("span",null," 下的回答被折叠");break;case"ANSWER_COLLAPSE_CANCEL":k=s.a.createElement("span",null," 你在 ");var fe=c.id,he=c.question,be=he.id,ye=he.title;P=s.a.createElement("a",{href:b+"/question/"+be+"/answer/"+fe},ye),N=s.a.createElement("span",null," 下的回答已恢复正常");break;case"QUESTION_SUGGEST_EDIT":k=s.a.createElement("span",null," 问题 ");var ve=c.title,Ee=c.id;P=s.a.createElement("a",{href:b+"/question/"+Ee},ve),N=s.a.createElement("span",null," 已被「建议修改」，请及时修改问题");break;case"QUESTION_CLOSE":k=s.a.createElement("span",null," 问题 ");var Ce=c.title,ge=c.id;P=s.a.createElement("a",{href:b+"/question/"+ge},Ce),N=s.a.createElement("span",null," 已被「关闭」");break;case"QUESTION_EDIT_REJECT":k=s.a.createElement("span",null," 问题 ");var Oe=c.title,_e=c.id;P=s.a.createElement("a",{href:b+"/question/"+_e},Oe),N=s.a.createElement("span",null,"修改后仍然不符合",s.a.createElement("a",{href:b+"/question/19806261"},"知乎提问规范"));break;case"QUESTION_NORMAL":k=s.a.createElement("span",null," 问题 ");var we=c.title,ke=c.id;P=s.a.createElement("a",{href:b+"/question/"+ke},we),N=s.a.createElement("span",null," 已恢复正常");break;case"ANSWER_SUGGEST_EDIT":k=s.a.createElement("span",null," 你在 ");var Pe=c.id,Ne=c.question,Te=Ne.id,Re=Ne.title;P=s.a.createElement("a",{href:b+"/question/"+Te+"/answer/"+Pe},Re),N=s.a.createElement("span",null," 下的回答已被「建议修改」，请及时修改问题");break;case"ANSWER_EDIT_EVALUATE_REJECT":k=s.a.createElement("span",null," 你在 ");var Se=c.id,Ie=c.question,Me=Ie.title,je=Ie.id;P=s.a.createElement("a",{href:b+"/question/"+je+"/answer/"+Se},Me),N=s.a.createElement("span",null," 下的回答修改后仍然不符合知乎内容规范，请及时修改");break;case"ANSWER_NORMAL":k=s.a.createElement("span",null," 你在 ");var Le=c.id,Be=c.question,Ae=Be.id,xe=Be.title;P=s.a.createElement("a",{href:b+"/question/"+Ae+"/answer/"+Le},xe),N=s.a.createElement("span",null," 下的回答已恢复正常");break;case"COLUMN_FOLLOW":w=i(l),k=s.a.createElement("span",null," 关注了 ");var Fe=c.title,De=c.id;P=s.a.createElement("a",{href:d.f+"/"+De+"?group_id="+n},Fe);break;case"ARTICLE_CREATE":w=i(l);var qe=c.title,Ue=c.id;if(m){var We=m.title,ze=m.id;k=s.a.createElement("a",{href:d.f+"/"+ze}," 在"+We+"中 ")}P=s.a.createElement("a",{href:d.f+"/p/"+Ue},"发布了"+qe);break;case"ARTICLE_MENTION":w=i(l);var Ke=c.title,Ve=c.excerptTitle,Ye=c.id,He=Ke||Ve||"无标题";k=s.a.createElement("span",null," 在 "),P=s.a.createElement("a",{href:d.f+"/p/"+Ye},"发布了"+He),N=s.a.createElement("span",null,"提到了你");break;case"ARTICLE_COMMENT":case"ARTCOMMENT_REPLY":case"ARTCOMMENT_COLUMN":case"ARTCOMMENT_REPLY_COLUMN":case"ARTCOMMENT_COLLECTION":case"ARTCOMMENT_REPLY_COLLECTION":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var Qe=c.title,Ge=c.excerptTitle,Je=c.id,Ze=Qe||Ge||"无标题";P=this.renderCommentButton(Ze,{type:"article",href:d.f+"/p/"+Je,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"COLUMN_INVITE_EDITOR":w=i(l);var Xe=c.title,$e=c.id;k=s.a.createElement("span",null," 邀请你成为 "),P=s.a.createElement("a",{href:d.f+"/"+$e},Xe),N=s.a.createElement("span",null," 的编辑");break;case"COLUMN_INVITE":case"COLUMN_INVITE_CONTRIBUTOR":case"COLUMN_INVITE_AUTHOR":w=i(l);var et=c.title,tt=c.id;k=s.a.createElement("span",null," 邀请你成为 "),P=s.a.createElement("a",{href:d.f+"/"+tt+"?group_id="+n},et),N=s.a.createElement("span",null," 的作者");break;case"ARTCOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var nt=c.title,at=c.id;P=this.renderCommentButton(nt,{type:"article",href:d.f+"/p/"+at,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论中提到了你");break;case"ARTICLE_CONTRIBUTE":w=i(l);var rt=c.id,ot=c.title;if(m){var it=m.title,lt=m.id;k=s.a.createElement("span",null," ","向"," ",s.a.createElement("a",{href:d.f+"/"+lt+"?group_id="+n},it)," ","投稿了文章"," ")}else k=s.a.createElement("span",null," 投稿了文章 ");P=s.a.createElement("a",{href:d.f+"/p/"+rt+"?group_id="+n},""+ot);break;case"ARTICLE_CONTRIBUTE_ACCEPT":var st=c.id,ct=c.title;if(m){var ut=m.title,pt=m.id;k=s.a.createElement("span",null,s.a.createElement("a",{href:d.f+"/"+pt+"?group_id="+n},ut)," ","通过了你投稿的文章"," ")}else k=s.a.createElement("span",null,"通过了你投稿的文章");P=s.a.createElement("a",{href:d.f+"/p/"+st+"?group_id="+n},""+ct);break;case"CANCEL_ARTICLE_CONTRIBUTE":var dt=c.id,mt=c.title;if(m){var ft=m.title,ht=m.id;k=s.a.createElement("span",null,s.a.createElement("a",{href:d.f+"/"+ht+"?group_id="+n},ft)," ","取消收录你的文章"," ")}else k=s.a.createElement("span",null," 取消收录你的文章 ");P=s.a.createElement("a",{href:d.f+"/p/"+dt+"?group_id="+n},""+mt);break;case"ARTICLE_APPLY_PUBLISH":w=i(l);var bt=c.id,yt=c.title,vt=m.title,Et=m.id;k=s.a.createElement("span",null," ","申请向"," ",s.a.createElement("a",{href:d.f+"/"+Et+"?group_id="+n},vt)," ","投稿"," "),P=s.a.createElement("a",{href:d.f+"/p/"+bt+"?group_id="+n},""+yt);break;case"ARTICLE_CANCEL_APPLY_PUBLISH":var Ct=c.id,gt=c.title,Ot=m.title,_t=m.id;k=s.a.createElement("span",null,s.a.createElement("a",{href:d.f+"/"+_t+"?group_id="+n},Ot)," ","取消收录"," "),P=s.a.createElement("a",{href:d.f+"/p/"+Ct+"?group_id="+n},""+gt);break;case"ARTICLE_PUBLISH":w=i(l);var wt=c.id,kt=c.title;if(m){var Pt=m.title,Nt=m.id;k=s.a.createElement("span",null," ","在"," ",s.a.createElement("a",{href:d.f+"/"+Nt+"?group_id="+n},Pt)," ","中发布了"," ")}else k=s.a.createElement("span",null," 发布了 ");P=s.a.createElement("a",{href:d.f+"/p/"+wt+"?group_id="+n},""+kt);break;case"ARTICLE_INVITE_REVIEW":w=i(l),k=s.a.createElement("span",null," 邀请你预览 ");var Tt=c.title,Rt=c.id;P=s.a.createElement("a",{href:d.f+"/p/"+Rt+"/preview?group_id="+n},Tt);break;case"ARTREVIEW_COMMENT":w=i(l),k=s.a.createElement("span",null," 评论了草稿 ");var St=c.title,It=c.id;P=s.a.createElement("a",{href:d.f+"/p/"+It+"/preview?group_id="+n},St);break;case"MODIFY_AUTHOR_ROLE_TO_AUTHOR":case"MODIFY_AUTHOR_ROLE_TO_CONTRIBUTOR":w=i(l),k=s.a.createElement("span",null," 变更你为 ");var Mt=c.title,jt=c.id;P=s.a.createElement("a",{href:d.f+"/"+jt+"?group_id="+n},Mt),N=s.a.createElement("span",null," 的作者");break;case"MODIFY_AUTHOR_ROLE_TO_EDITOR":w=i(l),k=s.a.createElement("span",null," 变更你为 ");var Lt=c.title,Bt=c.id;P=s.a.createElement("a",{href:d.f+"/"+Bt+"?group_id="+n},Lt),N=s.a.createElement("span",null," 的编辑");break;case"ROUNDTABLE_COMMENT":case"ROUNDTABLE_COMMENT_REPLY":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var At=c.name,xt=c.id;P=this.renderCommentButton(At,{type:"roundtable",href:b+"/roundtable/"+xt+"?group_id="+n+"&expand=1",byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"RTCOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var Ft=c.name,Dt=c.id;P=this.renderCommentButton(Ft,{type:"roundtable",href:b+"/roundtable/"+Dt+"?group_id="+n+"&expand=1",byComment:O,target:c}),N=s.a.createElement("span",null," 提到了你");break;case"EBOOK_PUBLISH":w=i(l),k=s.a.createElement("span",null," 的电子书 ");var qt=c.title,Ut=c.id;P=s.a.createElement("a",{href:b+"/pub/book/"+Ut+"?group_id="+n},qt),N=s.a.createElement("span",null," 已在知乎书店上架");break;case"EBOOK_VOTE":w=i(l),k=s.a.createElement("span",null," 赞了你的电子书 ");var Wt=c.title,zt=c.id;P=s.a.createElement("a",{href:b+"/pub/book/"+zt+"?group_id="+n},Wt);break;case"EBOOK_COMMENT":case"EBOOK_COMMENT_REPLY":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了电子书"," ");var Kt=c.type,Vt=c.title,Yt=c.id;P=this.renderCommentButton(Vt,{type:Kt,href:b+"/pub/book/"+Yt+"?group_id="+n,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"EBOOK_COMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var Ht=c.type,Qt=c.title,Gt=c.id;P=this.renderCommentButton(Qt,{type:Ht,href:b+"/pub/book/"+Gt+"?group_id="+n,byComment:O,target:c}),N=s.a.createElement("span",null," 中提到了你");break;case"EBOOK_COMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var Jt=c.title,Zt=c.id;P=this.renderCommentButton(Jt,{type:"ebook",href:b+"/pub/book/"+Zt+"?group_id="+n,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"EBOOK_REVIEW_LIKE":w=i(l);var Xt=c.id,$t=c.book;k=s.a.createElement("span",null," 赞了你在 "),P=s.a.createElement("a",{href:b+"/pub/book/"+$t.id+"/reviews/"+Xt+"?group_id="+n},$t.title),N=s.a.createElement("span",null," 下的点评 ");break;case"EBOOK_REVIEW_COMMENT":w=i(l);var en=c.id,tn=c.book;k=s.a.createElement("span",null," 评论了你在 "),P=s.a.createElement("a",{href:b+"/pub/book/"+tn.id+"/reviews/"+en+"?group_id="+n},tn.title),N=s.a.createElement("span",null," 下的点评 ");break;case"EBOOK_REVIEW_COMMENT_LIKE":w=i(l);var nn=c.id,an=c.book;k=s.a.createElement("span",null," 赞了你在 "),P=this.renderCommentButton(an.title,{type:"book_review",href:b+"/pub/book/"+an.id+"/reviews/"+nn,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论 ");break;case"EBOOK_REVIEW_COMMENT_REPLY":w=i(l);var rn=c.id,on=c.book;k=s.a.createElement("span",null," 回复了你在 "),P=this.renderCommentButton(on.title,{type:"book_review",href:b+"/pub/book/"+on.id+"/reviews/"+rn,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论 ");break;case"PROMOTION_COMMENT":case"PROMOTION_COMMENT_REPLY":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var ln=c.title,sn=c.id;P=this.renderCommentButton(ln,{type:"promotion",href:d.p+"/p/"+sn,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"PROMOTION_COMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var cn=c.title,un=c.id;P=this.renderCommentButton(cn,{type:"promotion",href:d.p+"/p/"+un,byComment:O,target:c}),N=s.a.createElement("span",null," 提到了你");break;case"ROUNDTABLE_QUESTION":var pn=c.name,dn=c.id,mn=E.id,fn=E.title;w=s.a.createElement("span",null,s.a.createElement("a",{href:b+"/roundtable/"+dn+"?group_id="+n},pn)," 圆桌新增了"+(a>1?"":"问题")+" "),P=s.a.createElement("a",{href:b+"/question/"+mn+"?group_id="+n},fn),a>1&&(N=s.a.createElement("span",null," 等"+Object(p.b)(a)+"个问题"));break;case"ROUNDTABLE_ANSWER":var hn=c.name,bn=c.id,yn=f.id,vn=f.question,En=vn.id,Cn=vn.title;w=s.a.createElement("span",null,s.a.createElement("a",{href:b+"/roundtable/"+bn+"?group_id="+n},hn)," 圆桌新增了 ",i(l),(l.length>1?" 等人":"")+" 关于"),P=s.a.createElement("a",{href:b+"/question/"+En+"/answer/"+yn},Cn),N=s.a.createElement("span",null," 的回答");break;case"MEMBER_FOLLOW_FAVLIST":w=i(l),k=s.a.createElement("span",null," 关注了 ");var gn=c.title,On=c.id;P=s.a.createElement("a",{href:b+"/collection/"+On+"?group_id="+n},gn);break;case"QCOMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var _n=c.title,wn=c.id;P=this.renderCommentButton(_n,{type:"question",href:b+"/question/"+wn,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"RTCOMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var kn=c.name,Pn=c.id;P=this.renderCommentButton(kn,{type:"promotion",href:d.p+"/p/"+Pn,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"ACOMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var Nn=c.question,Tn=Nn.title,Rn=Nn.id,Sn=c.id;P=this.renderCommentButton(Tn,{type:"answer",href:b+"/question/"+Rn+"/answer/"+Sn,byComment:O,target:c}),N=s.a.createElement("span",null," 回答下的评论");break;case"FCOMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var In=c.id,Mn=c.title;P=this.renderCommentButton(Mn,{type:"collection",href:b+"/collection/"+In+"?group_id="+n,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"ARTCOMMENT_LIKE":case"ARTCOMMENT_LIKE_COLUMN":case"ARTCOMMENT_LIKE_COLLECTION":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var jn=c.title,Ln=c.id;P=this.renderCommentButton(jn,{type:"article",href:d.f+"/p/"+Ln,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"ARTICLE_VOTE":case"ARTVOTE_COLUMN":case"ARTVOTE_COLLECTION":w=i(l);var Bn=c.title,An=c.excerptTitle,xn=c.id,Fn=Bn||An||"无标题";if(m){var Dn=m.id,qn=m.title;k=s.a.createElement("span",null," ","赞了"," ",s.a.createElement("a",{href:d.f+"/"+Dn+"?group_id="+n},""+qn)," ","中的文章"," ")}else k=s.a.createElement("span",null," 赞了文章 ");P=s.a.createElement("a",{href:d.f+"/p/"+xn+"?group_id="+n},""+Fn);break;case"ARTICLE_TIPJAR_SUCCESS":w=i(l),k=s.a.createElement("span",null," 赞赏了 ");var Un=c.title,Wn=c.excerptTitle,zn=c.id,Kn=Un||Wn||"无标题";P=s.a.createElement("a",{href:d.f+"/p/"+zn+"?group_id="+n},""+Kn);break;case"ANSWER_REWARD":w=i(l),k=s.a.createElement("span",null," 赞赏了 ");var Vn=c.question,Yn=Vn.id,Hn=Vn.title,Qn=c.id;P=s.a.createElement("a",{href:b+"/question/"+Yn+"/answer/"+Qn},""+Hn);break;case"PROMOTION_COMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var Gn=c.title,Jn=c.id;P=this.renderCommentButton(Gn,{type:"article",href:d.p+"/p/"+Jn,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论");break;case"VOTE_THANK":k=s.a.createElement("span",null,"获得"+(y?" "+Object(p.b)(y)+" 次赞同":"")+(y&&v?"/":"")+(v?" "+Object(p.b)(v)+" 次感谢 ":" "));var Zn=c.question,Xn=Zn.title,$n=Zn.id,ea=c.id;P=s.a.createElement("a",{href:b+"/question/"+$n+"/answer/"+ea},Xn),N=s.a.createElement("span",null," 来自 ",i(l));break;case"TOPIC_INDEX_THANK":var ta=c.id,na=c.name;w=i(l),k=s.a.createElement("span",null," 感谢了你参与编辑的 "),P=s.a.createElement("a",{href:b+"/topic/"+ta},na),N=s.a.createElement("span",null," 话题索引 ");break;case"PIN_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你的想法 ");var aa=c.excerptTitle,ra=c.id;P=s.a.createElement("a",{href:b+"/pin/"+ra,target:"_blank"},aa);break;case"PINCOMMENT_REPLY":case"PIN_COMMENT":w=i(l),k=s.a.createElement("span",null," ",_?"回复了你在":"评论了"," ");var oa=c.excerptTitle,ia=c.id;P=this.renderCommentButton(oa,{type:"pin",href:b+"/pin/"+ia,byComment:O,target:c}),_&&(N=s.a.createElement("span",null," 下的评论"));break;case"PINCOMMENT_MENTION":w=i(l),k=s.a.createElement("span",null," 在 ");var la=c.excerptTitle,sa=c.id;P=this.renderCommentButton(la,{type:"pin",href:b+"/pin/"+sa,byComment:O,target:c}),N=s.a.createElement("span",null," 中提到了你");break;case"PINCOMMENT_LIKE":w=i(l),k=s.a.createElement("span",null," 赞了你在 ");var ca=c.excerptTitle,ua=c.id;P=this.renderCommentButton(ca,{type:"pin",href:b+"/pin/"+ua,byComment:O,target:c}),N=s.a.createElement("span",null," 下的评论")}return s.a.createElement("div",{className:u()("PushNotifications-item",{"PushNotifications-newItem":!h})},s.a.createElement("span",{onClick:g},w),k,s.a.createElement("span",{onClick:g},P),N)}}]),t}(l.Component);t.default=y},1229:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return e?t?!0===t?"":t:e:""}function l(e){for(var t,n=e.length,a=e.chars,r=e.maskChar,o=[],l=0;l<n;l+=1)t=a[l],o.push(C.a.createElement("span",{className:w()("TPassBox",{"TPassBox-mask":t&&Boolean(r)}),key:l},i(t,r)));return C.a.createElement("span",{className:"TPassBoxes"},o)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(){this.payments={},this.chosePaymentName=null,this.codeUrl="",this.qrLoaded=!1,this.need=null,this.passcode="",this.needSMS=!1,this.smsTimer=0,this.isInProgress=!1,this.error=null}function h(e,t){return Y&&e&&e!==Y&&t(new Error("A pay-sdk from different source has been load")),Y=e,window.zhihu&&window.zhihu.pay?window.zhihu.pay.ready(t):(H||(H=Object(V.loadScript)(e)),H.then(function(){return window.zhihu.pay.ready(t)},function(e){t(e),H=null}))}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var E=n(0),C=n.n(E),g=n(1),O=n.n(g),_=n(2),w=n.n(_),k=n(3),P=n(39),N=n(276),T=n.n(N),R=n(99),S=n(11),I=(n(1218),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),M={backspace:8,tab:9,enter:13,0:48,9:57},j=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputFocus=n.onInputFocus.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return o(t,e),I(t,[{key:"onInputFocus",value:function(e){e.target.value=e.target.value,this.props.onFocus()}},{key:"onInputChange",value:function(e){var t=String(e.target.value);if(t){t=t[t.length-1];var n=this.props.chars,a=this.props.length;n.length===a?n=n.replace(/.$/,t):n+=t,this.props.onChange(n),n.length===a&&this.props.onFinish(n)}}},{key:"onKeyDown",value:function(e){var t=e.keyCode;if(!e.metaKey&&!e.ctrlKey&&t!==M.tab&&t!==M.enter){var n=this.props.chars;t===M.backspace?(n=n.slice(0,-1),this.props.onChange(n)):(t<M[0]||t>M[9])&&(e.preventDefault(),this.props.onError(e))}}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"blur",value:function(){this.refs.input.blur()}},{key:"render",value:function(){var e=this.props,t=e.length,n=e.chars,a=e.maskChar,r=e.autoFocus,o=e.className,i=e.children,s=n.length===t?t-1:n.length,c=n[s]||"";return C.a.createElement("label",{className:w()("TPass",o)},C.a.createElement("span",{className:"TPass-wrapper"},C.a.createElement(l,{length:t,chars:n,maskChar:a}),C.a.createElement("input",{className:"TPass-input",value:c,style:{left:60*s},onFocus:this.onInputFocus,onChange:this.onInputChange,onKeyDown:this.onKeyDown,onPaste:function(e){return e.preventDefault()},type:"number",min:"0",max:"9",pattern:"[0-9]*",autoFocus:r,ref:"input"})),i)}}]),t}(C.a.Component);j.defaultProps={length:6,chars:"",maskChar:!1,autoFocus:!1,onFocus:function(){},onChange:function(){},onError:function(){},onFinish:function(){}},j.propTypes={length:O.a.number,chars:O.a.string,maskChar:O.a.oneOfType([O.a.bool,O.a.string]),autoFocus:O.a.bool,onFocus:O.a.func,onChange:O.a.func,onError:O.a.func,onFinish:O.a.func,className:O.a.string,children:O.a.node};var L,B,A=j,x=(n(1219),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),F=(B=L=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),x(t,[{key:"render",value:function(){var e=this.props;return C.a.createElement("div",{className:w()("Spinner",e)},C.a.createElement("i",{className:"Spinner-loading"}))}}]),t}(E.Component),L.propTypes={className:O.a.string},B),D=n(101),q=(n(1220),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),z=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPasscodeFocus=function(){n.state.error&&(n.setState({error:null}),6===n.state.passcode.length&&n.setState({passcode:""}))},n.onPasscodeInput=function(e){"object"===(void 0===e?"undefined":U(e))&&(e=e.target.value),n.setState({passcode:e})},n.onPasscodeFinish=function(e){n.tpass.blur(),n.payWithBalance(e)},n.onSendSMSCode=function(){n.props.trade.resendSMSCode(function(){n.startSMSTimer(),n.smsInput.focus()},function(e){n.setState({error:e})})},n.onQrLoad=function(){n.setState({qrLoaded:!0})},n.onBalanceFormSubmit=function(e){e.preventDefault(),n.payWithBalance(n.state.passcode)},n.setPayments=function(e){n.setState({payments:e})},n.confirmPayment=function(){var e=n.state,t=e.choseName,a=e.payments,r=n.props.onConfirmPayment,o=t;t||(o=a.balance&&a.balance.enable?"balance":"wechat"),r(!o),n.setState({chosePaymentName:o}),n.props.trade["wechat"===o?"initWechatPay":"initBalancePay"]()},n.pid=0,n.smsTimer=null,n.state=new f,n.isInWechat=e.ua.Wechat,n}return m(t,e),W(t,[{key:"componentWillMount",value:function(){var e=this.props.trade;this.getPaymentsList(e),this.initListeners(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.trade!==this.props.trade&&(this.setState(new f),setTimeout(function(){t.getPaymentsList(e.trade)},300),this.initListeners(e.trade))}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.smsTimer),this.props.trade.dispose()}},{key:"getPaymentsList",value:function(e){var t=this;if(e){var n=this.pid+=1;e.getPaymentsList(function(e){t.pid===n&&t.setPayments(e)})}}},{key:"initListeners",value:function(e){var t=this;e&&e.on("payInited",function(e,n){t.setState(q({},n))}).on("paySuccess",function(){t.setState({isInProgress:!1,error:null}),t.props.onSuccess()}).on("payCancel",function(){t.setState({isInProgress:!1,chosePaymentName:null})}).on("payFail",function(e){var n=e;"object"!==(void 0===e?"undefined":U(e))||e instanceof Error||(n=e.message),t.setState({isInProgress:!1,error:n}),t.props.onFail(e)}).on("needSMS",function(e){t.setState({isInProgress:!1,error:null,needSMS:e.message,passcode:""})}).on("needWechatCode",function(){t.props.onError("needWechatCode")}).on("error",function(e,n){t.props.onError(e,n)})}},{key:"startSMSTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;window.clearInterval(this.smsTimer),this.setState({smsTimer:t}),this.smsTimer=window.setInterval(function(){t-=1,t<=0?(window.clearInterval(e.smsTimer),e.smsTimer=null,e.setState({smsTimer:0})):e.setState({smsTimer:t})},1e3)}},{key:"payWithBalance",value:function(e){return 6!==e.length?(this.setState({error:"请输入 6 位支付密码"}),!1):(this.setState({isInProgress:!0,error:null}),this.props.trade.payWithBalance(e))}},{key:"renderPaymentsList",value:function(){var e=this,t=this.state,n=t.payments,a=t.chosePaymentName,r=t.choseName,o=this.props.trade;if(a)return null;var i=n.balance&&n.balance.amount,l=o.info.total,s=n.wechat&&n.wechat.enable,c=n.balance&&n.balance.enable,u=n.balance&&!n.balance.enable,p=i>=l?"使用余额（剩余 "+(i/100).toFixed(2)+"）":"微信支付",d=i>=l?"wallet":"wechatPayment",m="PaymentItem-"+(i>=l?"wallet":"wechatPayment");r&&(p="wechat"===r?"微信支付":"使用余额（剩余 "+(i/100).toFixed(2)+"）",d="wechat"===r?"wechatPayment":"wallet",m="PaymentItem-"+("wechat"===r?"wechatPayment":"wallet"));var f=C.a.createElement("div",null,C.a.createElement(S.a,{name:d,className:m}),C.a.createElement(k.default,{className:"Payment-Popover"},p),C.a.createElement(S.a,{className:"Select-arrow",name:"select"}));return C.a.createElement("div",{className:"PaymentsList"},C.a.createElement("span",{className:"Payment-Topline"}),C.a.createElement("span",{className:"PaymentWay"},"支付方式"),C.a.createElement(D.a,{placeholder:f},C.a.createElement(R.default,{plain:!0,className:"Payment-select",listClassName:"Payment-select-list",targetClassName:"Popover-targetContainer-verification",text:i>=l?"使用余额（剩余 "+(i/100).toFixed(2)+"）":"微信支付",menuToggler:f,onChange:function(t){"disabled"!==t&&e.setState({choseName:t})}},c&&C.a.createElement(R.Option,{value:"balance",className:"PaymentItem"},C.a.createElement(S.a,{name:"wallet",className:"PaymentItem-wallet"}),"使用余额（剩余 "+(i/100).toFixed(2)+"）"),u&&C.a.createElement(R.Option,{value:"disabled",className:"PaymentItem PaymentItem--disabled"},C.a.createElement(S.a,{name:"wallet",className:"PaymentItem-wallet"}),"使用余额（剩余 "+(i/100).toFixed(2)+"）"),s&&C.a.createElement(R.Option,{value:"wechat",className:"PaymentItem"},C.a.createElement(S.a,{name:"wechatPayment",className:"PaymentItem-wechatPayment"}),"微信支付"))),C.a.createElement("span",{className:"Payment-Bottomline"}),C.a.createElement(k.default,{className:"Payment-CheckedButton",onClick:this.confirmPayment},"确认支付"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.trade,r=this.state,o=r.payments,i=r.chosePaymentName,l=r.codeUrl,s=r.needSMS,c=r.isInProgress;return a?C.a.createElement("div",{className:w()("Payment",n)},Object.keys(o).length?this.renderPaymentsList():C.a.createElement("div",{className:"Payment-placeholder"},C.a.createElement(F,null)),"wechat"===i&&C.a.createElement("div",{className:"Payment-wechatPay"},C.a.createElement("div",{className:"Payment-wechatPayTitle"},C.a.createElement("i",{className:"icon icon-ic_wechatpay PaymentIconWechat"}),"微信支付"),!this.isInWechat&&C.a.createElement("div",null,"使用微信扫描二维码完成支付"),this.state.qrLoaded?C.a.createElement("span",{className:"Payment-qrWrapper"},C.a.createElement("img",{role:"presentation",src:"//www.zhihu.com/qrcode?url="+l,width:"150",height:"150"})):C.a.createElement("div",{className:"Payment-qrPlaceholder"},C.a.createElement(F,null),!this.isInWechat&&C.a.createElement("div",null,"正在生成二维码"),l&&C.a.createElement("img",{role:"presentation",src:"//www.zhihu.com/qrcode?url="+l,width:"1",height:"1",onLoad:this.onQrLoad}))),"balance"===i&&C.a.createElement("form",{onSubmit:this.onBalanceFormSubmit,className:"Payment-balancePay"},C.a.createElement("div",{className:"Payment-balancePayTitle"},C.a.createElement("i",{className:"icon icon-wallet PaymentIconWallet"}),"余额支付"),!s&&C.a.createElement("div",null,C.a.createElement("div",{className:"Payment-description"},"请输入 6 位数知乎支付密码，用于支付验证。"),C.a.createElement(A,{chars:this.state.passcode,onFocus:this.onPasscodeFocus,onChange:this.onPasscodeInput,maskChar:!0,onFinish:this.onPasscodeFinish,className:w()("Payment-tpass",{"Payment-errorInput":this.state.error,"Payment-progressing":c}),autoFocus:!0,ref:function(t){e.tpass=t}},c&&C.a.createElement(F,{className:"Payment-balancePaySpinner"}))),Boolean(s)&&C.a.createElement("div",{className:"Payment-balancePaySms"},C.a.createElement("div",{className:"Payment-balancePaySmsText"},String(s)),C.a.createElement("input",{onChange:this.onPasscodeInput,value:this.state.passcode,className:w()("Payment-sms","SimpleInput",{"Payment-errorInput":this.state.error}),type:"text",pattern:"\\d{6}",minLength:"6",maxLength:"6",title:"验证码应为 6 位数字",placeholder:"输入 6 位数验证码",required:!0,autoFocus:!0,ref:function(t){e.smsInput=t}}),this.state.smsTimer?C.a.createElement("button",{className:"Payment-sendSms",type:"button",disabled:!0},this.state.smsTimer," 秒后可重发"):C.a.createElement("button",{onClick:this.onSendSMSCode,className:"Payment-sendSms",type:"button"},"发送验证码")),C.a.createElement("div",{className:"Payment-balancePayFooter"},C.a.createElement("p",{className:"Payment-errorTip",style:{visibility:this.state.error?"visible":"hidden"}},this.state.error),Boolean(s)&&C.a.createElement(k.default,{color:"blue",disabled:c,className:"Payment-balancePayConfirmBtn",type:"submit"},"确认")),!s&&C.a.createElement("div",{className:"Payment-balancePayForget"},"如果忘记密码请邮件联系"," ",C.a.createElement("email",{className:"Payment-email"},"i@zhihu.com")))):C.a.createElement("div",{className:w()("Payment",n)},C.a.createElement("div",{className:"Payment-placeholder Payment-placehoder--empty"},C.a.createElement(F,null)))}}]),t}(C.a.Component);z.propTypes={trade:O.a.object,autoChooseSinglePayment:O.a.bool,onSuccess:O.a.func.isRequired,onFail:O.a.func,onError:O.a.func,onConfirmPayment:O.a.func},z.defaultProps={trade:null,onSuccess:function(){},onFail:function(){},onError:function(){},autoChooseSinglePayment:!0,className:""};var K=z,V=n(161),Y="",H=null,Q=n(8);n(1221);n.d(t,"TipjarDialog",function(){return ee});var G,J,Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),X=[200,500,1e3,5e3,1e4,2e4],$=100,ee=(J=G=function(e){function t(e){b(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onConfirmPayment=function(e){n.setState({chosePaymentName:e})},n.onPaySuccess=function(){n.props.onPaySuccess(),n.setState({chosePaymentName:!0,colseTijarDialogStatus:!0,trade:void 0,currentAmount:"",customButton:!1})},n.handleCustomAmount=function(){n.state.trade&&n.state.trade.dispose(),n.setState({showCustom:!0})},n.handleCustomChange=function(e){var t=e.target.value;Number(t)?n.setState({customAmount:Number(t)}):t.length||n.setState({customAmount:""})},n.handleCustomKeyUp=function(e){13===e.keyCode&&n.handleSubmitCustom()},n.handleSubmitCustom=function(){var e=n.state.customAmount*$;e>0&&e<5e4&&(n.setState({customButton:!0,showCustom:!1,colseTijarDialogStatus:!1}),n.createTrade(e))},n.closeModal=function(){n.state.trade&&n.state.trade.dispose(),n.setState(n.getDefaultState())},n.handleAmountButton=function(e){n.createTrade(e.currentTarget.dataset.amount),n.setState({colseTijarDialogStatus:!1,customButton:!1,showCustom:!1})},n.createTrade=function(e){n.setState({tradeLoading:!0,currentAmount:e});var t=n.props.ua;n.props.addReward(e,t.Wechat?"wechat":"normal"),n.setState({tradeLoading:!1})},n.colseTijarDialog=function(){n.setState({chosePaymentName:!0,colseTijarDialogStatus:!0,trade:void 0,currentAmount:""}),n.props.colseTijarDialog()},n.state=n.getDefaultState(),n}return v(t,e),Z(t,[{key:"componentDidMount",value:function(){this.showTip()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tradeNumber,n=e.type,a=this.state,r=a.trade,o=a.colseTijarDialogStatus,i="article"===n?11:17;if(t&&(!r||t!==r.tradeNo)&&!o){var l=new window.zhihu.pay.Trade(t,i);this.setState({trade:l})}}},{key:"componentWillUnmount",value:function(){this.props.TipjarRender&&this.props.removeTradeNumber()}},{key:"getDefaultState",value:function(){return{showCustom:!1,customAmount:"",currentAmount:"",showTipModal:!1,customButton:!1,chosePaymentName:!0,colseTijarDialogStatus:!1}}},{key:"showTip",value:function(){var e=this;h("https://pay.zhihu.com/api/js",function(){e.setState({showTipModal:!0})})}},{key:"renderAmountCustom",value:function(){var e=this.state,t=e.showCustom,n=e.customAmount,a=e.currentAmount,r=e.customButton;return C.a.createElement("div",{className:"Reward-TipjarDialog-amountCustom"},t?C.a.createElement("div",{className:"Reward-TipjarDialog-amountInput"},C.a.createElement("input",{name:"",type:"text",className:"SimpleInput",placeholder:"你想赞赏的金额（不超过 500）",value:n,onChange:this.handleCustomChange,onKeyUp:this.handleCustomKeyUp,ref:function(e){e&&e.focus()}}),C.a.createElement(k.default,{disabled:n<=0||n>500,color:"blue",preset:"primary",onClick:this.handleSubmitCustom},"确定"),C.a.createElement("div",{className:"Reward-TipjarDialog-error",style:{display:n>500?"block":"none"}},"不能超过 500 元")):C.a.createElement(k.default,{preset:"plain",className:r?"TipjarDialog-customButton-cheked":"TipjarDialog-customButton",onClick:this.handleCustomAmount},r?"自定义金额： ￥ "+a/$:"自定义金额"))}},{key:"renderTipjarDialog",value:function(){var e=this,t=this.props,n=t.author,a=n.name,r=n.avatarUrl,o=n.isOrg,i=n.urlToken,l=n.id,s=t.tagline,c=this.state.currentAmount;return C.a.createElement("div",{className:"Reward-TipjarDialog"},C.a.createElement("div",{className:"Reward-TipjarDialog-user"},C.a.createElement("a",{href:"/"+(o?"org":"people")+"/"+(i||l),className:"Reward-UserAvatar"},C.a.createElement("img",{src:r.replace("_is","_l"),className:"Reward-Avatar",alt:"当前用户"})),a),C.a.createElement("div",{className:"Reward-TipjarDialog-tagLine"},s),C.a.createElement("div",{className:"Reward-TipjarDialog-selectAmount"},C.a.createElement("div",{className:"Reward-TipjarDialog-amountList"},X.map(function(t){return C.a.createElement(k.default,{key:t,"data-amount":t,onClick:e.handleAmountButton,color:"red",className:w()({"Reward-Button-checked":Number(c)===t})},C.a.createElement("b",null,Number(c)===t?t/$+" 元":"￥ "+t/$))})),this.renderAmountCustom()))}},{key:"render",value:function(){var e=this.props,t=e.ua,n=e.TipjarRender,a=e.isMobile,r=this.state,o=r.showCustom,i=r.tradeLoading,l=r.showTipModal,s=r.trade,c=r.chosePaymentName,u=a?T.a:P.default,p=a?"small":"default";return C.a.createElement(u,{overlay:!0,size:p,onClose:this.colseTijarDialog,className:"Reward-TipjarDialogModal"},n&&C.a.createElement("div",null,l&&c&&this.renderTipjarDialog(),(s||i)&&!o&&C.a.createElement(K,{trade:s,ua:t,onSuccess:this.onPaySuccess,onConfirmPayment:this.onConfirmPayment})))}}]),t}(E.Component),G.propTypes={author:O.a.object,tagline:O.a.string,colseTijarDialog:O.a.func,addReward:O.a.func,tradeNumber:O.a.number,removeTradeNumber:O.a.func,onPaySuccess:O.a.func,isMobile:O.a.bool,type:O.a.string},G.defaultProps={tagline:Q.g},J)},826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return n&&void 0!==t&&(e||!t)}},827:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.selectedKey,i=void 0===r?"selectedProps":r,l=n.dropedKey,s=void 0===l?"dropedProps":l;return Object.keys(e).reduce(function(n,r){var l=t.includes(r)?i:s;return o({},n,a({},l,o({},n[l],a({},r,e[r]))))},{})}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.selectPairs=r},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.convertType=function(e){return"article"===e?"Post":"book_review"===e?"BookReview":""+e.slice(0,1).toUpperCase()+e.slice(1)}},876:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(274),o=a(r),i=n(275),l=a(i);e.exports={TransitionGroup:l.default,CSSTransitionGroup:o.default}},877:function(e,t){},878:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),p=a(u),d=n(0),m=a(d),f=n(3),h=a(f),b=n(41),y=(a(b),n(39)),v=n(6),E=a(v),C=n(14),g=a(C),O=n(879),_=a(O),w=n(882),k=a(w),P=n(827),N=n(828),T=n(826),R=a(T),S=n(884);a(S);n(885);var I={list:{title:"添加收藏",tips:function(e){return e?"请选择你想添加的收藏夹":"你可以创建多个收藏夹，将答案分类收藏"}},add:{title:"创建新收藏夹"}},M=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),j.call(a),r=n,i(a,r)}return l(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.shown,a=t.items,r=t.id,o=t.type,i=t.onFetchRelations,l=e.items,s=e.relations;if(i&&(l.length!==a.length&&e.shown||l.length&&!n&&e.shown)){var c=(s?l.filter(function(e){return!{}.hasOwnProperty.call(s,e.id)}):l).map(function(e){return e.id});c.length&&i(r,o,c)}l.length>a.length&&this.setState({status:"list"})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.id,a=t.type,r=t.shown,o=t.zaEnabled;r&&!e.shown&&this.container&&o&&E.default.setModule(this.container,{module:"CollectionDialogue"},{card:{card_type:"Content",content:{type:(0,N.convertType)(a),token:String(n)}}})}},{key:"render",value:function(){var e=this,t=this.state.status,n=I[t],a=n.title,o=n.tips,i=this.props,l=i.shown,c=i.defaultStatus,u=i.relations,p=i.onFavlistAdd,d=i.onLoad,f=i.isFetching,b=i.isDrained,v=i.items,E=i.zaEnabled,C=i.authRequired,O=i.isUserActive,w=r(i,["shown","defaultStatus","relations","onFavlistAdd","onLoad","isFetching","isDrained","items","zaEnabled","authRequired","isUserActive"]),N=!(b&&!v.length),T=(0,P.selectPairs)(w,Object.keys(g.default.propTypes)),R=T.selectedProps,S=void 0;return S="list"===t?N?m.default.createElement(k.default,{ref:function(t){e.container=t},items:v,isFetching:f,isDrained:b,relations:u,onAdd:this.handleAdd,onUpdate:this.handleUpdate,onLoad:d,zaEnabled:E}):m.default.createElement(y.ModalButtonGroup,null,m.default.createElement(h.default,{preset:"primary",color:"blue",onClick:this.handleAdd},"创建收藏夹"),m.default.createElement(h.default,{onClick:this.handleCloseModal},"取消")):m.default.createElement(_.default,{onSubmit:p,isActive:O,onBack:"add"===c?this.handleCloseModal:this.handleBack,authRequired:C}),m.default.createElement(g.default,s({},R,{onClose:this.handleCloseModal,title:a,subtitle:o&&o(N),buttonGroupOnly:!N,className:"FavlistsModal",size:"large"}),l&&S)}}]),t}(d.Component);M.propTypes={id:p.default.oneOfType([p.default.string,p.default.number]),type:p.default.oneOf(["answer","article","pin"]),relations:p.default.object,onUpdateFav:p.default.func.isRequired,onFavlistAdd:p.default.func.isRequired,onFetchRelations:p.default.func,onClose:p.default.func.isRequired,shown:p.default.bool,zaEnabled:p.default.bool,authRequired:p.default.func,isUserActive:p.default.number},M.defaultProps={defaultStatus:"list",relations:{},authRequired:function(e){return e}};var j=function(){var e=this;this.state={status:this.props.defaultStatus},this.handleCloseModal=function(){e.props.onClose&&e.props.onClose(),e.setState({status:"list"})},this.handleUpdate=function(t,n){var a=e.props,r=a.onUpdateFav,o=a.id,i=a.type,l=a.items,s=a.authRequired,c=a.isUserActive,u=l.find(function(e){return e.id===t})||{},p=[t,o,i,u.isPublic];return!n&&(0,R.default)(u.isPublic,c,s)?s(r).apply(void 0,p):r.apply(void 0,p)},this.handleAdd=function(){return e.setState({status:"add"})},this.handleBack=function(){return e.setState({status:"list"})}};t.default=M},879:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=a(s),u=n(0),p=a(u),d=n(3),m=a(d),f=n(48),h=a(f),b=n(880),y=a(b),v=n(39),E=n(826),C=a(E),g=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isPublic:!0,title:"",description:""},e.handleSubmit=e.handleSubmit.bind(e),e}return i(t,e),l(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.isPublic,a=t.title,r=t.description;if(a){var o=this.props,i=o.onSubmit,l=o.onBack,s=o.authRequired,c=o.isActive,u={title:a,description:r,isPublic:n};(0,C.default)(n,c,s)?s(i)(u):(i(u),l())}}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.description,r=t.isPublic,o=this.props.onBack,i=!n;return p.default.createElement("form",{className:"Favlists-content",onSubmit:this.handleSubmit},p.default.createElement("div",{className:"Favlists-addItems"},p.default.createElement("div",{className:"Favlists-addItem"},p.default.createElement(h.default,{className:"Favlists-titleInput",placeholder:"收藏标题",onChange:function(t){var n=t.target.value;e.setState({title:n})}}),p.default.createElement("div",{className:"Favlists-inputTips"},p.default.createElement(y.default,{name:"收藏标题",current:n?n.length:0,max:20}))),p.default.createElement("div",{className:"Favlists-addItem"},p.default.createElement(h.default,{multiline:!0,className:"Favlists-descritionInput",placeholder:"收藏描述（可选）",onChange:function(t){var n=t.target.value;e.setState({description:n})},rows:5}),p.default.createElement("div",{className:"Favlists-inputTips"},p.default.createElement(y.default,{name:"收藏描述",current:a?a.length:0,max:60}))),p.default.createElement("div",{className:"Favlists-addItem"},p.default.createElement("label",{className:"Favlists-privacyOption"},p.default.createElement("input",{className:"Favlists-privacyOptionRadio",name:"isPublic",type:"radio",value:"true",checked:r,onChange:function(){return e.setState({isPublic:!0})}}),p.default.createElement("span",null,"公开"),p.default.createElement("span",{className:"Favlists-privacyOptionTips"},"有其他人关注此收藏夹时不可设置为私密")),p.default.createElement("label",{className:"Favlists-privacyOption"},p.default.createElement("input",{className:"Favlists-privacyOptionRadio",name:"isPublic",type:"radio",value:"false",checked:!r,onChange:function(){return e.setState({isPublic:!1})}}),p.default.createElement("span",null,"私密"),p.default.createElement("span",{className:"Favlists-privacyOptionTips"},"只有你自己可以查看这个收藏夹")))),p.default.createElement(v.ModalButtonGroup,{direction:"horizontal",className:""},o&&p.default.createElement(m.default,{onClick:o},"返回"),p.default.createElement(m.default,{color:"blue",preset:"primary",type:"submit",disabled:i},"确认创建")))}}]),t}(u.Component);g.propTypes={onSubmit:c.default.func.isRequired,onBack:c.default.func,authRequired:c.default.func},t.default=g},880:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return d});var i=n(0),l=n.n(i),s=n(2),c=n.n(s),u=n(881),p=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),d=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.current,n=e.max,a=e.className,r=e.name,o=void 0===r?"字数":r,i=n-t;return t>n?l.a.createElement("span",{className:c()(a,"MaxLength","is-error")},o,"已超过 ",-i," 个字"):l.a.createElement("span",{className:c()(a,"MaxLength")},i<=10&&"还可以输入 "+i+" 个字")}}]),t}(i.Component)},881:function(e,t){},882:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),u=a(c),p=n(0),d=a(p),m=n(3),f=a(m),h=n(55),b=a(h),y=n(280),v=a(y),E=n(6),C=a(E),g=n(883),O=a(g),_=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.items={},a.handleFavlistItemChange=function(e,t){C.default.trackEvent(a.items[e],{action:t?"UnCollect":"Collect",element:"Button",is_intent:!1}),a.props.onUpdate(e,t)},i=n,o(a,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.relations,a=t.items,r=t.isFetching,o=t.isDrained,i=t.onAdd,s=t.onLoad;return d.default.createElement("div",{className:"Favlists-content"},d.default.createElement(b.default,{isLocal:!0,isLoading:r,isDrained:o,onLoad:s,placeholder:d.default.createElement(v.default,{title:!0}),getContainer:function(e){return e},className:"Favlists-items"},a.map(function(t){return d.default.createElement(O.default,l({key:t.id,onChange:e.handleFavlistItemChange,checked:n[t.id]},t,{ref:function(n){e.items[t.id]=n}}))})),!a.length&&r||d.default.createElement("div",{className:"Favlists-actions"},d.default.createElement(f.default,{className:"Favlists-addButton",onClick:i,preset:"primary",color:"blue"},"创建收藏夹")))}}]),t}(p.Component);_.propTypes={isFecthing:u.default.bool,relations:u.default.object,onUpdate:u.default.func.isRequired,onAdd:u.default.func.isRequired,onLoad:u.default.func.isRequired,items:u.default.array.isRequired,isDrained:u.default.bool,authRequired:u.default.func},t.default=_},883:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),u=a(c),p=n(9),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),m=n(3),f=a(m),h=n(6),b=a(h),y=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.handleChange=function(){var e=a.props;(0,e.onChange)(e.id,a.props.checked)},i=n,o(a,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.zaEnabled,n=e.id;t&&b.default.setModule(this,{module:"CollectionItem"},{card:{card_type:"Content",content:{type:"Collection",token:String(n)}}})}},{key:"render",value:function(){var e=this.props,t=e.answerCount,n=e.title,a=e.isPublic,r=e.checked,o=void 0!==r&&r,i=o?{preset:"primary",color:"grey",children:"已收藏"}:{color:"blue",children:"收藏"};return u.default.createElement("div",{className:"Favlists-item"},u.default.createElement("div",{className:"Favlists-itemInner"},u.default.createElement("div",{className:"Favlists-itemName"},u.default.createElement("span",{className:"Favlists-itemNameText"},n),!1===a&&u.default.createElement("span",{className:"Favlists-itemIcon"},u.default.createElement(d.Lock,{size:16}))),u.default.createElement("div",{className:"Favlists-itemContent"},t," 条内容")),u.default.createElement(f.default,l({},i,{className:"Favlists-updateButton",onClick:this.handleChange})))}}]),t}(c.Component);t.default=y},884:function(e,t){e.exports={attributes:{width:"72px",height:"58px",viewBox:"0 0 72 58"},content:'<defs>         <path d="M0.00434937116,11.7604183 C0.0014585125,11.8367351 0,11.9134174 0,11.9904392 L0,52.0095608 C0,55.3137533 2.68603825,58 5.99943435,58 L66.0005656,58 C69.3089213,58 72,55.317989 72,52.0095608 L72,11.9904392 C72,8.68624675 69.3139617,6 66.0005656,6 L31.1520961,6 L30.2346555,3.7077864 C29.4154984,1.66113281 26.9585394,0 24.7478675,0 L6.18638069,0 C2.86742525,0 0.139552484,2.68348852 0.0902454792,5.99373937 L0.00434937116,11.7604183 Z" id="path-1"></path>         <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="72" height="58" fill="white">             <use xlink:href="#path-1"></use>         </mask>     </defs>     <g id="空状态" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">         <g id="collection" transform="translate(-39.000000, -30.000000)" stroke="#E7EAF1">             <g transform="translate(39.000000, 30.000000)" id="Group-7">                 <g>                     <use id="Combined-Shape" mask="url(#mask-2)" stroke-width="6" xlink:href="#path-1"></use>                     <path d="M36.4126782,38.4800003 L30.2669271,41.2927815 C29.7656337,41.522213 29.4096881,41.2718295 29.4738593,40.716584 L30.2498317,34.0024302 L25.6755762,29.0266708 C25.3024658,28.6208107 25.4306014,28.2049135 25.9785012,28.0943637 L32.6038296,26.7575697 L35.9225353,20.8696 C36.1932338,20.3893332 36.6283715,20.3826781 36.9028211,20.8696 L40.2215268,26.7575697 L46.8468552,28.0943637 C47.3872665,28.2034026 47.5280608,28.6151866 47.1497802,29.0266708 L42.5755247,34.0024302 L43.3514971,40.716584 C43.4147912,41.2642406 43.0666691,41.5253922 42.5584293,41.2927815 L36.4126782,38.4800003 Z" id="Star" stroke-width="3"></path>                 </g>             </g>         </g>     </g>'}},885:function(e,t){}});
//# sourceMappingURL=column.modals.f5cdd3d4c299db1dd7f8.js.map