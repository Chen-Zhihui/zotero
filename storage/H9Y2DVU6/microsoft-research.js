/*! Microsoft Research - v1.0.0
 * 
 * Copyright (c) 2018; * Licensed GPLv2+ */
!function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.accordionControl=function(a,b){var c,d=function(b){c={target:".msr-accordion-control"},a.extend(c,b),a(document).on("click",c.target,g)},e=function(b){b=b||a(c.target),b.closest("form").siblings(".msr-accordion").find(".msr-accordion__header").each(function(b,c){var d=a(c);"false"===d.attr("aria-expanded")&&(d.next().attr("aria-hidden","false"),d.attr("aria-expanded","true"))}),b.addClass("collapse").removeClass("expand").html(MSR_Accordion_Data.prompts.hide_all)},f=function(b){b=b||a(c.target),b.closest("form").siblings(".msr-accordion").find(".msr-accordion__header").each(function(b,c){var d=a(c);"true"===d.attr("aria-expanded")&&(d.next().attr("aria-hidden","true"),d.attr("aria-expanded","false"))}),b.addClass("expand").removeClass("collapse").html(MSR_Accordion_Data.prompts.show_all)},g=function(b){b.preventDefault();var c=a(this);c.hasClass("expand")?e(c):c.hasClass("collapse")&&f(c)};return{init:d,expandFirstPublication:function(){var b=a("#publications"),c=b.find(".msr-accordion");0<b.length&&a.each(c,function(b,c){a.each(a(c).find(".js-accordion__header"),function(b,c){if(0===b){var d=a(c);d.next().attr("aria-hidden","false"),d.attr("aria-expanded","true")}})})},collapseAll:f,expandAll:e}}(jQuery)}(),function(a){"use strict";window.customAWA={},"undefined"!=typeof awa&&(window.customAWA=function(){var b,c,d=a("body").hasClass("logged-in"),e=!1,f={},g={behavior:awa.behavior.NAVIGATION,actionType:"CL",content:{contentName:"",slot:1,area:""}},h=function(){a(".msr-events-form").each(function(){var b=a(this);b.find("select").on("change",function(c){var d=a(this).children("option:selected");g.content={contentName:j(d.text()),slot:1,area:"table-filter-options"},awa.ct.capturePageAction(b,g),i(b,g)})}),a(".js-accordion, .msr-accordion, .single-msr-research-lab .publications-accordion").each(function(b){var c=a(this);c.on("click",".msr-accordion__header",function(){var b=a(this),d=c.find(".msr-accordion__header").index(this),e=j(b.text());"true"===b.attr("aria-expanded")?(g.behavior=awa.behavior.REDUCE,g.content={contentName:e,slot:d,area:"accordion"},awa.ct.capturePageAction(b,g)):(g.behavior=awa.behavior.EXPAND,g.content={contentName:e,slot:d,area:"accordion"},awa.ct.capturePageAction(b,g)),i(b,g),g.behavior=awa.behavior.NAVIGATION})}),a(".msr-tab-list").on("click",'[role="tab"]',function(b){b.preventDefault();var c=a(this),d=c.parent().index(),e=c.text();g.behavior=awa.behavior.NAVIGATION,g.content={contentName:j(e),slot:d+1,area:"tab"},awa.ct.capturePageAction(c,g),i('[role="tab"]',g)}),a(".video-gallery-trigger").on("click",function(b){b.preventDefault();var c=a(this),d=c.text();g.content={contentName:j(d),slot:1,area:"video-gallery"},awa.ct.capturePageAction(c,g),i(c,g)}),a(document).on("click",".show-more",function(b){b.preventDefault();var c=a(this),d=c.text();g.content={contentName:j(d),slot:1,area:"load-more"},awa.ct.capturePageAction(c,g),i(c,g)}),a(document).on("click",".msr-accordion-control",function(b){b.preventDefault();var c=a(this),d=c.text();c.hasClass("collapse")?(g.behavior=awa.behavior.REDUCE,g.content={contentName:d,slot:1,area:"publication-accordion"},awa.ct.capturePageAction(c,g)):(g.behavior=awa.behavior.EXPAND,g.content={contentName:d,slot:1,area:"publication-accordion"},awa.ct.capturePageAction(c,g)),i(c,g)}),a(document).on("click",".msr-expandable-section a",function(b){b.preventDefault();var c=a(this),d=c.text();"true"===c.attr("aria-expanded")?g.behavior=awa.behavior.REDUCE:g.behavior=awa.behavior.EXPAND,g.content={contentName:j(d),slot:1,area:"ajax-video-details"},awa.ct.capturePageAction(c,g),i(c,g),g.behavior=awa.behavior.NAVIGATION}),a(".msr-table-pagination").length>0&&a(document).on("click",".page-numbers",function(b){b.preventDefault();var c=a(this),d=c.text();g.content={contentName:j(d),slot:1,area:"table-filter-navigation"},awa.ct.capturePageAction(c,g),i(c,g)}),a(".msr-hero-carousel, .msr-carousel, .msr-collections-carousel, .msr-section-front-carousel").on("afterChange",function(b,c,d){if(e){var f=a(b.currentTarget).attr("data-bi-name"),h=a(b.currentTarget).find('article[data-slick-index="'+(d+1)+'"]').find(".headline").text();g.content={contentName:j(h),slot:d+1,area:f},awa.ct.capturePageAction(a(this),g),i(a(this),g)}e=!1}),a(".msr-hero-carousel, .msr-carousel, .msr-collections-carousel, .msr-section-front-carousel").on("init",function(b){window.setTimeout(function(){a(".slide-arrow, .slide-dot").each(function(b){a(this).attr("data-bi-name","dnt button").attr("data-bi-dnt","")}),a(".slide-arrow, .slide-dot").on("click",function(a){a.preventDefault(),e=!0})},500)}),a(".widget_filter_submit").on("click",function(b){g.content={contentName:"submit",slot:1,area:"table-filter"},awa.ct.capturePageAction(a(".msr-events-form"),g),i(a(".msr-events-form"),g)}),a(".widget_filter_reset").on("click",function(b){g.content={contentName:"reset",slot:1,area:"table-filter"},awa.ct.capturePageAction(a(".msr-events-form"),g),i(a(".msr-events-form"),g)})},i=function(a,b){d&&console.log(a,b)},j=function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},k=function(){c=a(document.getElementById("video-analytics")),"undefined"!=typeof YT&&void 0!==YT.Player?(b=new YT.Player("video-analytics",{events:{onStateChange:l}}),f=awa.getConfig().coreData):window.setTimeout(k,500)},l=function(a){var b={};switch(a.data){case 0:b={behavior:awa.behavior.VIDEOCOMPLETE,actionType:"CL",contentTags:{vidnm:f.pageName}},awa.ct.captureContentPageAction(b),d&&console.log(b);break;case 1:b={behavior:awa.behavior.VIDEOSTART,actionType:"CL",contentTags:{vidnm:f.pageName}},awa.ct.captureContentPageAction(b),d&&console.log(b);break;case 2:b={behavior:awa.behavior.VIDEOPAUSE,actionType:"CL",contentTags:{vidnm:f.pageName}},awa.ct.captureContentPageAction(b),d&&console.log(b)}};return{init:h,registerYoutubeVideo:k,onAzureStateChange:function(b){a(document.getElementById(this.id_));switch(b.type){case"ended":awa.ct.captureContentPageAction({behavior:awa.behavior.VIDEOPAUSE,actionType:"CL",contentTags:{vidnm:b.target.title}}),d&&console.log(b);break;case"play":awa.ct.captureContentPageAction({behavior:awa.behavior.VIDEOSTART,actionType:"CL",contentTags:{vidnm:b.target.title}}),d&&console.log(b);break;case"pause":awa.ct.captureContentPageAction({behavior:awa.behavіor.VІDEOPAUSE,actionType:"CL",contentTags:{vidnm:b.target.title}}),d&&console.log(b)}}}}(),window.customAWA.init())}(jQuery),function(a,b){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.awards=function(){var a={body:document.querySelector(".awards"),yearList:null,contentList:null,dropdown:null},b=function(){var b;a.yearList=b=a.body.querySelectorAll("h3"),c(b),d(),f()},c=function(b){var c;a.dropdown=c=document.getElementById("year-selector"),Array.prototype.forEach.call(b,function(a,b){var d=a.innerHTML,e=document.createElement("option");a.id=a.innerHTML,e.text=d,e.value=d,0===b&&(e.selected=!0),c.appendChild(e)}),c.addEventListener("change",g)},d=function(){var b,c=a.dropdown;c.options[c.selectedIndex].value;a.contentList=b=a.body.querySelectorAll("ul"),Array.prototype.forEach.call(b,function(a,b){a.style.display="none"}),Array.prototype.forEach.call(a.yearList,function(a,b){a.style.display="none"})},e=function(){var b;a.contentList=b=a.body.querySelectorAll("ul"),Array.prototype.forEach.call(b,function(a,b){a.style.display="block"}),Array.prototype.forEach.call(a.yearList,function(a,b){a.style.display="block"})},f=function(){a.yearList[0].style.display="block",a.contentList[0].style.display="block"},g=function(){var a,b=this,c=b.options[b.selectedIndex].value;a=document.getElementById(c),d(),"all"===c?e():a&&(a.style.display="block",a.nextElementSibling.style.display="block"),h(b,c)},h=function(a,b){window.MSR.wedecsBi.sendCustomEvent(a,{"ms.interactionType":16,"ms.title":b})};return{init:b,cache:a}}(),a(document).ready(function(){window.MSR.awards.cache.body&&window.MSR.awards.init()})}(jQuery),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.carousel=function(a,b){var c={el:a(".msr-hero-carousel, .msr-carousel"),init:function(){var c=this;this.el.slick({swipeToSlide:!0,dots:!0,prevArrow:'<button type="button" class="slide-prev slide-arrow icon slick-prev slick-arrow" aria-label="previous slide" role="button">Previous slide</button>',nextArrow:'<button type="button" class="slide-next slide-arrow icon slick-next slick-arrow" aria-label="next slide" role="button">Next slide</button>',adaptiveHeight:!1,pauseOnHover:!0,customPaging:function(a,b){var c=b+1;return'<button type="button" role="button" class="slide-dot" data-index="'+c+'" aria-label="jump to slide '+c+'">Slide '+c+"</button>"}}).on("swipe",function(a,b,c){f(c,b.$slides[b.currentSlide])}),g(this.el),b!==c.el.data("autorotate")&&(a(window).on("DOMContentLoaded load resize scroll",function(){h(c.el)&&c.el.slick("slickPlay")}),c.el.on("mouseenter",function(){c.el.slick("slickPause")}),c.el.on("mouseleave",function(){c.el.slick("slickPlay")}))}},d={el:a(".msr-collections-carousel"),init:function(){this.el.slick({swipeToSlide:!0,adaptiveHeight:!0,dots:!0,prevArrow:'<button type="button" class="slide-prev slide-arrow icon slick-prev slick-arrow" aria-label="previous collection" role="button">Previous collection</button>',nextArrow:'<button type="button" class="slide-next slide-arrow icon slick-next slick-arrow" aria-label="next collection" role="button">Next collection</button>',customPaging:function(a,b){var c=b+1;return'<button type="button" role="button" class="slide-dot" data-index="'+c+'" aria-label="jump to collection '+c+'">Collection '+c+"</button>"}}).on("swipe",function(a,b,c){f(c,b.$slides[b.currentSlide])}),g(this.el)}},e={el:a(".msr-section-front-carousel"),init:function(){var c=this;c.el.slick({adaptativeHeight:!1,dots:!0,prevArrow:'<button type="button" class="slide-prev slide-arrow icon slick-prev slick-arrow" aria-label="previous slide" role="button">Previous slide</button>',nextArrow:'<button type="button" class="slide-next slide-arrow icon slick-next slick-arrow" aria-label="next slide" role="button">Next slide</button>',pauseOnHover:!0,customPaging:function(a,b){var c=b+1;return'<button type="button" role="button" class="slide-dot" data-index="'+c+'" aria-label="jump to slide '+c+'">Slide '+c+"</button>"}}).on("swipe",function(a,b,c){f(c,b.$slides[b.currentSlide])}),g(this.el),b!==c.el.data("autorotate")&&(a(window).on("DOMContentLoaded load resize scroll",function(){h(c.el)&&c.el.slick("slickPlay")}),c.el.on("mouseenter",function(){c.el.slick("slickPause")}),c.el.on("mouseleave",function(){c.el.slick("slickPlay")}))}},f=function(a,b){var c="left"===a?9:10,d="left"===a?"next":"previous";window.MSR.wedecsBi.sendCustomEvent(b,{"ms.interactionType":c,"ms.title":d})},g=function(b){b.find(".slick-prev").on("click",function(a){window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":10,"ms.title":"previous"})}),b.find(".slick-next").on("click",function(a){window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":9,"ms.title":"next"})}),b.find(".slide-dot").on("click",function(b){var c=a(b.target),d=c.data("index")-1;window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":11,"data-bi-slot":d,"ms.title":"nav"})})},h=function(a){"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]);var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)};return{hero:c,collections:d,sectionFronts:e}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.collectionsFix=function(a){var b,c=function(){a(b.adjustEl).height(a(b.fixedEl).height())};return{init:function(d){b={fixedEl:".msr-collection-inner--fixed",adjustEl:".msr-collection-inner"},a.extend(b,d),c()}}}(jQuery)}(),function(a){"use strict";window.MSR.wedecsBi=new window.MS.wedecs({a:['[role="tab"]',".msr-search-sidebar-anchor",".bi-filter-list a",".msr-expandable-section a",".msr-toggle-more-less__trigger"],input:!1}),"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.customBi=function(){var b,c,d=a("body").hasClass("logged-in"),e=a('meta[name="ms\\.sitesec"]').attr("content"),f=function(){a("#msr-search-form").each(function(){var b=a(this),c=b.find('input[name="s"], input[name="q"]'),d=b.find('input[type="submit"]');b.find("select").on("change",function(b){var c=a(this).children("option:selected");window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":16,"ms.title":c.text(),"data-bi-name":"filter"})}),b.on("submit",function(a){window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":1,"ms.title":d.val(),"data-bi-name":"search","ms.searchtype":e,"ms.searchquery":c.val()})})}),a(".msr-events-form").each(function(){var b=a(this),c=b.find("select"),d=b.find('input[type="submit"]');c.on("change",function(b){var c=a(this).children("option:selected");window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":16,"ms.title":c.text(),"data-bi-name":"filter"})}),d.on("click",function(b){var d="";c.each(function(b){var c=a(this).children("option:selected").text();b>0&&(c=", "+c),d+=c}),window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":1,"data-bi-name":"search","ms.searchtype":e,"ms.searchquery":d})})}),a(".bi-filter-list").on("click","a",function(){window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":16})}),a(".js-accordion").each(function(b){var c=a(this);c.on("click",".msr-accordion__header",function(){var b=a(this),d=c.find(".msr-accordion__header").index(this);"true"===b.attr("aria-expanded")?window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":15,"data-bi-slot":d}):window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":14,"data-bi-slot":d})})})},g=function(){c=a(document.getElementById("video-analytics")),"undefined"!=typeof YT&&void 0!==YT.Player?b=new YT.Player("video-analytics",{events:{onStateChange:h}}):window.setTimeout(g,500)},h=function(c){var e,f=a(document.getElementById("video-analytics"));switch(mscc&&!mscc.hasConsent()&&mscc.setConsent(),c.data){case 0:e=window.MSR.wedecsBi.sendCustomEvent(f,{"ms.interactionType":103,"ms.video.completionrate":100,"wcs.cn":b.getVideoData().title});break;case 1:e=window.MSR.wedecsBi.sendCustomEvent(f,{"ms.interactionType":100,"ms.video.completionrate":0,"wcs.cn":b.getVideoData().title});break;case 2:e=window.MSR.wedecsBi.sendCustomEvent(f,{"ms.interactionType":101,"ms.video.completionrate":"","wcs.cn":b.getVideoData().title})}d&&console.log(e)};return{init:f,registerYoutubeVideo:g,onAzureStateChange:function(b){var c=a(document.getElementById(this.id_));switch(mscc&&!mscc.hasConsent()&&mscc.setConsent(),b.type){case"ended":window.MSR.wedecsBi.sendCustomEvent(c,{"ms.interactionType":103,"ms.video.completionrate":100,"wcs.cn":b.target.title});break;case"play":window.MSR.wedecsBi.sendCustomEvent(c,{"ms.interactionType":100,"ms.video.completionrate":0,"wcs.cn":b.target.title});break;case"pause":window.MSR.wedecsBi.sendCustomEvent(c,{"ms.interactionType":101,"ms.video.completionrate":"","wcs.cn":b.target.title})}d&&console.log(b)}}}(),window.MSR.customBi.init()}(jQuery),function(a,b){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.detectIE=function(){return a.winSize="",a.ieVersion=null,{init:function(){void 0!==document.documentMode&&(a.ieVersion=document.documentMode,a(".picchu").addClass("ie"+a.ieVersion))},setWindowSize:function(){a.winSize=parseInt(a("#mq").css("z-index"))}}}(),a(document).ready(function(){window.MSR.detectIE.init()})}(jQuery),function(a,b){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.document=function(a){var b=window.MSR_i18n,c=function(){var a=document.querySelectorAll('a[target="_blank"]');0!==a.length&&Array.prototype.forEach.call(a,d)},d=function(a,b){if(a){var c=a.getAttribute("title");c=c?c+" ("+window.MSR_i18n.newWindowText+")":"("+window.MSR_i18n.newWindowText+")",a.setAttribute("title",c)}},e=function(){if(document.body.classList.contains("page-template-template-blog")){var a=document.querySelector('[aria-current="page"]');a&&(a.setAttribute("aria-current","true"),a.setAttribute("aria-label",b.currentPageText+", "+b.pageText+" "+a.innerText),f())}},f=function(){if(document.body.classList.contains("page-template-template-blog")){var b=document.querySelector(".pagination");if(b){var c=a("<ul />"),d=a(b).children();0<d.length&&(a.each(d,function(b,d){var e=a("<li />");e.append(d),c.append(e)}),a(b).empty().append(c))}}};return{init:function(){window.MSR.responsive.checkSupportedScripts(),window.MSR.sameHeightElements.init(),window.MSR.carousel.hero.init(),window.MSR.carousel.collections.init(),window.MSR.carousel.sectionFronts.init(),window.MSR.expandCollapse.init(),window.MSR.toggleMoreLess.init(),window.MSR.galleryModal.init(),window.MSR.accordionControl.init(),void 0!==window.MSR_Accordion_Data&&(window.MSR_Accordion_Data.autoCollapse?window.MSR.accordionControl.expandFirstPublication():window.MSR.accordionControl.expandAll());tabSet(".c-tabs"),responsiveTables(".msr-table-schedule, .msr-accordion-content table");window.MSR.profilePublicationsSort.init(),c(),e()}}}(jQuery),a(document).ready(function(){function b(){window.MSR.responsive.checkSupportedScripts(),window.MSR.sameHeightElements.set()}window.MSR.document.init(),a(window).resize(a.debounce(400,b))})}(jQuery),function(a){"use strict";a(document).ready(function(){function b(a){mscc.setConsent()}"undefined"!=typeof mscc&&(mscc&&mscc.hasConsent()||(a("#msr-search-form, .msr-events-form").each(function(){var c=a(this),d=c.find('input[type="submit"]');c.find("select").on("change",b),d.on("submit",b)}),a(".bi-filter-list").on("click","a",b),a(document.getElementById("msr-sort-publications")).on("change",b),a('[role="tab"], .msr-search-sidebar-anchor, .bi-filter-list a, .msr-expandable-section a, .msr-toggle-more-less__trigger, .slide-arrow, .slide-dot, .show-more, .msr-accordion-control, .widget_filter_submit, .widget_filter_reset, .video-gallery-trigger').on("click",b),a(".js-accordion").each(function(c){a(this).on("click",".msr-accordion__header",b)})))})}(jQuery),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.expandCollapse=function(a,b){var c,d=function(){a(c.target).each(function(c,d){var e=a(d),f=e.next(),g=e.data("expanded");console.log(e.data("expanded"));var h=a('<div class="msr-expandable-container"></div>');a(f).wrap(h),e.wrapInner('<a href="#" role="button" data-bi-name="dnt button" data-bi-dnt></a>');var i=e.children().eq(0);e.addClass("msr-expandable-header"),i.attr("aria-haspopup","true"),f.addClass("msr-expandable-content"),b!==g?(i.attr("aria-expanded","true"),f.attr("aria-hidden","false")):(i.attr("aria-expanded","false"),f.attr("aria-hidden","true")),i.on("click",function(a){a.preventDefault();var b="true"===i.attr("aria-expanded")?"false":"true",c="true"===f.attr("aria-hidden")?"false":"true";i.attr("aria-expanded",b),f.attr("aria-hidden",c),"true"===b?window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":14}):window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":15})})})};return{init:function(b){c={target:".msr-expandable-section"},a.extend(c,b),d()}}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.galleryModal=function(a,b){return{init:function(){a(".gallery-item").magnificPopup({type:"image",closeBtnInside:!0,closeMarkup:'<button class="mfp-close custom-bi-event" type="button" data-title="close gallery modal" data-interactionType="15" data-pgarea="body" data-cmpgrp="gallery modal" data-cmpnm="gallery"><span class="mfp-close">close gallery modal</span></button>',gallery:{enabled:!0,arrowMarkup:'<button type="button" class="mfp-arrow mfp-arrow-%dir% custom-bi-event" data-title="%title%" data-pgarea="body" data-cmpgrp="gallery modal" data-cmpnm="gallery">%title%</button>',tPrev:"Previous image",tNext:"Next image",tCounter:'<span class="mfp-counter caption">%curr% of %total%</span>'},image:{titleSrc:"data-caption"}})}}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.lineClamp=function(){var a,b,c,d=document.querySelectorAll(".msr-line-clamp"),e=d.length,f=!1;if(e)for(c=0;c<e;c+=1)a=d[c],b=a.getAttribute("data-clamp"),f="true"===a.getAttribute("data-clamp-force"),"P"===a.nodeName||f||(a=a.querySelector("p")),null!==a&&$clamp(a,{clamp:b})},window.MSR.lineClamp()}(),function(a){function b(e,f){a.get(e,function(g){var h;void 0===g.content&&(d[e]++,c[e]>d[e]&&(console.log("Retry: "+e+" -  missing content property"),console.log(g.responseText),b(e,f))),"publications"===g.type?(window.MSR_Accordion_Data=g.content,h=document.getElementById("tmpl-publications-container").innerHTML,h=h.replace("{%- accordionLayout %}",g.content.criteria.layout)):(h=document.createElement("div"),h.id="related-posts-"+g.type,h.className="ms-row",a(g.content).each(function(b,c){a(h).append(c.html)})),f.html(h),g.more_pages?f.append(g.more_pages):a("#show-more-wrapper",f).remove(),"publications"===g.type&&(window.MSR.profilePublicationsSort.init(),f.find("#msr-sort-publications").val(g.content.criteria.group),f.find("form.publications-sort").submit())},"json").fail(function(a){d[e]++,c[e]>d[e]&&(console.log("Retry: "+e),console.log(a.responseText),b(e,f))})}var c={},d={};a.fn.loadTab=function(e){var f=a(this);return setTimeout(function(){f.find(".tab-loader").css("display","block")},500),c[e]=3,d[e]=0,b(e,f),this}}(jQuery),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.overflowNav=function(){var a=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;window.clearTimeout(d),d=window.setTimeout(g,b),h&&a.apply(e,f)}},b=function(a){if(!a.classList.contains("ui-created")){var b=document.createElement("button"),d=document.createElement("button");b.setAttribute("id","msr-btn-left"),b.setAttribute("class","msr-btn-left c-glyph glyph-chevron-left"),b.setAttribute("type","button"),b.setAttribute("aria-label","scroll left"),d.setAttribute("id","msr-btn-right"),d.setAttribute("class","msr-btn-right c-glyph glyph-chevron-right"),d.setAttribute("type","button"),d.setAttribute("aria-label","scroll right"),a.appendChild(d),a.insertBefore(b,a.firstChild),b.addEventListener("click",function(){a.querySelector(".product-menu-container").style.marginLeft="0px",a.classList.remove("hide-right"),a.classList.add("hide-left")}),d.addEventListener("click",function(){var b=c(a);a.querySelector(".product-menu-container").style.marginLeft=-1*b+"px",a.classList.remove("hide-left"),a.classList.add("hide-right")}),a.classList.add("ui-created")}},c=function(a){return a.querySelector(".product-menu-container").clientWidth-a.clientWidth},d=function(){var a=document.getElementById("msr-btn-left"),b=document.getElementById("msr-btn-right");e.querySelector(".product-menu-container").style.marginLeft="0px",a&&b&&(a.parentNode.removeChild(a),b.parentNode.removeChild(b),e.classList.remove("ui-created"))},e=document.getElementById("product-nav");if(e){var f=e.querySelector(".product-menu-container").clientWidth,g=e.clientWidth;f>g&&b(e);var h=a(function(){f=e.querySelector(".product-menu-container").clientWidth,g=e.clientWidth,f>g?b(e):d(e)},250);window.addEventListener("resize",h)}},window.MSR.overflowNav()}(),function(a){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.profile=function(){var b,c,d=function(){var c,d;c=b.textContent,d=c.split(" ");for(var e=0;e<=d.length;e++){var f=d[e];f&&f.length>12&&a(b).addClass("shrink-name")}},e=function(b){b.target.classList.contains("more")&&(a(c.getElementsByClassName("short")[0]).remove(),c.getElementsByClassName("full")[0].classList.remove("hidden"))};return{init:function(){a("body").hasClass("author")&&(b=document.getElementById("js-profile-name"),c=document.getElementById("about"),c.addEventListener("click",e),0!==b.length&&d())}}}(),a(document).ready(function(){window.MSR.profile.init()})}(jQuery),function(a){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.prototype=function(){var b=function(){a(document).on("click",".show-more",function(){var b=a(this),d=b.html(),f=b.data("append"),g=b.data("get"),h=a(f),i=b.data("action"),j={type_search:b.data("filter_type"),search:b.data("filter"),paged:b.data("paged"),posts_per_page:b.data("posts-per-page"),post__in:b.data("post-in"),content_type:b.data("content-type"),item_template:b.data("item-template"),video_type:b.data("video-type"),context:b.data("context"),connected_to:b.data("connected-to")};switch(c(),b.attr("disabled","disabled").attr("aria-disabled","true").attr("aria-busy","true").removeClass("show-more").html("Loading"),b.data("item-template")&&!a("body").hasClass("author")){case"project|card":j.posts_per_page=12}"get-videos"===i&&(j.year=b.data("year")),e(g,j,f,b,function(){b.attr("aria-disabled","false").attr("aria-busy","false").removeAttr("disabled").addClass("show-more").html(d),h.find(".first-of-batch").removeAttr("tabindex"),h.find(".first-of-batch:last").attr("tabindex","0").focus(),"video|card"===b.data("item-template")&&h.append(a("#show-more-wrapper")),b.data("paged",j.paged+1)})}),a(".video-gallery-trigger").on("click",function(b){b.preventDefault();var e=a(this),f=(e.html(),e.data("replace")),g=e.data("get"),h=a(f),i=!1,j={single_video:e.data("single-video")};c(),e.attr("aria-busy","true"),a("html, body").animate({scrollTop:a(f).offset().top},200,function(){i||(window.setTimeout(function(){d(g,j,f,function(){window.MSR.expandCollapse.init({target:".msr-video-ajax-content .msr-expandable-section"}),window.tabSet(".c-tabs"),e.attr("aria-busy","false"),h.attr("tabindex","0").focus()})},200),i=!0)})})},c=function(){var b=a(this);window.MSR.wedecsBi.sendCustomEvent(b,{"ms.interactionType":4})},d=function(b,c,d,e){a.get(b,c,function(b){if(b&&b.posts[0]&&b.posts[0].html){var c=b.posts[0].html,f=a("<div></div>").append(c).addClass("setup-animation");a(d).html(f),window.setTimeout(function(){a(d).find(".setup-animation").addClass("animate-in"),"function"==typeof e&&e()},10)}})},e=function(b,c,d,e,f){a.get(b,c,function(b){var c="",g=Array();if(b){switch(d){case"#people-list":g=b.researchers;break;case"#video-list":default:g=b.posts}for(var h=0;h<g.length;h++)g[h].html&&(c+=g[h].html)}0!==g.length&&b.more_pages||e.hide();var i=a("<div></div>").append(c).children().addClass("setup-animation");a(d).append(i),window.setTimeout(function(){a(d).find(".setup-animation").addClass("animate-in"),"function"==typeof f&&f()},10)})};return{init:b}}(),a(document).ready(function(){window.MSR.prototype.init()})}(jQuery),function(a){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.profilePublicationsSort=function(){var b,c=function(){var a,c,d={},e={},f={},g=b.posts,h="asc"===MSR_Accordion_Data.criteria.order?1:-1;for(a in g)g.hasOwnProperty(a)&&(c=g[a].year,isNaN(c)||(Array.isArray(f[c+" "])||(f[c+" "]=[]),f[c+" "][a]=g[a],f[c+" "][a].time=new Date(g[a].post_date).getTime()));Object.keys(f).sort(function(a,b){return parseInt(a,10)<parseInt(b,10)?-1*h:a>b?1*h:0}).forEach(function(a){f[a].forEach(function(b){Array.isArray(d[a])||(d[a]=[]),d[a].push(b)})});var i,j=1;return Object.keys(d).forEach(function(a){i=d[a].slice(),i.sort(function(a,b){return(a.time-b.time)*h}),Array.isArray(e[a])||(e[a]=[]),i.forEach(function(b){var c;e[a].hasOwnProperty(b.time)?(c=b.time+j,j++):c=b.time,e[a][c]=b})}),e},d=function(a){var c,d,e,f,g={},h={},i=b.posts;g[MSR_Accordion_Data.keys.uncatalogued]=[];for(c in i)if(i.hasOwnProperty(c))for(d=i[c][a],d&&0!==d.length||(g[MSR_Accordion_Data.keys.uncatalogued][c]=i[c]),e=0;e<d.length;e++)f=d[e],Array.isArray(g[f])||(g[f]=[]),g[f][c]=i[c];return 0===g[MSR_Accordion_Data.keys.uncatalogued].length&&delete g[MSR_Accordion_Data.keys.uncatalogued],Object.keys(g).sort(function(a,b){return a<b?-1:a>b?1:0}).forEach(function(a){h[a]=g[a]}),h},e=function(a){switch(a){case"year":b.sortedPosts=c();break;default:b.sortedPosts=d(a)}},f=function(a,b){return function(c,d){if(c[a]<d[a])return-1*b;if(c[a]>d[a])return 1*b;if("timestamp"===a){if(c.title<d.title)return-1;if(c.title>d.title)return 1}return 0}},g=function(){var a,c="title"===MSR_Accordion_Data.criteria.sort?"title":"timestamp",d="asc"===MSR_Accordion_Data.criteria.order?1:-1,e={};for(a in b.sortedPosts)b.sortedPosts.hasOwnProperty(a)&&(e[a]=b.sortedPosts[a].sort(f(c,d)));b.sortedPosts=e},h=function(a,b){var c,d,e,f,g,h,i,j="";for(c in a)a.hasOwnProperty(c)&&(d=document.getElementById("tmpl-publications-accordion-item-"+MSR_Accordion_Data.criteria.layout),e=d.innerHTML,f="",g="",h="",i=!1!==a[c].thumbnail?a[c].thumbnail:"","list"===MSR_Accordion_Data.criteria.layout?(a[c].download_link&&(f='<a href="'+a[c].download_link+'">'+MSR_Accordion_Data.prompts.download_pdf+"</a>"),a[c].external_link&&(g='<a href="'+a[c].external_link+'">'+MSR_Accordion_Data.prompts.external_link+"</a>")):(a[c].download_link&&(f='<li><a href="'+a[c].download_link+'" class="icon icon-pdf small">Pdf</a></li>'),a[c].external_link&&(g='<li><a href="'+a[c].external_link+'" class="icon icon-globe small">Web</a></li>')),"1"===MSR_Accordion_Data.displayThumbnails&&a[c].thumbnail&&(h="has-thumbnail"),e=e.replace(/{%- title %}/g,a[c].title),e=e.replace(/{%- permalink %}/g,a[c].permalink),e=e.replace(/{%- people %}/g,a[c].people.join(", ")),e=e.replace(/{%- publishedIn %}/g,a[c].publish_in),e=e.replace(/{%- publisher %}/g,a[c].publisher),e=e.replace(/{%- publishDate %}/g,a[c].post_date),e=e.replace(/{%- downloadLink %}/g,f),e=e.replace(/{%- externalLink %}/g,g),e=e.replace(/{%- hasThumbnail %}/g,h),e=e.replace(/{%- thumbnail %}/g,i),j+=e);return b=b.replace(/{%- accordionPanel %}/g,j)},i=function(c){var d,e,f,g=document.getElementById("tmpl-publications-accordion").innerHTML,i=b.sortedPosts,j=c.nextElementSibling,k=j.parentNode,l="";if(j){k.removeChild(j),d=document.createElement("div"),d.className="js-accordion",d.setAttribute("data-accordion-prefix-classes","msr-accordion"),d.setAttribute("data-layout",MSR_Accordion_Data.criteria.layout);for(e in i)i.hasOwnProperty(e)&&(f=g.replace(/{%- accordionTitle %}/g,e.trim()),f=h(i[e],f),l+=f);d.innerHTML=l,k.appendChild(d),a("body").off("click",".js-accordion__header"),window.MSR.accordion.init(),window.MSR.accordionControl.collapseAll(),window.MSR_Accordion_Data.autoCollapse?window.MSR.accordionControl.expandFirstPublication():window.MSR.accordionControl.expandAll()}},j=function(a){var b=this,c=b.querySelector("select"),d=c.options[c.selectedIndex].value||"year";a.preventDefault(),e(d),g(),i(b)},k=function(){var c=a(b.target);c.on("submit",j),c.on("change","select",function(){a(b.target).submit()}),"publications"===window.location.hash.substr(1)&&a("#publications_tab").trigger("click")};return{init:function(c){"undefined"!=typeof MSR_Accordion_Data&&(b={target:".publications-sort",posts:MSR_Accordion_Data.publications,sortedPosts:{}},a.extend(b,c),0<a(b.target).length&&k())}}}()}(jQuery),function(a){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.researchAreas=function(){var b,c=function(c){a("[data-research-area]").length&&(b={target:"[data-research-area]"},a.extend(b,c),d(),a(window).on("resize",i),a(window).on("resize",h),a(window).trigger("resize"))},d=function(){a(b.target).each(function(b,c){var d=a(c),e=d.attr("data-research-area"),f=a("#"+e);f.length&&(d.attr({"aria-controls":e,"aria-expanded":!1}),f.attr({"aria-hidden":!0}),d.on("click",g))})},e=function(b,c,d){d=void 0!==d&&d,b.attr({"aria-hidden":!1}),c.attr({"aria-expanded":!0}),d&&(b.find("a").eq(0).focus(),a("html,body").animate({scrollTop:c.offset().top},1e3))},f=function(a,b){a.attr({"aria-hidden":!0}),b.attr({"aria-expanded":!1})},g=function(b){var c=a(this),d=c.attr("data-research-area"),g=a("#"+d);b.preventDefault(),"true"===c.attr("aria-expanded")?f(g,c):e(g,c,!0)
},h=a.debounce(400,function(){a(b.target).each(function(b,c){var d=a(c),e=d.attr("data-research-area"),f=a("#"+e);if(f.length&&window.matchMedia("(min-width: 768px)").matches)for(var g=f.find("img"),h=0;h<g.length;h++){var i=g[h];i.hasAttribute("data-src")&&!i.hasAttribute("src")&&(i.src=i.getAttribute("data-src"),i.removeAttribute("data-src")),i.hasAttribute("data-srcset")&&!i.hasAttribute("srcset")&&(i.setAttribute("srcset",i.getAttribute("data-srcset")),i.removeAttribute("data-srcset"))}})}),i=a.debounce(400,function(){a(b.target).each(function(b,c){var d=a(c),f=d.attr("data-research-area"),g=a("#"+f);g.length&&(window.matchMedia("(min-width: 768px)").matches||e(g,d))})});return{init:c}}(),a(document).ready(function(){window.MSR.researchAreas.init()})}(jQuery),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.responsive=function(a,b){var c,d,e,f=function(){window.MSR.detectIE.setWindowSize(),a.winSize<3?h():g(),a.winSize>=2&&(c||(c=window.MSR.stickyElement,c.init({target:".msr-search-sidebar",offsetTop:33})),d||(d=window.MSR.scrollAnchor,d.init({target:".msr-search-sidebar-anchor"}))),a.winSize>=2&&a.winSize<5&&null!==a.ieVersion&&a.ieVersion<10&&window.MSR.collectionsFix.init()},g=function(){e||(e=window.MSR.videoModal,e.init()),void 0!==a.blogTabs&&null!==a.blogTabs&&a.blogTabs.destroy()},h=function(){void 0===a.blogTabs||null===a.blogTabs?a.blogTabs=tabSet(".c-tabs--blogs"):a.blogTabs.build()};return{checkSupportedScripts:f,desktopScripts:g,mobileScripts:h}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.sameHeightElements=function(a,b){var c;return{init:function(b){c={parent:".same-height-group",target:".same-height-target"},a.extend(c,b),this.set()},set:function(){var b=0;a(c.parent).find(c.target).each(function(c,d){a(d).css("height","auto"),a(d).height()>b&&(b=a(d).height())}).height(b)}}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.scrollAnchor=function(a,b){var c,d,e=function(b){c={target:".msr-scroll-anchor-link",scrollOffsetTop:30,activeOffsetTop:200,activeEl:"li"},a.extend(c,b),a(c.target).length>0&&f()},f=function(){function b(){var b=d[0],f=d.length-1;a.each(d,function(g,h){var i=a(h)[0];i.activeEl.removeClass("active"),e.scrollTop()+e.height()===a(document).height()?b=d[f]:e.scrollTop()>i.target_offset-c.activeOffsetTop&&(b=i)}),b.activeEl.addClass("active")}var e=a(window);d=a(c.target).filter("[href^='#']:not([href='#'])").map(function(a,b){return new g(b,c)}).toArray(),e.load(b()),e.scroll(a.throttle(100,b))},g=function(b,c){function d(){e.target_offset=e.target.offset().top}var e=this,f=a(window);this.anchor=a(b),this.target=a(this.anchor.attr("href")),this.target_header=this.target.find("h2, h3, h4, h5, h6").eq(0),this.focusEl=this.target_header.length>0?this.target_header:this.target,this.activeEl=this.anchor.closest(c.activeEl),this.anchor.on("click",function(b){b.preventDefault(),window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":11}),a("html, body").animate({scrollTop:e.target_offset-c.scrollOffsetTop},500,function(){a(this).blur(),e.focusEl.attr("tabindex","0").css("outline","none").focus()})}),this.focusEl.on("focusout",function(b){a(this).removeAttr("tabindex")}),f.load(d()),f.resize(a.debounce(400,d))};return g.prototype.calculateOffset=function(){this.target_offset=this.target.offset().top},{init:e}}(jQuery)}(),function(a){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.searchForm=function(){var b=null,c=function(){var a=b.find(".person-select2"),c={width:"100%",allowClear:!0,placeholder:a.data("placeholder")};c.ajax={url:b.data("ajax-url"),dataType:"json",delay:100,data:function(a){return{search:a.term}},headers:{"X-WP-Nonce":b.data("ajax-nonce")},processResults:function(a,b){for(var c=[],d=a.researchers,e=0;e<d.length;e++){var f={id:d[e].user_nicename,text:d[e].display_name};c[c.length]=f}return{results:c}}},a.select2(c)},d=function(){a('input[name="from_date"], input[name="to_date"]').datepicker({dateFormat:"yy-mm-dd"})};return{init:function(){b=a(".msr-search-bar-form"),0!==b.length&&(c(),d())}}}(),a(document).ready(function(){window.MSR.searchForm.init()})}(jQuery),function(a,b){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.stickyElement=function(){var b,c=function(c){var d=a(c),e=a(window),f=d.wrap('<div class="msr-sticky-parent"></div>').parent(),g=f.offset(),h=function(){g=f.offset()},i=function(){a.winSize>=2&&(e.scrollTop()>g.top-b.offsetTop?d.addClass("stuck").css({position:"fixed",top:b.offsetTop}):d.removeClass("stuck").css({position:"static",top:"auto"}))};e.resize(a.debounce(400,h)),e.scroll(a.throttle(100,i))};return{init:function(d){b={target:".msr-sticky",offsetTop:0,applyActiveTo:null},a.extend(b,d),a(b.target).each(function(a,b){c(b)})}}}()}(jQuery),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.toggleMoreLess=function(a,b){var c={target:".msr-toggle-more-less",toggleClass:"",triggerClass:""},d=function(){function b(b,c){return b=a.trim(b),[b.substring(0,c+1),b.substring(c+1)]}var d=window.MSR.toggleMoreLess;a(c.target).each(function(c,e){var f=a(e),g=f.attr("data-char")>0?parseInt(f.attr("data-char")):0;if(!(g>=f.text().trim().length)){var h=b(f.text(),g);f.html("");var i=a('<span class="msr-toggle-more-less__container toggle-hidden">'+h[0]+"</span>").appendTo(f),j=a('<span class="msr-toggle-more-less__contents" aria-hidden="true">'+h[1]+"</span>").appendTo(i),k=a('<a href="#" class="msr-toggle-more-less__trigger '+d.config.triggerClass+'" aria-expanded="false" aria-haspopup="true">show more</a>').appendTo(e);k.on("click",function(a){a.preventDefault(),"true"===k.attr("aria-expanded")?(i.addClass("toggle-hidden"),k.attr("aria-expanded","false").text("show more"),j.attr("aria-hidden","true"),window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":15,"ms.title":"show less"})):(i.removeClass("toggle-hidden"),k.attr("aria-expanded","true").text("show less"),j.attr("aria-hidden","false"),window.MSR.wedecsBi.sendCustomEvent(this,{"ms.interactionType":14,"ms.title":"show more"}))})}})};return{init:function(b){c=a.extend(c,b),d()},config:c}}(jQuery)}(),function(){"use strict";"object"!=typeof window.MSR&&(window.MSR={}),window.MSR.videoModal=function(a,b){var c=null;return{init:function(){var b=function(b,c,d){window.MSR.wedecsBi.sendCustomEvent(a.magnificPopup.instance.currItem.el[0],{"ms.interactionType":c,"ms.video.completionrate":d,"ms.title":b.getVideoData().title,"wcs.cn":b.getVideoData().title})},d=function(a){a.target.playVideo(),b(c,100,0)},e=function(d){switch(d.data){case 0:b(c,103,100),a.magnificPopup.close(),c.destroy();break;case 2:b(c,101,"")}};a(".video-link").magnificPopup({type:"inline",closeBtnInside:!0,closeMarkup:'<button class="mfp-close" type="button"><span class="mfp-close">close video modal</span></button>',callbacks:{open:function(){var b=a.magnificPopup.instance,f=a(b.currItem.el[0]),g=f.attr("href"),h=g.lastIndexOf("embed/")>0?g.substr(g.lastIndexOf("embed/")+6):g.substr(g.lastIndexOf("/watch?v=")+9);c=new YT.Player("player",{height:432,width:768,videoId:h,events:{onReady:d,onStateChange:e}})},close:function(){c.destroy(),b(c,15,"")}}})}}}(jQuery)}();