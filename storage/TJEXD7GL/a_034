KISSY.add("malldetail/tabbar/SellerInfo",function(e,t,a,i){function n(e){l=e||{},c=l.element,codeTrack("mod.sellerInfo.init","view.mainBody.init"),o()}function o(){var n=t.attr(c,"data-url");n&&i({"url":n,"dataType":"jsonp","jsonpCallback":"jsonpSellerInfo","cache":!0,"success":function(i){var n,o,c=t.create(i[0]);t.insertAfter(c,"#J_SellerInfo .hd"),n=t.get("#J_sellerRateInfo"),o=t.get("li.selected",n),t.removeClass(o,"selected"),t.addClass(o,s);var d=e.query("#J_sellerRateInfo .J_RateInfoTrigger");a.on(d,"mouseover",function(){t.removeClass(d,s),t.addClass(this,s)}),l.product.onLoad(["shopDynamicRating","itemDO"],function(e,t){var a=t.userId,i=e["SM_368_dsr-"+a];i&&r(i)}),l.success&&l.success(),codeTrack("mod.sellerInfo.show","mod.sellerInfo.init")}})}function r(a){if(e.isEmptyObject(a))t.remove("#J_SellerInfo div.dynamicRate");else{var i,n,o,r,l,c,s,d,u,m,p=0,f=[],h="%",v=/^\d+(?:\.\d{0,1})?/;i=t.get("#J_sellerRateInfo"),i&&(f.push(a.m,a.m_UFB,a.m_g,a.s,a.s_UFB,a.s_g,a.c,a.c_UFB,a.c_g),n=t.query("li",i),e.each(n,function(a){switch(o=f[p],d=t.get("em.count",a),t.attr(d,{"title":o+"\u5206"}),t.text(d,(o+"").match(v)[0]),e.each(t.query("em",t.get("div.total",a)),function(e){t.hasClass(e,"h")&&t.attr(e,{"title":o+"\u5206"}),t.text(e,(o+"").match(v)[0])}),c=f[++p],o=f[++p],s=(o+"").split(/\./),r="."+(s[1]||"00"),r.length<3&&(r+="0"),o=s[0],c){case 0:l="over",m="\u8ba1\u7b97\u89c4\u5219:(\u5e97\u94fa\u5f97\u5206-\u540c\u884c\u4e1a\u5e73\u5747\u5206)/(\u540c\u884c\u4e1a\u5e97\u94fa\u6700\u9ad8\u5f97\u5206-\u540c\u884c\u4e1a\u5e73\u5747\u5206)";break;case 1:l="equal",o="--------",r="",h="",m="";break;case 2:l="lower",m="\u8ba1\u7b97\u89c4\u5219:(\u540c\u884c\u4e1a\u5e73\u5747\u5206-\u5e97\u94fa\u5f97\u5206)/(\u540c\u884c\u4e1a\u5e73\u5747\u5206-\u540c\u884c\u4e1a\u5e97\u94fa\u6700\u4f4e\u5f97\u5206)"}u=t.get("strong.percent",a),t.removeClass(u,"over lower equal"),t.addClass(u,l),o=o+r+h,t.attr(u.parentNode,"title",m),t.html(u,o),p++}))}}var l,c,s="tm-selected";return{"init":n}},{"requires":["dom","event","ajax","malldetail/tabbar/SellerInfo.css"]});